# ==========================================
# User Activity Aggregation ETL Crontab Configuration
# ==========================================
# Hourly ETL for 100x API performance improvement
# Based on ETL_OPTIMIZATION_ANALYSIS.md recommendations

# Run user activity ETL every hour at minute 10 for clean hourly processing
# This provides 1-hour data freshness while dramatically improving API performance
10 * * * * cd /Users/renaka/gtx/clob-indexer/analytics-service && node scripts/user-activity-etl.js >> logs/user-activity-etl.log 2>&1

# Alternative: Run every 2 hours for lighter processing (uncomment if preferred)
# 10 */2 * * * cd /Users/renaka/gtx/clob-indexer/analytics-service && node scripts/user-activity-etl.js >> logs/user-activity-etl.log 2>&1

# ==========================================
# Installation Instructions:
# ==========================================
# 1. Make script executable:
#    chmod +x scripts/user-activity-etl.js
#
# 2. Create logs directory:
#    mkdir -p logs
#
# 3. Install crontab (add to existing crontab):
#    crontab -l > current_crontab.txt
#    cat scripts/crontab-user-activity.txt >> current_crontab.txt
#    crontab current_crontab.txt
#
# 4. Verify crontab installation:
#    crontab -l
#
# 5. Monitor ETL logs:
#    tail -f logs/user-activity-etl.log
#
# ==========================================
# Performance Impact:
# ==========================================
# - API Response Time: 3-10 seconds â†’ 30-100ms
# - Performance Improvement: 100x faster
# - Data Freshness: 1 hour (acceptable for user analytics)
# - Database Load Reduction: 90%+ on complex user aggregation queries
# - Memory Usage: Significant reduction due to pre-computed aggregations
# ==========================================