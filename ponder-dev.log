2025-07-10T22:52:26: 
2025-07-10T22:52:26: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:26: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:26: 
2025-07-10T22:52:27: 10:52:27 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:27: 10:52:27 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:27: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:27: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:27: 10:52:27 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:28: 10:52:28 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:28: Gateway listening on :42080
2025-07-10T22:52:28: Initializing services...
2025-07-10T22:52:28: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:28: 10:52:28 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:28: 10:52:28 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:28: IORedis client connected
2025-07-10T22:52:28: IORedis client initialized successfully
2025-07-10T22:52:28: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:28: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:28: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:28: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:28: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:28: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:28: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:28: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:28: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:28: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:28: Event publisher initialized successfully
2025-07-10T22:52:28: 10:52:28 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:28: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:28: 
2025-07-10T22:52:28: Version: viem@2.31.7
2025-07-10T22:52:28:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:28:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:28:     at async Promise.all (index 2)
2025-07-10T22:52:28:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:28:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:28:     at async Promise.all (index 0)
2025-07-10T22:52:28:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:28:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:28: 10:52:28 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:28:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:28: 
2025-07-10T22:52:28: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:28: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:28: 
2025-07-10T22:52:29: 10:52:29 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:29: 10:52:29 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:29: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:29: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:29: 10:52:29 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:29: 10:52:29 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:29: Gateway listening on :42080
2025-07-10T22:52:29: Initializing services...
2025-07-10T22:52:29: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:29: 10:52:29 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:29: 10:52:29 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:29: IORedis client connected
2025-07-10T22:52:29: IORedis client initialized successfully
2025-07-10T22:52:29: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:29: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:29: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:29: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:29: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:29: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:29: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:29: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:29: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:29: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:29: Event publisher initialized successfully
2025-07-10T22:52:29: 10:52:29 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:29: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:29: 
2025-07-10T22:52:29: Version: viem@2.31.7
2025-07-10T22:52:29:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:29:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:29:     at async Promise.all (index 2)
2025-07-10T22:52:29:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:29:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:29:     at async Promise.all (index 0)
2025-07-10T22:52:29:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:29:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:29: 10:52:29 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:30:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:30: 
2025-07-10T22:52:30: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:30: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:30: 
2025-07-10T22:52:30: 10:52:30 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:31: 10:52:31 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:31: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:31: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:31: 10:52:31 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:31: 10:52:31 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:31: Gateway listening on :42080
2025-07-10T22:52:31: Initializing services...
2025-07-10T22:52:31: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:31: 10:52:31 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:31: 10:52:31 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:31: IORedis client connected
2025-07-10T22:52:31: IORedis client initialized successfully
2025-07-10T22:52:31: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:31: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:31: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:31: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:31: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:31: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:31: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:31: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:31: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:31: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:31: Event publisher initialized successfully
2025-07-10T22:52:31: 10:52:31 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:31: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:31: 
2025-07-10T22:52:31: Version: viem@2.31.7
2025-07-10T22:52:31:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:31:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:31:     at async Promise.all (index 2)
2025-07-10T22:52:31:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:31:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:31:     at async Promise.all (index 0)
2025-07-10T22:52:31:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:31:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:31: 10:52:31 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:31:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:31: 
2025-07-10T22:52:31: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:31: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:31: 
2025-07-10T22:52:32: 10:52:32 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:32: 10:52:32 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:32: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:32: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:32: 10:52:32 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:33: 10:52:33 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:33: Gateway listening on :42080
2025-07-10T22:52:33: Initializing services...
2025-07-10T22:52:33: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:33: 10:52:33 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:33: 10:52:33 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:33: IORedis client connected
2025-07-10T22:52:33: IORedis client initialized successfully
2025-07-10T22:52:33: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:33: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:33: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:33: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:33: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:33: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:33: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:33: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:33: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:33: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:33: Event publisher initialized successfully
2025-07-10T22:52:33: 10:52:33 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:33: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:33: 
2025-07-10T22:52:33: Version: viem@2.31.7
2025-07-10T22:52:33:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:33:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:33:     at async Promise.all (index 2)
2025-07-10T22:52:33:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:33:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:33:     at async Promise.all (index 0)
2025-07-10T22:52:33:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:33:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:33: 10:52:33 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:33:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:33: 
2025-07-10T22:52:33: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:33: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:33: 
2025-07-10T22:52:34: 10:52:34 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:34: 10:52:34 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:34: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:34: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:34: 10:52:34 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:35: 10:52:35 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:35: Gateway listening on :42080
2025-07-10T22:52:35: Initializing services...
2025-07-10T22:52:35: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:35: 10:52:35 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:35: 10:52:35 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:35: IORedis client connected
2025-07-10T22:52:35: IORedis client initialized successfully
2025-07-10T22:52:35: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:35: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:35: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:35: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:35: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:35: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:35: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:35: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:35: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:35: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:35: Event publisher initialized successfully
2025-07-10T22:52:35: 10:52:35 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:35: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:35: 
2025-07-10T22:52:35: Version: viem@2.31.7
2025-07-10T22:52:35:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:35:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:35:     at async Promise.all (index 2)
2025-07-10T22:52:35:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:35:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:35:     at async Promise.all (index 0)
2025-07-10T22:52:35:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:35:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:35: 10:52:35 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:35:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:35: 
2025-07-10T22:52:35: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:35: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:35: 
2025-07-10T22:52:36: 10:52:36 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:36: 10:52:36 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:36: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:36: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:36: 10:52:36 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:36: 10:52:36 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:36: Gateway listening on :42080
2025-07-10T22:52:36: Initializing services...
2025-07-10T22:52:36: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:36: 10:52:36 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:36: 10:52:36 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:36: IORedis client connected
2025-07-10T22:52:36: IORedis client initialized successfully
2025-07-10T22:52:36: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:36: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:36: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:36: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:36: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:36: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:36: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:36: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:36: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:36: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:36: Event publisher initialized successfully
2025-07-10T22:52:36: 10:52:36 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:36: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:36: 
2025-07-10T22:52:36: Version: viem@2.31.7
2025-07-10T22:52:36:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:36:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:36:     at async Promise.all (index 2)
2025-07-10T22:52:36:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:36:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:36:     at async Promise.all (index 0)
2025-07-10T22:52:36:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:36:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:36: 10:52:36 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:36:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:37: 
2025-07-10T22:52:37: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:37: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:37: 
2025-07-10T22:52:37: 10:52:37 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:37: 10:52:37 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:37: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:37: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:38: 10:52:38 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:38: 10:52:38 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:38: Gateway listening on :42080
2025-07-10T22:52:38: Initializing services...
2025-07-10T22:52:38: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:38: 10:52:38 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:38: 10:52:38 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:38: IORedis client connected
2025-07-10T22:52:38: IORedis client initialized successfully
2025-07-10T22:52:38: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:38: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:38: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:38: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:38: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:38: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:38: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:38: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:38: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:38: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:38: Event publisher initialized successfully
2025-07-10T22:52:38: 10:52:38 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:38: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:38: 
2025-07-10T22:52:38: Version: viem@2.31.7
2025-07-10T22:52:38:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:38:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:38:     at async Promise.all (index 2)
2025-07-10T22:52:38:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:38:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:38:     at async Promise.all (index 0)
2025-07-10T22:52:38:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:38:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:38: 10:52:38 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:38:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:38: 
2025-07-10T22:52:38: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:38: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:38: 
2025-07-10T22:52:39: 10:52:39 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:39: 10:52:39 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:39: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:39: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:39: 10:52:39 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:40: 10:52:40 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:40: Gateway listening on :42080
2025-07-10T22:52:40: Initializing services...
2025-07-10T22:52:40: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:40: 10:52:40 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:40: 10:52:40 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:40: IORedis client connected
2025-07-10T22:52:40: IORedis client initialized successfully
2025-07-10T22:52:40: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:40: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:40: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:40: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:40: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:40: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:40: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:40: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:40: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:40: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:40: Event publisher initialized successfully
2025-07-10T22:52:40: 10:52:40 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:40: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:40: 
2025-07-10T22:52:40: Version: viem@2.31.7
2025-07-10T22:52:40:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:40:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:40:     at async Promise.all (index 2)
2025-07-10T22:52:40:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:40:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:40:     at async Promise.all (index 0)
2025-07-10T22:52:40:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:40:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:40: 10:52:40 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:40:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:40: 
2025-07-10T22:52:40: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:40: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:40: 
2025-07-10T22:52:41: 10:52:41 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:41: 10:52:41 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:41: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:41: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:41: 10:52:41 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:41: 10:52:41 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:41: Gateway listening on :42080
2025-07-10T22:52:41: Initializing services...
2025-07-10T22:52:41: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:41: 10:52:41 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:41: 10:52:41 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:41: IORedis client connected
2025-07-10T22:52:41: IORedis client initialized successfully
2025-07-10T22:52:41: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:41: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:41: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:41: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:41: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:41: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:41: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:41: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:41: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:41: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:41: Event publisher initialized successfully
2025-07-10T22:52:42: 10:52:42 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:42: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:42: 
2025-07-10T22:52:42: Version: viem@2.31.7
2025-07-10T22:52:42:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:42:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:42:     at async Promise.all (index 2)
2025-07-10T22:52:42:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:42:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:42:     at async Promise.all (index 0)
2025-07-10T22:52:42:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:42:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:42: 10:52:42 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:42:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:42: 
2025-07-10T22:52:42: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:42: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:42: 
2025-07-10T22:52:42: 10:52:42 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:43: 10:52:43 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:43: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:43: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:43: 10:52:43 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:44: 10:52:44 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:44: Gateway listening on :42080
2025-07-10T22:52:44: Initializing services...
2025-07-10T22:52:44: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:44: 10:52:44 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:44: 10:52:44 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:44: IORedis client connected
2025-07-10T22:52:44: IORedis client initialized successfully
2025-07-10T22:52:44: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:44: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:44: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:44: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:44: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:44: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:44: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:44: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:44: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:44: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:44: Event publisher initialized successfully
2025-07-10T22:52:44: 10:52:44 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:44: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:44: 
2025-07-10T22:52:44: Version: viem@2.31.7
2025-07-10T22:52:44:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:44:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:44:     at async Promise.all (index 2)
2025-07-10T22:52:44:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:44:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:44:     at async Promise.all (index 0)
2025-07-10T22:52:44:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:44:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:44: 10:52:44 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:44:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:44: 
2025-07-10T22:52:44: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:44: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:44: 
2025-07-10T22:52:45: 10:52:45 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:45: 10:52:45 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:45: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:45: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:45: 10:52:45 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:46: 10:52:46 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:46: Gateway listening on :42080
2025-07-10T22:52:46: Initializing services...
2025-07-10T22:52:46: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:46: 10:52:46 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:46: 10:52:46 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:46: IORedis client connected
2025-07-10T22:52:46: IORedis client initialized successfully
2025-07-10T22:52:46: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:46: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:46: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:46: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:46: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:46: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:46: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:46: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:46: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:46: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:46: Event publisher initialized successfully
2025-07-10T22:52:46: 10:52:46 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:46: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:46: 
2025-07-10T22:52:46: Version: viem@2.31.7
2025-07-10T22:52:46:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:46:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:46:     at async Promise.all (index 2)
2025-07-10T22:52:46:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:46:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:46:     at async Promise.all (index 0)
2025-07-10T22:52:46:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:46:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:46: 10:52:46 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:46:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:46: 
2025-07-10T22:52:46: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:46: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:46: 
2025-07-10T22:52:47: 10:52:47 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:47: 10:52:47 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:47: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:47: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:48: 10:52:48 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:48: 10:52:48 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:48: Gateway listening on :42080
2025-07-10T22:52:48: Initializing services...
2025-07-10T22:52:48: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:48: 10:52:48 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:48: 10:52:48 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:48: IORedis client connected
2025-07-10T22:52:48: IORedis client initialized successfully
2025-07-10T22:52:48: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:48: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:48: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:48: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:48: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:48: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:48: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:48: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:48: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:48: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:48: Event publisher initialized successfully
2025-07-10T22:52:48: 10:52:48 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:48: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:48: 
2025-07-10T22:52:48: Version: viem@2.31.7
2025-07-10T22:52:48:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:48:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:48:     at async Promise.all (index 2)
2025-07-10T22:52:48:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:48:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:48:     at async Promise.all (index 0)
2025-07-10T22:52:48:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:48:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:48: 10:52:48 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:48:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:49: 
2025-07-10T22:52:49: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:49: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:49: 
2025-07-10T22:52:49: 10:52:49 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:50: 10:52:50 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:50: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:50: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:50: 10:52:50 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:50: 10:52:50 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:50: Gateway listening on :42080
2025-07-10T22:52:50: Initializing services...
2025-07-10T22:52:50: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:50: 10:52:50 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:50: 10:52:50 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:51: IORedis client connected
2025-07-10T22:52:51: IORedis client initialized successfully
2025-07-10T22:52:51: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:51: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:51: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:51: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:51: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:51: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:51: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:51: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:51: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:51: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:51: Event publisher initialized successfully
2025-07-10T22:52:51: 10:52:51 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:51: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:51: 
2025-07-10T22:52:51: Version: viem@2.31.7
2025-07-10T22:52:51:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:51:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:51:     at async Promise.all (index 2)
2025-07-10T22:52:51:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:51:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:51:     at async Promise.all (index 0)
2025-07-10T22:52:51:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:51:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:51: 10:52:51 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:51:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:51: 
2025-07-10T22:52:51: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:51: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:51: 
2025-07-10T22:52:51: 10:52:51 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:52: 10:52:52 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:52: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:52: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:52: 10:52:52 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:52: 10:52:52 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:52: Gateway listening on :42080
2025-07-10T22:52:52: Initializing services...
2025-07-10T22:52:52: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:52: 10:52:52 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:52: 10:52:52 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:52: IORedis client connected
2025-07-10T22:52:52: IORedis client initialized successfully
2025-07-10T22:52:52: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:52: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:52: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:52: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:52: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:52: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:52: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:52: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:52: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:52: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:52: Event publisher initialized successfully
2025-07-10T22:52:52: 10:52:52 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:52: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:52: 
2025-07-10T22:52:52: Version: viem@2.31.7
2025-07-10T22:52:52:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:52:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:52:     at async Promise.all (index 2)
2025-07-10T22:52:52:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:52:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:52:     at async Promise.all (index 0)
2025-07-10T22:52:52:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:52:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:52: 10:52:52 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:52:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:52: 
2025-07-10T22:52:52: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:52: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:52: 
2025-07-10T22:52:53: 10:52:53 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:53: 10:52:53 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:53: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:53: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:53: 10:52:53 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:54: 10:52:54 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:54: Gateway listening on :42080
2025-07-10T22:52:54: Initializing services...
2025-07-10T22:52:54: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:54: 10:52:54 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:54: 10:52:54 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:54: IORedis client connected
2025-07-10T22:52:54: IORedis client initialized successfully
2025-07-10T22:52:54: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:54: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:54: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:54: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:54: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:54: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:54: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:54: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:54: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:54: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:54: Event publisher initialized successfully
2025-07-10T22:52:54: 10:52:54 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:54: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:54: 
2025-07-10T22:52:54: Version: viem@2.31.7
2025-07-10T22:52:54:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:54:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:54:     at async Promise.all (index 2)
2025-07-10T22:52:54:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:54:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:54:     at async Promise.all (index 0)
2025-07-10T22:52:54:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:54:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:54: 10:52:54 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:54:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:54: 
2025-07-10T22:52:54: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:54: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:54: 
2025-07-10T22:52:54: 10:52:54 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:55: 10:52:55 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:55: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:55: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:55: 10:52:55 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:55: 10:52:55 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:55: Gateway listening on :42080
2025-07-10T22:52:55: Initializing services...
2025-07-10T22:52:55: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:55: 10:52:55 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:55: 10:52:55 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:55: IORedis client connected
2025-07-10T22:52:55: IORedis client initialized successfully
2025-07-10T22:52:55: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:55: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:55: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:55: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:55: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:55: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:55: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:55: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:55: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:55: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:55: Event publisher initialized successfully
2025-07-10T22:52:55: 10:52:55 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:55: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:55: 
2025-07-10T22:52:55: Version: viem@2.31.7
2025-07-10T22:52:55:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:55:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:55:     at async Promise.all (index 2)
2025-07-10T22:52:55:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:55:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:55:     at async Promise.all (index 0)
2025-07-10T22:52:55:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:55:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:55: 10:52:55 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:55:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:55: 
2025-07-10T22:52:55: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:55: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:55: 
2025-07-10T22:52:56: 10:52:56 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:56: 10:52:56 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:56: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:56: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:56: 10:52:56 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:57: 10:52:57 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:57: Gateway listening on :42080
2025-07-10T22:52:57: Initializing services...
2025-07-10T22:52:57: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:57: 10:52:57 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:57: 10:52:57 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:57: IORedis client connected
2025-07-10T22:52:57: IORedis client initialized successfully
2025-07-10T22:52:57: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:57: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:57: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:57: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:57: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:57: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:57: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:57: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:57: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:57: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:57: Event publisher initialized successfully
2025-07-10T22:52:57: 10:52:57 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:57: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:57: 
2025-07-10T22:52:57: Version: viem@2.31.7
2025-07-10T22:52:57:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:57:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:57:     at async Promise.all (index 2)
2025-07-10T22:52:57:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:57:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:57:     at async Promise.all (index 0)
2025-07-10T22:52:57:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:57:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:57: 10:52:57 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:57:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:57: 
2025-07-10T22:52:57: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:57: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:57: 
2025-07-10T22:52:57: 10:52:57 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:58: 10:52:58 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:58: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:58: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:58: 10:52:58 PM INFO  database   Using database schema 'public'
2025-07-10T22:52:58: 10:52:58 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:52:58: Gateway listening on :42080
2025-07-10T22:52:58: Initializing services...
2025-07-10T22:52:58: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:52:58: 10:52:58 PM INFO  server     Started listening on port 42069
2025-07-10T22:52:58: 10:52:58 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:52:58: IORedis client connected
2025-07-10T22:52:58: IORedis client initialized successfully
2025-07-10T22:52:58: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:52:58: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:52:58: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:52:58: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:52:58: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:52:58: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:52:58: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:52:58: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:52:58: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:52:58: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:52:58: Event publisher initialized successfully
2025-07-10T22:52:58: 10:52:58 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:52:58: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:52:58: 
2025-07-10T22:52:58: Version: viem@2.31.7
2025-07-10T22:52:58:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:52:58:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:52:58:     at async Promise.all (index 2)
2025-07-10T22:52:58:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:52:58:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:52:58:     at async Promise.all (index 0)
2025-07-10T22:52:58:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:52:58:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:52:58: 10:52:58 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:52:58:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:52:58: 
2025-07-10T22:52:58: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:52:58: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:52:58: 
2025-07-10T22:52:59: 10:52:59 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:52:59: 10:52:59 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:52:59: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:52:59: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:52:59: 10:52:59 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:00: 10:53:00 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:00: Gateway listening on :42080
2025-07-10T22:53:00: Initializing services...
2025-07-10T22:53:00: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:00: 10:53:00 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:00: 10:53:00 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:00: IORedis client connected
2025-07-10T22:53:00: IORedis client initialized successfully
2025-07-10T22:53:00: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:00: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:00: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:00: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:00: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:00: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:00: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:00: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:00: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:00: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:00: Event publisher initialized successfully
2025-07-10T22:53:00: 10:53:00 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:00: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:00: 
2025-07-10T22:53:00: Version: viem@2.31.7
2025-07-10T22:53:00:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:00:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:00:     at async Promise.all (index 2)
2025-07-10T22:53:00:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:00:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:00:     at async Promise.all (index 0)
2025-07-10T22:53:00:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:00:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:00: 10:53:00 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:00:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:00: 
2025-07-10T22:53:00: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:00: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:00: 
2025-07-10T22:53:00: 10:53:00 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:01: 10:53:01 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:01: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:01: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:01: 10:53:01 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:01: 10:53:01 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:01: Gateway listening on :42080
2025-07-10T22:53:01: Initializing services...
2025-07-10T22:53:01: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:01: 10:53:01 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:01: 10:53:01 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:01: IORedis client connected
2025-07-10T22:53:01: IORedis client initialized successfully
2025-07-10T22:53:01: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:01: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:01: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:01: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:01: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:01: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:01: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:01: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:01: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:01: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:01: Event publisher initialized successfully
2025-07-10T22:53:01: 10:53:01 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:01: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:01: 
2025-07-10T22:53:01: Version: viem@2.31.7
2025-07-10T22:53:01:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:01:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:01:     at async Promise.all (index 2)
2025-07-10T22:53:01:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:01:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:01:     at async Promise.all (index 0)
2025-07-10T22:53:01:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:01:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:01: 10:53:01 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:01:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:02: 
2025-07-10T22:53:02: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:02: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:02: 
2025-07-10T22:53:02: 10:53:02 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:02: 10:53:02 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:02: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:02: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:02: 10:53:02 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:03: 10:53:03 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:03: Gateway listening on :42080
2025-07-10T22:53:03: Initializing services...
2025-07-10T22:53:03: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:03: 10:53:03 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:03: 10:53:03 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:03: IORedis client connected
2025-07-10T22:53:03: IORedis client initialized successfully
2025-07-10T22:53:03: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:03: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:03: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:03: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:03: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:03: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:03: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:03: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:03: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:03: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:03: Event publisher initialized successfully
2025-07-10T22:53:03: 10:53:03 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:03: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:03: 
2025-07-10T22:53:03: Version: viem@2.31.7
2025-07-10T22:53:03:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:03:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:03:     at async Promise.all (index 2)
2025-07-10T22:53:03:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:03:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:03:     at async Promise.all (index 0)
2025-07-10T22:53:03:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:03:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:03: 10:53:03 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:03:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:03: 
2025-07-10T22:53:03: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:03: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:03: 
2025-07-10T22:53:04: 10:53:04 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:04: 10:53:04 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:04: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:04: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:04: 10:53:04 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:04: 10:53:04 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:04: Gateway listening on :42080
2025-07-10T22:53:04: Initializing services...
2025-07-10T22:53:04: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:04: 10:53:04 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:04: 10:53:04 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:04: IORedis client connected
2025-07-10T22:53:04: IORedis client initialized successfully
2025-07-10T22:53:04: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:04: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:04: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:04: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:04: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:04: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:04: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:04: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:04: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:04: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:04: Event publisher initialized successfully
2025-07-10T22:53:04: 10:53:04 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:04: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:04: 
2025-07-10T22:53:04: Version: viem@2.31.7
2025-07-10T22:53:04:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:04:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:04:     at async Promise.all (index 2)
2025-07-10T22:53:04:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:04:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:04:     at async Promise.all (index 0)
2025-07-10T22:53:04:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:04:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:04: 10:53:04 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:04:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:05: 
2025-07-10T22:53:05: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:05: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:05: 
2025-07-10T22:53:05: 10:53:05 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:06: 10:53:06 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:06: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:06: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:06: 10:53:06 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:06: 10:53:06 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:06: Gateway listening on :42080
2025-07-10T22:53:06: Initializing services...
2025-07-10T22:53:06: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:06: 10:53:06 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:06: 10:53:06 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:06: IORedis client connected
2025-07-10T22:53:06: IORedis client initialized successfully
2025-07-10T22:53:06: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:06: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:06: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:06: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:06: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:06: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:06: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:06: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:06: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:06: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:06: Event publisher initialized successfully
2025-07-10T22:53:06: 10:53:06 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:06: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:06: 
2025-07-10T22:53:06: Version: viem@2.31.7
2025-07-10T22:53:06:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:06:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:06:     at async Promise.all (index 2)
2025-07-10T22:53:06:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:06:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:06:     at async Promise.all (index 0)
2025-07-10T22:53:06:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:06:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:06: 10:53:06 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:06:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:07: 
2025-07-10T22:53:07: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:07: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:07: 
2025-07-10T22:53:07: 10:53:07 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:07: 10:53:07 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:07: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:07: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:07: 10:53:07 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:08: 10:53:08 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:08: Gateway listening on :42080
2025-07-10T22:53:08: Initializing services...
2025-07-10T22:53:08: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:08: 10:53:08 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:08: 10:53:08 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:08: IORedis client connected
2025-07-10T22:53:08: IORedis client initialized successfully
2025-07-10T22:53:08: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:08: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:08: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:08: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:08: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:08: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:08: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:08: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:08: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:08: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:08: Event publisher initialized successfully
2025-07-10T22:53:08: 10:53:08 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:08: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:08: 
2025-07-10T22:53:08: Version: viem@2.31.7
2025-07-10T22:53:08:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:08:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:08:     at async Promise.all (index 2)
2025-07-10T22:53:08:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:08:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:08:     at async Promise.all (index 0)
2025-07-10T22:53:08:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:08:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:08: 10:53:08 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:08:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:08: 
2025-07-10T22:53:08: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:08: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:08: 
2025-07-10T22:53:09: 10:53:09 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:09: 10:53:09 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:09: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:09: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:09: 10:53:09 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:09: 10:53:09 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:09: Gateway listening on :42080
2025-07-10T22:53:09: Initializing services...
2025-07-10T22:53:09: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:09: 10:53:09 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:09: 10:53:09 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:09: IORedis client connected
2025-07-10T22:53:09: IORedis client initialized successfully
2025-07-10T22:53:09: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:09: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:09: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:09: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:09: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:09: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:09: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:09: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:09: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:09: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:09: Event publisher initialized successfully
2025-07-10T22:53:09: 10:53:09 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:09: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:09: 
2025-07-10T22:53:09: Version: viem@2.31.7
2025-07-10T22:53:09:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:09:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:09:     at async Promise.all (index 2)
2025-07-10T22:53:09:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:09:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:09:     at async Promise.all (index 0)
2025-07-10T22:53:09:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:09:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:09: 10:53:09 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:09:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:10: 
2025-07-10T22:53:10: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:10: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:10: 
2025-07-10T22:53:10: 10:53:10 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:10: 10:53:10 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:11: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:11: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:11: 10:53:11 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:11: 10:53:11 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:11: Gateway listening on :42080
2025-07-10T22:53:11: Initializing services...
2025-07-10T22:53:11: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:11: 10:53:11 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:11: 10:53:11 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:11: IORedis client connected
2025-07-10T22:53:11: IORedis client initialized successfully
2025-07-10T22:53:11: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:11: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:11: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:11: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:11: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:11: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:11: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:11: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:11: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:11: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:11: Event publisher initialized successfully
2025-07-10T22:53:11: 10:53:11 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:11: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:11: 
2025-07-10T22:53:11: Version: viem@2.31.7
2025-07-10T22:53:11:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:11:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:11:     at async Promise.all (index 2)
2025-07-10T22:53:11:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:11:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:11:     at async Promise.all (index 0)
2025-07-10T22:53:11:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:11:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:11: 10:53:11 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:11:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:11: 
2025-07-10T22:53:11: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:11: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:11: 
2025-07-10T22:53:12: 10:53:12 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:12: 10:53:12 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:13: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:13: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:13: 10:53:13 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:13: 10:53:13 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:13: Gateway listening on :42080
2025-07-10T22:53:13: Initializing services...
2025-07-10T22:53:13: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:13: 10:53:13 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:13: 10:53:13 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:13: IORedis client connected
2025-07-10T22:53:13: IORedis client initialized successfully
2025-07-10T22:53:13: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:13: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:13: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:13: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:13: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:13: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:13: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:13: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:13: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:13: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:13: Event publisher initialized successfully
2025-07-10T22:53:13: 10:53:13 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:13: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:13: 
2025-07-10T22:53:13: Version: viem@2.31.7
2025-07-10T22:53:13:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:13:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:13:     at async Promise.all (index 2)
2025-07-10T22:53:13:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:13:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:13:     at async Promise.all (index 0)
2025-07-10T22:53:13:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:13:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:13: 10:53:13 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:13:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:13: 
2025-07-10T22:53:13: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:13: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:13: 
2025-07-10T22:53:14: 10:53:14 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:14: 10:53:14 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:14: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:14: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:14: 10:53:14 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:15: 10:53:15 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:15: Gateway listening on :42080
2025-07-10T22:53:15: Initializing services...
2025-07-10T22:53:15: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:15: 10:53:15 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:15: 10:53:15 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:15: IORedis client connected
2025-07-10T22:53:15: IORedis client initialized successfully
2025-07-10T22:53:15: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:15: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:15: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:15: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:15: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:15: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:15: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:15: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:15: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:15: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:15: Event publisher initialized successfully
2025-07-10T22:53:15: 10:53:15 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:15: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:15: 
2025-07-10T22:53:15: Version: viem@2.31.7
2025-07-10T22:53:15:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:15:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:15:     at async Promise.all (index 2)
2025-07-10T22:53:15:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:15:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:15:     at async Promise.all (index 0)
2025-07-10T22:53:15:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:15:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:15: 10:53:15 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:15:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:15: 
2025-07-10T22:53:15: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:15: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:15: 
2025-07-10T22:53:16: 10:53:16 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:16: 10:53:16 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:16: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:16: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:16: 10:53:16 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:16: 10:53:16 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:16: Gateway listening on :42080
2025-07-10T22:53:16: Initializing services...
2025-07-10T22:53:16: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:16: 10:53:16 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:16: 10:53:16 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:16: IORedis client connected
2025-07-10T22:53:16: IORedis client initialized successfully
2025-07-10T22:53:16: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:16: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:16: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:16: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:16: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:16: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:16: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:16: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:16: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:16: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:16: Event publisher initialized successfully
2025-07-10T22:53:17: 10:53:17 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:17: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:17: 
2025-07-10T22:53:17: Version: viem@2.31.7
2025-07-10T22:53:17:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:17:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:17:     at async Promise.all (index 2)
2025-07-10T22:53:17:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:17:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:17:     at async Promise.all (index 0)
2025-07-10T22:53:17:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:17:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:17: 10:53:17 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:17:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:17: 
2025-07-10T22:53:17: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:17: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:17: 
2025-07-10T22:53:17: 10:53:17 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:18: 10:53:18 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:18: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:18: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:18: 10:53:18 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:18: 10:53:18 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:18: Gateway listening on :42080
2025-07-10T22:53:18: Initializing services...
2025-07-10T22:53:18: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:18: 10:53:18 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:18: 10:53:18 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:18: IORedis client connected
2025-07-10T22:53:18: IORedis client initialized successfully
2025-07-10T22:53:18: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:18: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:18: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:18: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:18: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:18: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:18: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:18: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:18: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:18: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:18: Event publisher initialized successfully
2025-07-10T22:53:18: 10:53:18 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:18: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:18: 
2025-07-10T22:53:18: Version: viem@2.31.7
2025-07-10T22:53:18:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:18:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:18:     at async Promise.all (index 2)
2025-07-10T22:53:18:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:18:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:18:     at async Promise.all (index 0)
2025-07-10T22:53:18:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:18:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:18: 10:53:18 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:18:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:19: 
2025-07-10T22:53:19: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:19: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:19: 
2025-07-10T22:53:19: 10:53:19 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:20: 10:53:20 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:20: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:20: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:20: 10:53:20 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:20: 10:53:20 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:20: Gateway listening on :42080
2025-07-10T22:53:20: Initializing services...
2025-07-10T22:53:20: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:20: 10:53:20 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:20: 10:53:20 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:20: IORedis client connected
2025-07-10T22:53:20: IORedis client initialized successfully
2025-07-10T22:53:20: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:20: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:20: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:20: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:20: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:20: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:20: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:20: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:20: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:20: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:20: Event publisher initialized successfully
2025-07-10T22:53:20: 10:53:20 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:20: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:20: 
2025-07-10T22:53:20: Version: viem@2.31.7
2025-07-10T22:53:20:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:20:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:20:     at async Promise.all (index 2)
2025-07-10T22:53:20:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:20:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:20:     at async Promise.all (index 0)
2025-07-10T22:53:20:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:20:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:20: 10:53:20 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:20:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:20: 
2025-07-10T22:53:20: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:20: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:20: 
2025-07-10T22:53:21: 10:53:21 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:21: 10:53:21 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:22: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:22: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:22: 10:53:22 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:22: 10:53:22 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:22: Gateway listening on :42080
2025-07-10T22:53:22: Initializing services...
2025-07-10T22:53:22: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:22: 10:53:22 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:22: 10:53:22 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:22: IORedis client connected
2025-07-10T22:53:22: IORedis client initialized successfully
2025-07-10T22:53:22: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:22: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:22: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:22: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:22: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:22: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:22: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:22: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:22: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:22: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:22: Event publisher initialized successfully
2025-07-10T22:53:22: 10:53:22 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:22: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:22: 
2025-07-10T22:53:22: Version: viem@2.31.7
2025-07-10T22:53:22:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:22:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:22:     at async Promise.all (index 2)
2025-07-10T22:53:22:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:22:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:22:     at async Promise.all (index 0)
2025-07-10T22:53:22:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:22:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:22: 10:53:22 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:22:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:22: 
2025-07-10T22:53:22: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:22: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:22: 
2025-07-10T22:53:23: 10:53:23 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:23: 10:53:23 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:23: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:23: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:23: 10:53:23 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:24: 10:53:24 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:24: Gateway listening on :42080
2025-07-10T22:53:24: Initializing services...
2025-07-10T22:53:24: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:24: 10:53:24 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:24: 10:53:24 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:24: IORedis client connected
2025-07-10T22:53:24: IORedis client initialized successfully
2025-07-10T22:53:24: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:24: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:24: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:24: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:24: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:24: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:24: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:24: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:24: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:24: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:24: Event publisher initialized successfully
2025-07-10T22:53:24: 10:53:24 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:24: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:24: 
2025-07-10T22:53:24: Version: viem@2.31.7
2025-07-10T22:53:24:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:24:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:24:     at async Promise.all (index 2)
2025-07-10T22:53:24:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:24:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:24:     at async Promise.all (index 0)
2025-07-10T22:53:24:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:24:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:24: 10:53:24 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:24:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:24: 
2025-07-10T22:53:24: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:24: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:24: 
2025-07-10T22:53:24: 10:53:24 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:25: 10:53:25 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:25: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:25: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:25: 10:53:25 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:25: 10:53:25 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:25: Gateway listening on :42080
2025-07-10T22:53:25: Initializing services...
2025-07-10T22:53:25: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:25: 10:53:25 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:25: 10:53:25 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:25: IORedis client connected
2025-07-10T22:53:25: IORedis client initialized successfully
2025-07-10T22:53:25: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:25: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:25: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:25: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:25: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:25: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:25: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:25: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:25: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:25: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:25: Event publisher initialized successfully
2025-07-10T22:53:25: 10:53:25 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:25: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:25: 
2025-07-10T22:53:25: Version: viem@2.31.7
2025-07-10T22:53:25:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:25:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:25:     at async Promise.all (index 2)
2025-07-10T22:53:25:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:25:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:25:     at async Promise.all (index 0)
2025-07-10T22:53:25:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:25:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:25: 10:53:25 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:25:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:26: 
2025-07-10T22:53:26: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:26: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:26: 
2025-07-10T22:53:26: 10:53:26 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:26: 10:53:26 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:27: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:27: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:27: 10:53:27 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:27: 10:53:27 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:27: Gateway listening on :42080
2025-07-10T22:53:27: Initializing services...
2025-07-10T22:53:27: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:27: 10:53:27 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:27: 10:53:27 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:27: IORedis client connected
2025-07-10T22:53:27: IORedis client initialized successfully
2025-07-10T22:53:27: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:27: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:27: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:27: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:27: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:27: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:27: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:27: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:27: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:27: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:27: Event publisher initialized successfully
2025-07-10T22:53:27: 10:53:27 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:27: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:27: 
2025-07-10T22:53:27: Version: viem@2.31.7
2025-07-10T22:53:27:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:27:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:27:     at async Promise.all (index 2)
2025-07-10T22:53:27:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:27:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:27:     at async Promise.all (index 0)
2025-07-10T22:53:27:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:27:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:27: 10:53:27 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:27:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:27: 
2025-07-10T22:53:27: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:27: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:27: 
2025-07-10T22:53:28: 10:53:28 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:28: 10:53:28 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:28: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:28: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:28: 10:53:28 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:29: 10:53:29 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:29: Gateway listening on :42080
2025-07-10T22:53:29: Initializing services...
2025-07-10T22:53:29: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:29: 10:53:29 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:29: 10:53:29 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:29: IORedis client connected
2025-07-10T22:53:29: IORedis client initialized successfully
2025-07-10T22:53:29: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:29: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:29: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:29: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:29: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:29: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:29: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:29: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:29: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:29: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:29: Event publisher initialized successfully
2025-07-10T22:53:29: 10:53:29 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:29: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:29: 
2025-07-10T22:53:29: Version: viem@2.31.7
2025-07-10T22:53:29:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:29:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:29:     at async Promise.all (index 2)
2025-07-10T22:53:29:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:29:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:29:     at async Promise.all (index 0)
2025-07-10T22:53:29:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:29:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:29: 10:53:29 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:29:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:29: 
2025-07-10T22:53:29: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:29: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:29: 
2025-07-10T22:53:29: 10:53:29 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:30: 10:53:30 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:30: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:30: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:30: 10:53:30 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:30: 10:53:30 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:30: Gateway listening on :42080
2025-07-10T22:53:30: Initializing services...
2025-07-10T22:53:30: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:30: 10:53:30 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:30: 10:53:30 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:30: IORedis client connected
2025-07-10T22:53:30: IORedis client initialized successfully
2025-07-10T22:53:30: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:30: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:30: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:30: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:30: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:30: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:30: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:30: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:30: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:30: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:30: Event publisher initialized successfully
2025-07-10T22:53:31: 10:53:31 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:31: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:31: 
2025-07-10T22:53:31: Version: viem@2.31.7
2025-07-10T22:53:31:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:31:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:31:     at async Promise.all (index 2)
2025-07-10T22:53:31:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:31:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:31:     at async Promise.all (index 0)
2025-07-10T22:53:31:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:31:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:31: 10:53:31 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:31:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:31: 
2025-07-10T22:53:31: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:31: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:31: 
2025-07-10T22:53:31: 10:53:31 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:32: 10:53:32 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:32: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:32: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:32: 10:53:32 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:32: 10:53:32 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:32: Gateway listening on :42080
2025-07-10T22:53:32: Initializing services...
2025-07-10T22:53:32: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:32: 10:53:32 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:32: 10:53:32 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:32: IORedis client connected
2025-07-10T22:53:32: IORedis client initialized successfully
2025-07-10T22:53:32: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:32: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:32: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:32: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:32: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:32: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:32: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:32: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:32: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:32: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:32: Event publisher initialized successfully
2025-07-10T22:53:32: 10:53:32 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:32: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:32: 
2025-07-10T22:53:32: Version: viem@2.31.7
2025-07-10T22:53:32:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:32:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:32:     at async Promise.all (index 2)
2025-07-10T22:53:32:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:32:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:32:     at async Promise.all (index 0)
2025-07-10T22:53:32:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:32:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:32: 10:53:32 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:32:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:32: 
2025-07-10T22:53:32: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:32: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:32: 
2025-07-10T22:53:33: 10:53:33 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:33: 10:53:33 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:33: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:33: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:33: 10:53:33 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:34: 10:53:34 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:34: Gateway listening on :42080
2025-07-10T22:53:34: Initializing services...
2025-07-10T22:53:34: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:34: 10:53:34 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:34: 10:53:34 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:34: IORedis client connected
2025-07-10T22:53:34: IORedis client initialized successfully
2025-07-10T22:53:34: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:34: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:34: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:34: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:34: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:34: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:34: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:34: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:34: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:34: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:34: Event publisher initialized successfully
2025-07-10T22:53:34: 10:53:34 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:34: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:34: 
2025-07-10T22:53:34: Version: viem@2.31.7
2025-07-10T22:53:34:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:34:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:34:     at async Promise.all (index 2)
2025-07-10T22:53:34:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:34:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:34:     at async Promise.all (index 0)
2025-07-10T22:53:34:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:34:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:34: 10:53:34 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:34:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:34: 
2025-07-10T22:53:34: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:34: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:34: 
2025-07-10T22:53:35: 10:53:35 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:35: 10:53:35 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:35: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:35: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:35: 10:53:35 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:36: 10:53:36 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:36: Gateway listening on :42080
2025-07-10T22:53:36: Initializing services...
2025-07-10T22:53:36: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:36: 10:53:36 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:36: 10:53:36 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:36: IORedis client connected
2025-07-10T22:53:36: IORedis client initialized successfully
2025-07-10T22:53:36: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:36: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:36: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:36: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:36: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:36: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:36: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:36: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:36: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:36: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:36: Event publisher initialized successfully
2025-07-10T22:53:36: 10:53:36 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:36: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:36: 
2025-07-10T22:53:36: Version: viem@2.31.7
2025-07-10T22:53:36:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:36:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:36:     at async Promise.all (index 2)
2025-07-10T22:53:36:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:36:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:36:     at async Promise.all (index 0)
2025-07-10T22:53:36:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:36:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:36: 10:53:36 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:36:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:36: 
2025-07-10T22:53:36: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:36: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:36: 
2025-07-10T22:53:36: 10:53:36 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:37: 10:53:37 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:37: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:37: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:37: 10:53:37 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:37: 10:53:37 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:37: Gateway listening on :42080
2025-07-10T22:53:37: Initializing services...
2025-07-10T22:53:37: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:37: 10:53:37 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:37: 10:53:37 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:37: IORedis client connected
2025-07-10T22:53:37: IORedis client initialized successfully
2025-07-10T22:53:37: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:37: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:37: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:37: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:37: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:37: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:37: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:37: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:37: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:37: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:37: Event publisher initialized successfully
2025-07-10T22:53:37: 10:53:37 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:37: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:37: 
2025-07-10T22:53:37: Version: viem@2.31.7
2025-07-10T22:53:37:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:37:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:37:     at async Promise.all (index 2)
2025-07-10T22:53:37:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:37:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:37:     at async Promise.all (index 0)
2025-07-10T22:53:37:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:37:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:37: 10:53:37 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:37:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:37: 
2025-07-10T22:53:37: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:37: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:37: 
2025-07-10T22:53:38: 10:53:38 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:38: 10:53:38 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:38: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:38: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:39: 10:53:39 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:39: 10:53:39 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:39: Gateway listening on :42080
2025-07-10T22:53:39: Initializing services...
2025-07-10T22:53:39: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:39: 10:53:39 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:39: 10:53:39 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:39: IORedis client connected
2025-07-10T22:53:39: IORedis client initialized successfully
2025-07-10T22:53:39: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:39: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:39: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:39: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:39: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:39: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:39: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:39: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:39: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:39: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:39: Event publisher initialized successfully
2025-07-10T22:53:39: 10:53:39 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:39: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:39: 
2025-07-10T22:53:39: Version: viem@2.31.7
2025-07-10T22:53:39:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:39:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:39:     at async Promise.all (index 2)
2025-07-10T22:53:39:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:39:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:39:     at async Promise.all (index 0)
2025-07-10T22:53:39:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:39:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:39: 10:53:39 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:39:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:39: 
2025-07-10T22:53:39: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:39: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:39: 
2025-07-10T22:53:40: 10:53:40 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:40: 10:53:40 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:40: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:40: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:40: 10:53:40 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:41: 10:53:41 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:41: Gateway listening on :42080
2025-07-10T22:53:41: Initializing services...
2025-07-10T22:53:41: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:41: 10:53:41 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:41: 10:53:41 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:41: IORedis client connected
2025-07-10T22:53:41: IORedis client initialized successfully
2025-07-10T22:53:41: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:41: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:41: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:41: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:41: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:41: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:41: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:41: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:41: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:41: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:41: Event publisher initialized successfully
2025-07-10T22:53:41: 10:53:41 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:41: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:41: 
2025-07-10T22:53:41: Version: viem@2.31.7
2025-07-10T22:53:41:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:41:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:41:     at async Promise.all (index 2)
2025-07-10T22:53:41:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:41:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:41:     at async Promise.all (index 0)
2025-07-10T22:53:41:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:41:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:41: 10:53:41 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:41:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:41: 
2025-07-10T22:53:41: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:41: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:41: 
2025-07-10T22:53:41: 10:53:41 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:42: 10:53:42 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:42: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:42: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:42: 10:53:42 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:42: 10:53:42 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:42: Gateway listening on :42080
2025-07-10T22:53:42: Initializing services...
2025-07-10T22:53:42: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:42: 10:53:42 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:42: 10:53:42 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:42: IORedis client connected
2025-07-10T22:53:42: IORedis client initialized successfully
2025-07-10T22:53:42: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:42: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:42: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:42: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:42: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:42: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:42: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:42: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:42: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:42: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:42: Event publisher initialized successfully
2025-07-10T22:53:42: 10:53:42 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:42: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:42: 
2025-07-10T22:53:42: Version: viem@2.31.7
2025-07-10T22:53:42:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:42:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:42:     at async Promise.all (index 2)
2025-07-10T22:53:42:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:42:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:42:     at async Promise.all (index 0)
2025-07-10T22:53:42:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:42:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:42: 10:53:42 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:42:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:43: 
2025-07-10T22:53:43: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:43: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:43: 
2025-07-10T22:53:43: 10:53:43 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:43: 10:53:43 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:44: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:44: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:44: 10:53:44 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:44: 10:53:44 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:44: Gateway listening on :42080
2025-07-10T22:53:44: Initializing services...
2025-07-10T22:53:44: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:44: 10:53:44 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:44: 10:53:44 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:44: IORedis client connected
2025-07-10T22:53:44: IORedis client initialized successfully
2025-07-10T22:53:44: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:44: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:44: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:44: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:44: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:44: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:44: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:44: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:44: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:44: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:44: Event publisher initialized successfully
2025-07-10T22:53:44: 10:53:44 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:44: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:44: 
2025-07-10T22:53:44: Version: viem@2.31.7
2025-07-10T22:53:44:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:44:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:44:     at async Promise.all (index 2)
2025-07-10T22:53:44:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:44:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:44:     at async Promise.all (index 0)
2025-07-10T22:53:44:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:44:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:44: 10:53:44 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:44:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:44: 
2025-07-10T22:53:44: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:44: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:44: 
2025-07-10T22:53:45: 10:53:45 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:45: 10:53:45 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:45: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:45: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:46: 10:53:46 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:46: 10:53:46 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:46: Gateway listening on :42080
2025-07-10T22:53:46: Initializing services...
2025-07-10T22:53:46: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:46: 10:53:46 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:46: 10:53:46 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:46: IORedis client connected
2025-07-10T22:53:46: IORedis client initialized successfully
2025-07-10T22:53:46: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:46: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:46: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:46: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:46: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:46: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:46: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:46: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:46: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:46: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:46: Event publisher initialized successfully
2025-07-10T22:53:46: 10:53:46 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:46: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:46: 
2025-07-10T22:53:46: Version: viem@2.31.7
2025-07-10T22:53:46:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:46:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:46:     at async Promise.all (index 2)
2025-07-10T22:53:46:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:46:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:46:     at async Promise.all (index 0)
2025-07-10T22:53:46:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:46:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:46: 10:53:46 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:46:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:46: 
2025-07-10T22:53:46: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:46: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:46: 
2025-07-10T22:53:47: 10:53:47 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:47: 10:53:47 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:47: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:47: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:47: 10:53:47 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:47: 10:53:47 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:47: Gateway listening on :42080
2025-07-10T22:53:47: Initializing services...
2025-07-10T22:53:48: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:48: 10:53:48 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:48: 10:53:48 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:48: IORedis client connected
2025-07-10T22:53:48: IORedis client initialized successfully
2025-07-10T22:53:48: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:48: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:48: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:48: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:48: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:48: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:48: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:48: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:48: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:48: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:48: Event publisher initialized successfully
2025-07-10T22:53:48: 10:53:48 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:48: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:48: 
2025-07-10T22:53:48: Version: viem@2.31.7
2025-07-10T22:53:48:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:48:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:48:     at async Promise.all (index 2)
2025-07-10T22:53:48:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:48:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:48:     at async Promise.all (index 0)
2025-07-10T22:53:48:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:48:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:48: 10:53:48 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:48:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:48: 
2025-07-10T22:53:48: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:48: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:48: 
2025-07-10T22:53:48: 10:53:48 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:49: 10:53:49 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:49: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:49: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:49: 10:53:49 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:49: 10:53:49 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:50: Gateway listening on :42080
2025-07-10T22:53:50: Initializing services...
2025-07-10T22:53:50: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:50: 10:53:50 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:50: 10:53:50 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:50: IORedis client connected
2025-07-10T22:53:50: IORedis client initialized successfully
2025-07-10T22:53:50: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:50: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:50: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:50: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:50: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:50: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:50: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:50: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:50: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:50: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:50: Event publisher initialized successfully
2025-07-10T22:53:50: 10:53:50 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:50: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:50: 
2025-07-10T22:53:50: Version: viem@2.31.7
2025-07-10T22:53:50:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:50:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:50:     at async Promise.all (index 2)
2025-07-10T22:53:50:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:50:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:50:     at async Promise.all (index 0)
2025-07-10T22:53:50:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:50:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:50: 10:53:50 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:50:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:50: 
2025-07-10T22:53:50: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:50: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:50: 
2025-07-10T22:53:50: 10:53:50 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:51: 10:53:51 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:51: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:51: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:51: 10:53:51 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:51: 10:53:51 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:51: Gateway listening on :42080
2025-07-10T22:53:51: Initializing services...
2025-07-10T22:53:51: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:51: 10:53:51 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:51: 10:53:51 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:51: IORedis client connected
2025-07-10T22:53:51: IORedis client initialized successfully
2025-07-10T22:53:51: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:51: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:51: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:51: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:51: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:51: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:51: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:51: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:51: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:51: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:51: Event publisher initialized successfully
2025-07-10T22:53:51: 10:53:51 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:51: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:51: 
2025-07-10T22:53:51: Version: viem@2.31.7
2025-07-10T22:53:51:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:51:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:51:     at async Promise.all (index 2)
2025-07-10T22:53:51:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:51:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:51:     at async Promise.all (index 0)
2025-07-10T22:53:51:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:51:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:51: 10:53:51 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:51:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:52: 
2025-07-10T22:53:52: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:52: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:52: 
2025-07-10T22:53:52: 10:53:52 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:53: 10:53:53 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:53: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:53: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:53: 10:53:53 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:53: 10:53:53 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:53: Gateway listening on :42080
2025-07-10T22:53:53: Initializing services...
2025-07-10T22:53:53: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:53: 10:53:53 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:53: 10:53:53 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:53: IORedis client connected
2025-07-10T22:53:53: IORedis client initialized successfully
2025-07-10T22:53:53: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:53: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:53: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:53: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:53: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:53: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:53: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:53: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:53: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:53: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:53: Event publisher initialized successfully
2025-07-10T22:53:54: 10:53:54 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:54: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:54: 
2025-07-10T22:53:54: Version: viem@2.31.7
2025-07-10T22:53:54:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:54:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:54:     at async Promise.all (index 2)
2025-07-10T22:53:54:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:54:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:54:     at async Promise.all (index 0)
2025-07-10T22:53:54:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:54:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:54: 10:53:54 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:54:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:54: 
2025-07-10T22:53:54: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:54: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:54: 
2025-07-10T22:53:54: 10:53:54 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:55: 10:53:55 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:55: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:55: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:55: 10:53:55 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:55: 10:53:55 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:55: Gateway listening on :42080
2025-07-10T22:53:55: Initializing services...
2025-07-10T22:53:55: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:55: 10:53:55 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:55: 10:53:55 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:55: IORedis client connected
2025-07-10T22:53:55: IORedis client initialized successfully
2025-07-10T22:53:55: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:55: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:55: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:55: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:55: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:55: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:55: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:55: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:55: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:55: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:55: Event publisher initialized successfully
2025-07-10T22:53:55: 10:53:55 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:55: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:55: 
2025-07-10T22:53:55: Version: viem@2.31.7
2025-07-10T22:53:55:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:55:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:55:     at async Promise.all (index 2)
2025-07-10T22:53:55:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:55:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:55:     at async Promise.all (index 0)
2025-07-10T22:53:55:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:55:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:55: 10:53:55 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:55:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:56: 
2025-07-10T22:53:56: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:56: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:56: 
2025-07-10T22:53:56: 10:53:56 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:56: 10:53:56 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:56: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:56: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:56: 10:53:56 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:57: 10:53:57 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:57: Gateway listening on :42080
2025-07-10T22:53:57: Initializing services...
2025-07-10T22:53:57: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:57: 10:53:57 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:57: 10:53:57 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:57: IORedis client connected
2025-07-10T22:53:57: IORedis client initialized successfully
2025-07-10T22:53:57: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:57: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:57: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:57: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:57: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:57: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:57: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:57: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:57: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:57: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:57: Event publisher initialized successfully
2025-07-10T22:53:57: 10:53:57 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:57: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:57: 
2025-07-10T22:53:57: Version: viem@2.31.7
2025-07-10T22:53:57:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:57:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:57:     at async Promise.all (index 2)
2025-07-10T22:53:57:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:57:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:57:     at async Promise.all (index 0)
2025-07-10T22:53:57:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:57:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:57: 10:53:57 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:57:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:57: 
2025-07-10T22:53:57: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:57: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:57: 
2025-07-10T22:53:57: 10:53:57 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:58: 10:53:58 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:58: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:58: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:58: 10:53:58 PM INFO  database   Using database schema 'public'
2025-07-10T22:53:58: 10:53:58 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:53:58: Gateway listening on :42080
2025-07-10T22:53:58: Initializing services...
2025-07-10T22:53:58: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:53:58: 10:53:58 PM INFO  server     Started listening on port 42069
2025-07-10T22:53:58: 10:53:58 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:53:58: IORedis client connected
2025-07-10T22:53:58: IORedis client initialized successfully
2025-07-10T22:53:58: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:53:58: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:53:58: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:53:58: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:53:58: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:53:58: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:53:58: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:53:58: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:53:58: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:53:58: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:53:58: Event publisher initialized successfully
2025-07-10T22:53:58: 10:53:58 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:53:58: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:53:58: 
2025-07-10T22:53:58: Version: viem@2.31.7
2025-07-10T22:53:58:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:53:58:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:53:58:     at async Promise.all (index 2)
2025-07-10T22:53:58:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:53:58:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:53:58:     at async Promise.all (index 0)
2025-07-10T22:53:58:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:53:58:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:53:58: 10:53:58 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:53:58:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:53:59: 
2025-07-10T22:53:59: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:53:59: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:53:59: 
2025-07-10T22:53:59: 10:53:59 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:53:59: 10:53:59 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:53:59: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:53:59: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:53:59: 10:53:59 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:00: 10:54:00 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:00: Gateway listening on :42080
2025-07-10T22:54:00: Initializing services...
2025-07-10T22:54:00: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:00: 10:54:00 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:00: 10:54:00 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:00: IORedis client connected
2025-07-10T22:54:00: IORedis client initialized successfully
2025-07-10T22:54:00: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:00: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:00: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:00: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:00: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:00: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:00: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:00: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:00: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:00: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:00: Event publisher initialized successfully
2025-07-10T22:54:00: 10:54:00 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:00: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:00: 
2025-07-10T22:54:00: Version: viem@2.31.7
2025-07-10T22:54:00:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:00:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:00:     at async Promise.all (index 2)
2025-07-10T22:54:00:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:00:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:00:     at async Promise.all (index 0)
2025-07-10T22:54:00:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:00:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:00: 10:54:00 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:00:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:00: 
2025-07-10T22:54:00: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:00: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:00: 
2025-07-10T22:54:01: 10:54:01 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:01: 10:54:01 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:01: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:01: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:01: 10:54:01 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:01: 10:54:01 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:01: Gateway listening on :42080
2025-07-10T22:54:01: Initializing services...
2025-07-10T22:54:01: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:01: 10:54:01 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:01: 10:54:01 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:01: IORedis client connected
2025-07-10T22:54:01: IORedis client initialized successfully
2025-07-10T22:54:01: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:01: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:01: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:01: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:01: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:01: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:01: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:01: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:01: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:01: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:01: Event publisher initialized successfully
2025-07-10T22:54:01: 10:54:01 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:01: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:01: 
2025-07-10T22:54:01: Version: viem@2.31.7
2025-07-10T22:54:01:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:01:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:01:     at async Promise.all (index 2)
2025-07-10T22:54:01:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:01:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:01:     at async Promise.all (index 0)
2025-07-10T22:54:01:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:01:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:01: 10:54:01 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:01:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:02: 
2025-07-10T22:54:02: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:02: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:02: 
2025-07-10T22:54:02: 10:54:02 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:02: 10:54:02 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:02: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:02: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:03: 10:54:03 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:03: 10:54:03 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:03: Gateway listening on :42080
2025-07-10T22:54:03: Initializing services...
2025-07-10T22:54:03: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:03: 10:54:03 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:03: 10:54:03 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:03: IORedis client connected
2025-07-10T22:54:03: IORedis client initialized successfully
2025-07-10T22:54:03: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:03: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:03: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:03: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:03: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:03: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:03: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:03: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:03: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:03: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:03: Event publisher initialized successfully
2025-07-10T22:54:03: 10:54:03 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:03: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:03: 
2025-07-10T22:54:03: Version: viem@2.31.7
2025-07-10T22:54:03:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:03:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:03:     at async Promise.all (index 2)
2025-07-10T22:54:03:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:03:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:03:     at async Promise.all (index 0)
2025-07-10T22:54:03:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:03:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:03: 10:54:03 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:03:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:03: 
2025-07-10T22:54:03: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:03: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:03: 
2025-07-10T22:54:04: 10:54:04 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:04: 10:54:04 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:04: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:04: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:04: 10:54:04 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:04: 10:54:04 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:04: Gateway listening on :42080
2025-07-10T22:54:04: Initializing services...
2025-07-10T22:54:04: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:04: 10:54:04 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:04: 10:54:04 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:04: IORedis client connected
2025-07-10T22:54:04: IORedis client initialized successfully
2025-07-10T22:54:04: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:04: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:04: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:04: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:04: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:04: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:04: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:04: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:04: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:04: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:04: Event publisher initialized successfully
2025-07-10T22:54:04: 10:54:04 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:04: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:04: 
2025-07-10T22:54:04: Version: viem@2.31.7
2025-07-10T22:54:04:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:04:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:04:     at async Promise.all (index 2)
2025-07-10T22:54:04:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:04:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:04:     at async Promise.all (index 0)
2025-07-10T22:54:04:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:04:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:04: 10:54:04 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:04:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:05: 
2025-07-10T22:54:05: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:05: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:05: 
2025-07-10T22:54:05: 10:54:05 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:05: 10:54:05 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:05: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:05: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:06: 10:54:06 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:06: 10:54:06 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:06: Gateway listening on :42080
2025-07-10T22:54:06: Initializing services...
2025-07-10T22:54:06: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:06: 10:54:06 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:06: 10:54:06 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:06: IORedis client connected
2025-07-10T22:54:06: IORedis client initialized successfully
2025-07-10T22:54:06: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:06: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:06: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:06: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:06: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:06: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:06: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:06: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:06: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:06: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:06: Event publisher initialized successfully
2025-07-10T22:54:06: 10:54:06 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:06: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:06: 
2025-07-10T22:54:06: Version: viem@2.31.7
2025-07-10T22:54:06:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:06:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:06:     at async Promise.all (index 2)
2025-07-10T22:54:06:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:06:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:06:     at async Promise.all (index 0)
2025-07-10T22:54:06:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:06:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:06: 10:54:06 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:06:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:06: 
2025-07-10T22:54:06: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:06: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:06: 
2025-07-10T22:54:07: 10:54:07 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:07: 10:54:07 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:07: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:07: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:07: 10:54:07 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:07: 10:54:07 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:07: Gateway listening on :42080
2025-07-10T22:54:07: Initializing services...
2025-07-10T22:54:07: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:07: 10:54:07 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:07: 10:54:07 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:07: IORedis client connected
2025-07-10T22:54:07: IORedis client initialized successfully
2025-07-10T22:54:07: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:07: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:07: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:07: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:07: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:07: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:07: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:07: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:07: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:07: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:07: Event publisher initialized successfully
2025-07-10T22:54:07: 10:54:07 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:07: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:07: 
2025-07-10T22:54:07: Version: viem@2.31.7
2025-07-10T22:54:07:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:07:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:07:     at async Promise.all (index 2)
2025-07-10T22:54:07:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:07:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:07:     at async Promise.all (index 0)
2025-07-10T22:54:07:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:07:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:07: 10:54:07 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:07:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:08: 
2025-07-10T22:54:08: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:08: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:08: 
2025-07-10T22:54:08: 10:54:08 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:08: 10:54:08 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:08: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:08: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:08: 10:54:08 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:09: 10:54:09 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:09: Gateway listening on :42080
2025-07-10T22:54:09: Initializing services...
2025-07-10T22:54:09: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:09: 10:54:09 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:09: 10:54:09 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:09: IORedis client connected
2025-07-10T22:54:09: IORedis client initialized successfully
2025-07-10T22:54:09: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:09: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:09: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:09: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:09: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:09: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:09: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:09: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:09: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:09: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:09: Event publisher initialized successfully
2025-07-10T22:54:09: 10:54:09 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:09: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:09: 
2025-07-10T22:54:09: Version: viem@2.31.7
2025-07-10T22:54:09:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:09:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:09:     at async Promise.all (index 2)
2025-07-10T22:54:09:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:09:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:09:     at async Promise.all (index 0)
2025-07-10T22:54:09:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:09:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:09: 10:54:09 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:09:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:09: 
2025-07-10T22:54:09: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:09: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:09: 
2025-07-10T22:54:09: 10:54:09 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:10: 10:54:10 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:10: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:10: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:10: 10:54:10 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:10: 10:54:10 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:10: Gateway listening on :42080
2025-07-10T22:54:10: Initializing services...
2025-07-10T22:54:10: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:10: 10:54:10 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:10: 10:54:10 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:10: IORedis client connected
2025-07-10T22:54:10: IORedis client initialized successfully
2025-07-10T22:54:10: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:10: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:10: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:10: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:10: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:10: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:10: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:10: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:10: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:10: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:10: Event publisher initialized successfully
2025-07-10T22:54:10: 10:54:10 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:10: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:10: 
2025-07-10T22:54:10: Version: viem@2.31.7
2025-07-10T22:54:10:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:10:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:10:     at async Promise.all (index 2)
2025-07-10T22:54:10:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:10:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:10:     at async Promise.all (index 0)
2025-07-10T22:54:10:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:10:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:10: 10:54:10 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:10:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:10: 
2025-07-10T22:54:10: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:10: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:10: 
2025-07-10T22:54:11: 10:54:11 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:11: 10:54:11 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:11: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:11: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:11: 10:54:11 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:12: 10:54:12 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:12: Gateway listening on :42080
2025-07-10T22:54:12: Initializing services...
2025-07-10T22:54:12: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:12: 10:54:12 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:12: 10:54:12 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:12: IORedis client connected
2025-07-10T22:54:12: IORedis client initialized successfully
2025-07-10T22:54:12: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:12: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:12: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:12: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:12: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:12: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:12: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:12: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:12: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:12: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:12: Event publisher initialized successfully
2025-07-10T22:54:12: 10:54:12 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:12: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:12: 
2025-07-10T22:54:12: Version: viem@2.31.7
2025-07-10T22:54:12:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:12:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:12:     at async Promise.all (index 2)
2025-07-10T22:54:12:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:12:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:12:     at async Promise.all (index 0)
2025-07-10T22:54:12:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:12:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:12: 10:54:12 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:12:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:12: 
2025-07-10T22:54:12: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:12: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:12: 
2025-07-10T22:54:12: 10:54:12 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:13: 10:54:13 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:13: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:13: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:13: 10:54:13 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:13: 10:54:13 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:13: Gateway listening on :42080
2025-07-10T22:54:13: Initializing services...
2025-07-10T22:54:13: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:13: 10:54:13 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:13: 10:54:13 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:13: IORedis client connected
2025-07-10T22:54:13: IORedis client initialized successfully
2025-07-10T22:54:13: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:13: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:13: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:13: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:13: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:13: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:13: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:13: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:13: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:13: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:13: Event publisher initialized successfully
2025-07-10T22:54:13: 10:54:13 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:13: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:13: 
2025-07-10T22:54:13: Version: viem@2.31.7
2025-07-10T22:54:13:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:13:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:13:     at async Promise.all (index 2)
2025-07-10T22:54:13:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:13:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:13:     at async Promise.all (index 0)
2025-07-10T22:54:13:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:13:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:13: 10:54:13 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:13:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:13: 
2025-07-10T22:54:13: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:13: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:13: 
2025-07-10T22:54:14: 10:54:14 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:14: 10:54:14 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:14: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:14: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:14: 10:54:14 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:14: 10:54:14 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:15: Gateway listening on :42080
2025-07-10T22:54:15: Initializing services...
2025-07-10T22:54:15: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:15: 10:54:15 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:15: 10:54:15 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:15: IORedis client connected
2025-07-10T22:54:15: IORedis client initialized successfully
2025-07-10T22:54:15: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:15: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:15: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:15: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:15: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:15: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:15: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:15: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:15: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:15: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:15: Event publisher initialized successfully
2025-07-10T22:54:15: 10:54:15 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:15: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:15: 
2025-07-10T22:54:15: Version: viem@2.31.7
2025-07-10T22:54:15:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:15:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:15:     at async Promise.all (index 2)
2025-07-10T22:54:15:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:15:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:15:     at async Promise.all (index 0)
2025-07-10T22:54:15:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:15:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:15: 10:54:15 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:15:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:15: 
2025-07-10T22:54:15: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:15: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:15: 
2025-07-10T22:54:15: 10:54:15 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:16: 10:54:16 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:16: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:16: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:16: 10:54:16 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:16: 10:54:16 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:16: Gateway listening on :42080
2025-07-10T22:54:16: Initializing services...
2025-07-10T22:54:16: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:16: 10:54:16 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:16: 10:54:16 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:16: IORedis client connected
2025-07-10T22:54:16: IORedis client initialized successfully
2025-07-10T22:54:16: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:16: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:16: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:16: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:16: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:16: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:16: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:16: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:16: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:16: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:16: Event publisher initialized successfully
2025-07-10T22:54:16: 10:54:16 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:16: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:16: 
2025-07-10T22:54:16: Version: viem@2.31.7
2025-07-10T22:54:16:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:16:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:16:     at async Promise.all (index 2)
2025-07-10T22:54:16:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:16:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:16:     at async Promise.all (index 0)
2025-07-10T22:54:16:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:16:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:16: 10:54:16 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:16:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:16: 
2025-07-10T22:54:16: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:16: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:16: 
2025-07-10T22:54:17: 10:54:17 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:17: 10:54:17 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:17: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:17: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:17: 10:54:17 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:17: 10:54:17 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:18: Gateway listening on :42080
2025-07-10T22:54:18: Initializing services...
2025-07-10T22:54:18: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:18: 10:54:18 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:18: 10:54:18 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:18: IORedis client connected
2025-07-10T22:54:18: IORedis client initialized successfully
2025-07-10T22:54:18: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:18: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:18: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:18: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:18: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:18: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:18: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:18: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:18: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:18: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:18: Event publisher initialized successfully
2025-07-10T22:54:18: 10:54:18 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:18: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:18: 
2025-07-10T22:54:18: Version: viem@2.31.7
2025-07-10T22:54:18:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:18:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:18:     at async Promise.all (index 2)
2025-07-10T22:54:18:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:18:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:18:     at async Promise.all (index 0)
2025-07-10T22:54:18:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:18:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:18: 10:54:18 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:18:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:18: 
2025-07-10T22:54:18: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:18: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:18: 
2025-07-10T22:54:18: 10:54:18 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:19: 10:54:19 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:19: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:19: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:19: 10:54:19 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:19: 10:54:19 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:19: Gateway listening on :42080
2025-07-10T22:54:19: Initializing services...
2025-07-10T22:54:19: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:19: 10:54:19 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:19: 10:54:19 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:19: IORedis client connected
2025-07-10T22:54:19: IORedis client initialized successfully
2025-07-10T22:54:19: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:19: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:19: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:19: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:19: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:19: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:19: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:19: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:19: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:19: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:19: Event publisher initialized successfully
2025-07-10T22:54:19: 10:54:19 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:19: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:19: 
2025-07-10T22:54:19: Version: viem@2.31.7
2025-07-10T22:54:19:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:19:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:19:     at async Promise.all (index 2)
2025-07-10T22:54:19:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:19:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:19:     at async Promise.all (index 0)
2025-07-10T22:54:19:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:19:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:19: 10:54:19 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:19:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:19: 
2025-07-10T22:54:19: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:19: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:19: 
2025-07-10T22:54:20: 10:54:20 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:20: 10:54:20 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:20: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:20: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:20: 10:54:20 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:21: 10:54:21 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:21: Gateway listening on :42080
2025-07-10T22:54:21: Initializing services...
2025-07-10T22:54:21: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:21: 10:54:21 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:21: 10:54:21 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:21: IORedis client connected
2025-07-10T22:54:21: IORedis client initialized successfully
2025-07-10T22:54:21: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:21: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:21: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:21: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:21: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:21: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:21: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:21: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:21: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:21: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:21: Event publisher initialized successfully
2025-07-10T22:54:21: 10:54:21 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:21: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:21: 
2025-07-10T22:54:21: Version: viem@2.31.7
2025-07-10T22:54:21:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:21:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:21:     at async Promise.all (index 2)
2025-07-10T22:54:21:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:21:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:21:     at async Promise.all (index 0)
2025-07-10T22:54:21:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:21:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:21: 10:54:21 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:21:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:21: 
2025-07-10T22:54:21: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:21: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:21: 
2025-07-10T22:54:21: 10:54:21 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:22: 10:54:22 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:22: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:22: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:22: 10:54:22 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:22: 10:54:22 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:22: Gateway listening on :42080
2025-07-10T22:54:22: Initializing services...
2025-07-10T22:54:22: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:22: 10:54:22 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:22: 10:54:22 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:22: IORedis client connected
2025-07-10T22:54:22: IORedis client initialized successfully
2025-07-10T22:54:22: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:22: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:22: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:22: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:22: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:22: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:22: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:22: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:22: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:22: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:22: Event publisher initialized successfully
2025-07-10T22:54:22: 10:54:22 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:22: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:22: 
2025-07-10T22:54:22: Version: viem@2.31.7
2025-07-10T22:54:22:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:22:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:22:     at async Promise.all (index 2)
2025-07-10T22:54:22:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:22:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:22:     at async Promise.all (index 0)
2025-07-10T22:54:22:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:22:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:22: 10:54:22 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:22:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:22: 
2025-07-10T22:54:22: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:22: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:22: 
2025-07-10T22:54:23: 10:54:23 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:23: 10:54:23 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:23: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:23: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:23: 10:54:23 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:23: 10:54:23 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:24: Gateway listening on :42080
2025-07-10T22:54:24: Initializing services...
2025-07-10T22:54:24: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:24: 10:54:24 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:24: 10:54:24 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:24: IORedis client connected
2025-07-10T22:54:24: IORedis client initialized successfully
2025-07-10T22:54:24: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:24: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:24: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:24: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:24: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:24: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:24: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:24: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:24: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:24: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:24: Event publisher initialized successfully
2025-07-10T22:54:24: 10:54:24 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:24: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:24: 
2025-07-10T22:54:24: Version: viem@2.31.7
2025-07-10T22:54:24:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:24:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:24:     at async Promise.all (index 2)
2025-07-10T22:54:24:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:24:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:24:     at async Promise.all (index 0)
2025-07-10T22:54:24:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:24:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:24: 10:54:24 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:24:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:24: 
2025-07-10T22:54:24: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:24: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:24: 
2025-07-10T22:54:24: 10:54:24 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:25: 10:54:25 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:25: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:25: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:25: 10:54:25 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:25: 10:54:25 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:25: Gateway listening on :42080
2025-07-10T22:54:25: Initializing services...
2025-07-10T22:54:25: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:25: 10:54:25 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:25: 10:54:25 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:25: IORedis client connected
2025-07-10T22:54:25: IORedis client initialized successfully
2025-07-10T22:54:25: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:25: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:25: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:25: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:25: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:25: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:25: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:25: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:25: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:25: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:25: Event publisher initialized successfully
2025-07-10T22:54:25: 10:54:25 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:25: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:25: 
2025-07-10T22:54:25: Version: viem@2.31.7
2025-07-10T22:54:25:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:25:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:25:     at async Promise.all (index 2)
2025-07-10T22:54:25:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:25:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:25:     at async Promise.all (index 0)
2025-07-10T22:54:25:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:25:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:25: 10:54:25 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:25:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:25: 
2025-07-10T22:54:25: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:25: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:25: 
2025-07-10T22:54:26: 10:54:26 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:26: 10:54:26 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:26: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:26: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:26: 10:54:26 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:27: 10:54:27 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:27: Gateway listening on :42080
2025-07-10T22:54:27: Initializing services...
2025-07-10T22:54:27: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:27: 10:54:27 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:27: 10:54:27 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:27: IORedis client connected
2025-07-10T22:54:27: IORedis client initialized successfully
2025-07-10T22:54:27: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:27: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:27: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:27: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:27: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:27: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:27: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:27: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:27: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:27: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:27: Event publisher initialized successfully
2025-07-10T22:54:27: 10:54:27 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:27: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:27: 
2025-07-10T22:54:27: Version: viem@2.31.7
2025-07-10T22:54:27:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:27:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:27:     at async Promise.all (index 2)
2025-07-10T22:54:27:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:27:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:27:     at async Promise.all (index 0)
2025-07-10T22:54:27:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:27:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:27: 10:54:27 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:27:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:27: 
2025-07-10T22:54:27: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:27: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:27: 
2025-07-10T22:54:27: 10:54:27 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:28: 10:54:28 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:28: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:28: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:28: 10:54:28 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:28: 10:54:28 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:28: Gateway listening on :42080
2025-07-10T22:54:28: Initializing services...
2025-07-10T22:54:28: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:28: 10:54:28 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:28: 10:54:28 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:28: IORedis client connected
2025-07-10T22:54:28: IORedis client initialized successfully
2025-07-10T22:54:28: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:28: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:28: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:28: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:28: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:28: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:28: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:28: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:28: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:28: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:28: Event publisher initialized successfully
2025-07-10T22:54:28: 10:54:28 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:28: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:28: 
2025-07-10T22:54:28: Version: viem@2.31.7
2025-07-10T22:54:28:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:28:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:28:     at async Promise.all (index 2)
2025-07-10T22:54:28:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:28:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:28:     at async Promise.all (index 0)
2025-07-10T22:54:28:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:28:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:28: 10:54:28 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:28:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:28: 
2025-07-10T22:54:28: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:28: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:28: 
2025-07-10T22:54:29: 10:54:29 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:29: 10:54:29 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:29: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:29: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:29: 10:54:29 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:30: 10:54:30 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:30: Gateway listening on :42080
2025-07-10T22:54:30: Initializing services...
2025-07-10T22:54:30: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:30: 10:54:30 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:30: 10:54:30 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:30: IORedis client connected
2025-07-10T22:54:30: IORedis client initialized successfully
2025-07-10T22:54:30: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:30: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:30: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:30: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:30: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:30: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:30: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:30: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:30: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:30: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:30: Event publisher initialized successfully
2025-07-10T22:54:30: 10:54:30 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:30: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:30: 
2025-07-10T22:54:30: Version: viem@2.31.7
2025-07-10T22:54:30:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:30:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:30:     at async Promise.all (index 2)
2025-07-10T22:54:30:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:30:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:30:     at async Promise.all (index 0)
2025-07-10T22:54:30:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:30:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:30: 10:54:30 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:30:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:30: 
2025-07-10T22:54:30: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:30: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:30: 
2025-07-10T22:54:30: 10:54:30 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:31: 10:54:31 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:31: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:31: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:31: 10:54:31 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:31: 10:54:31 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:31: Gateway listening on :42080
2025-07-10T22:54:31: Initializing services...
2025-07-10T22:54:31: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:31: 10:54:31 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:31: 10:54:31 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:31: IORedis client connected
2025-07-10T22:54:31: IORedis client initialized successfully
2025-07-10T22:54:31: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:31: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:31: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:31: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:31: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:31: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:31: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:31: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:31: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:31: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:31: Event publisher initialized successfully
2025-07-10T22:54:31: 10:54:31 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:31: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:31: 
2025-07-10T22:54:31: Version: viem@2.31.7
2025-07-10T22:54:31:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:31:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:31:     at async Promise.all (index 2)
2025-07-10T22:54:31:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:31:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:31:     at async Promise.all (index 0)
2025-07-10T22:54:31:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:31:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:31: 10:54:31 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:31:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:31: 
2025-07-10T22:54:31: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:31: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:31: 
2025-07-10T22:54:32: 10:54:32 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:32: 10:54:32 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:32: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:32: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:32: 10:54:32 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:32: 10:54:32 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:33: Gateway listening on :42080
2025-07-10T22:54:33: Initializing services...
2025-07-10T22:54:33: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:33: 10:54:33 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:33: 10:54:33 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:33: IORedis client connected
2025-07-10T22:54:33: IORedis client initialized successfully
2025-07-10T22:54:33: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:33: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:33: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:33: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:33: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:33: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:33: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:33: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:33: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:33: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:33: Event publisher initialized successfully
2025-07-10T22:54:33: 10:54:33 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:33: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:33: 
2025-07-10T22:54:33: Version: viem@2.31.7
2025-07-10T22:54:33:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:33:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:33:     at async Promise.all (index 2)
2025-07-10T22:54:33:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:33:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:33:     at async Promise.all (index 0)
2025-07-10T22:54:33:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:33:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:33: 10:54:33 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:33:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:33: 
2025-07-10T22:54:33: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:33: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:33: 
2025-07-10T22:54:33: 10:54:33 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:34: 10:54:34 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:34: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:34: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:34: 10:54:34 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:34: 10:54:34 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:34: Gateway listening on :42080
2025-07-10T22:54:34: Initializing services...
2025-07-10T22:54:34: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:34: 10:54:34 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:34: 10:54:34 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:34: IORedis client connected
2025-07-10T22:54:34: IORedis client initialized successfully
2025-07-10T22:54:34: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:34: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:34: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:34: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:34: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:34: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:34: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:34: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:34: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:34: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:34: Event publisher initialized successfully
2025-07-10T22:54:34: 10:54:34 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:34: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:34: 
2025-07-10T22:54:34: Version: viem@2.31.7
2025-07-10T22:54:34:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:34:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:34:     at async Promise.all (index 2)
2025-07-10T22:54:34:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:34:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:34:     at async Promise.all (index 0)
2025-07-10T22:54:34:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:34:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:34: 10:54:34 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:34:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:34: 
2025-07-10T22:54:34: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:34: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:34: 
2025-07-10T22:54:35: 10:54:35 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:35: 10:54:35 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:35: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:35: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:35: 10:54:35 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:36: 10:54:36 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:36: Gateway listening on :42080
2025-07-10T22:54:36: Initializing services...
2025-07-10T22:54:36: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:36: 10:54:36 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:36: 10:54:36 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:36: IORedis client connected
2025-07-10T22:54:36: IORedis client initialized successfully
2025-07-10T22:54:36: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:36: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:36: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:36: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:36: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:36: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:36: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:36: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:36: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:36: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:36: Event publisher initialized successfully
2025-07-10T22:54:36: 10:54:36 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:36: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:36: 
2025-07-10T22:54:36: Version: viem@2.31.7
2025-07-10T22:54:36:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:36:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:36:     at async Promise.all (index 2)
2025-07-10T22:54:36:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:36:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:36:     at async Promise.all (index 0)
2025-07-10T22:54:36:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:36:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:36: 10:54:36 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:36:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:36: 
2025-07-10T22:54:36: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:36: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:36: 
2025-07-10T22:54:36: 10:54:36 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:37: 10:54:37 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:37: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:37: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:37: 10:54:37 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:37: 10:54:37 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:37: Gateway listening on :42080
2025-07-10T22:54:37: Initializing services...
2025-07-10T22:54:37: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:37: 10:54:37 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:37: 10:54:37 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:37: IORedis client connected
2025-07-10T22:54:37: IORedis client initialized successfully
2025-07-10T22:54:37: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:37: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:37: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:37: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:37: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:37: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:37: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:37: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:37: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:37: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:37: Event publisher initialized successfully
2025-07-10T22:54:37: 10:54:37 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:37: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:37: 
2025-07-10T22:54:37: Version: viem@2.31.7
2025-07-10T22:54:37:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:37:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:37:     at async Promise.all (index 2)
2025-07-10T22:54:37:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:37:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:37:     at async Promise.all (index 0)
2025-07-10T22:54:37:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:37:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:37: 10:54:37 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:37:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:37: 
2025-07-10T22:54:37: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:37: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:37: 
2025-07-10T22:54:38: 10:54:38 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:38: 10:54:38 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:38: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:38: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:38: 10:54:38 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:38: 10:54:38 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:38: Gateway listening on :42080
2025-07-10T22:54:38: Initializing services...
2025-07-10T22:54:38: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:38: 10:54:38 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:38: 10:54:38 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:39: IORedis client connected
2025-07-10T22:54:39: IORedis client initialized successfully
2025-07-10T22:54:39: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:39: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:39: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:39: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:39: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:39: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:39: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:39: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:39: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:39: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:39: Event publisher initialized successfully
2025-07-10T22:54:39: 10:54:39 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:39: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:39: 
2025-07-10T22:54:39: Version: viem@2.31.7
2025-07-10T22:54:39:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:39:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:39:     at async Promise.all (index 2)
2025-07-10T22:54:39:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:39:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:39:     at async Promise.all (index 0)
2025-07-10T22:54:39:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:39:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:39: 10:54:39 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:39:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:39: 
2025-07-10T22:54:39: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:39: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:39: 
2025-07-10T22:54:39: 10:54:39 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:39: 10:54:39 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:40: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:40: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:40: 10:54:40 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:40: 10:54:40 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:40: Gateway listening on :42080
2025-07-10T22:54:40: Initializing services...
2025-07-10T22:54:40: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:40: 10:54:40 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:40: 10:54:40 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:40: IORedis client connected
2025-07-10T22:54:40: IORedis client initialized successfully
2025-07-10T22:54:40: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:40: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:40: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:40: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:40: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:40: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:40: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:40: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:40: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:40: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:40: Event publisher initialized successfully
2025-07-10T22:54:40: 10:54:40 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:40: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:40: 
2025-07-10T22:54:40: Version: viem@2.31.7
2025-07-10T22:54:40:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:40:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:40:     at async Promise.all (index 2)
2025-07-10T22:54:40:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:40:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:40:     at async Promise.all (index 0)
2025-07-10T22:54:40:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:40:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:40: 10:54:40 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:40:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:40: 
2025-07-10T22:54:40: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:40: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:40: 
2025-07-10T22:54:41: 10:54:41 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:41: 10:54:41 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:41: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:41: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:41: 10:54:41 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:42: 10:54:42 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:42: Gateway listening on :42080
2025-07-10T22:54:42: Initializing services...
2025-07-10T22:54:42: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:42: 10:54:42 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:42: 10:54:42 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:42: IORedis client connected
2025-07-10T22:54:42: IORedis client initialized successfully
2025-07-10T22:54:42: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:42: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:42: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:42: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:42: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:42: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:42: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:42: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:42: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:42: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:42: Event publisher initialized successfully
2025-07-10T22:54:42: 10:54:42 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:42: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:42: 
2025-07-10T22:54:42: Version: viem@2.31.7
2025-07-10T22:54:42:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:42:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:42:     at async Promise.all (index 2)
2025-07-10T22:54:42:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:42:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:42:     at async Promise.all (index 0)
2025-07-10T22:54:42:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:42:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:42: 10:54:42 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:42:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:42: 
2025-07-10T22:54:42: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:42: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:42: 
2025-07-10T22:54:42: 10:54:42 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:43: 10:54:43 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:43: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:43: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:43: 10:54:43 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:43: 10:54:43 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:43: Gateway listening on :42080
2025-07-10T22:54:43: Initializing services...
2025-07-10T22:54:43: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:43: 10:54:43 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:43: 10:54:43 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:43: IORedis client connected
2025-07-10T22:54:43: IORedis client initialized successfully
2025-07-10T22:54:43: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:43: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:43: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:43: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:43: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:43: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:43: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:43: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:43: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:43: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:43: Event publisher initialized successfully
2025-07-10T22:54:43: 10:54:43 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:43: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:43: 
2025-07-10T22:54:43: Version: viem@2.31.7
2025-07-10T22:54:43:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:43:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:43:     at async Promise.all (index 2)
2025-07-10T22:54:43:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:43:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:43:     at async Promise.all (index 0)
2025-07-10T22:54:43:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:43:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:43: 10:54:43 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:43:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:43: 
2025-07-10T22:54:43: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:43: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:43: 
2025-07-10T22:54:44: 10:54:44 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:44: 10:54:44 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:44: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:44: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:44: 10:54:44 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:45: 10:54:45 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:45: Gateway listening on :42080
2025-07-10T22:54:45: Initializing services...
2025-07-10T22:54:45: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:45: 10:54:45 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:45: 10:54:45 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:45: IORedis client connected
2025-07-10T22:54:45: IORedis client initialized successfully
2025-07-10T22:54:45: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:45: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:45: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:45: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:45: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:45: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:45: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:45: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:45: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:45: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:45: Event publisher initialized successfully
2025-07-10T22:54:45: 10:54:45 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:45: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:45: 
2025-07-10T22:54:45: Version: viem@2.31.7
2025-07-10T22:54:45:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:45:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:45:     at async Promise.all (index 2)
2025-07-10T22:54:45:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:45:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:45:     at async Promise.all (index 0)
2025-07-10T22:54:45:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:45:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:45: 10:54:45 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:45:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:45: 
2025-07-10T22:54:45: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:45: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:45: 
2025-07-10T22:54:46: 10:54:46 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:46: 10:54:46 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:46: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:46: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:46: 10:54:46 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:46: 10:54:46 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:46: Gateway listening on :42080
2025-07-10T22:54:46: Initializing services...
2025-07-10T22:54:46: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:46: 10:54:46 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:46: 10:54:46 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:46: IORedis client connected
2025-07-10T22:54:46: IORedis client initialized successfully
2025-07-10T22:54:46: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:46: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:46: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:46: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:46: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:46: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:46: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:46: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:46: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:46: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:46: Event publisher initialized successfully
2025-07-10T22:54:46: 10:54:46 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:46: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:46: 
2025-07-10T22:54:46: Version: viem@2.31.7
2025-07-10T22:54:46:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:46:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:46:     at async Promise.all (index 2)
2025-07-10T22:54:46:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:46:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:46:     at async Promise.all (index 0)
2025-07-10T22:54:46:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:46:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:46: 10:54:46 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:46:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:47: 
2025-07-10T22:54:47: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:47: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:47: 
2025-07-10T22:54:47: 10:54:47 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:47: 10:54:47 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:48: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:48: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:48: 10:54:48 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:48: 10:54:48 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:48: Gateway listening on :42080
2025-07-10T22:54:48: Initializing services...
2025-07-10T22:54:48: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:48: 10:54:48 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:48: 10:54:48 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:48: IORedis client connected
2025-07-10T22:54:48: IORedis client initialized successfully
2025-07-10T22:54:48: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:48: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:48: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:48: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:48: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:48: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:48: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:48: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:48: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:48: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:48: Event publisher initialized successfully
2025-07-10T22:54:48: 10:54:48 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:48: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:48: 
2025-07-10T22:54:48: Version: viem@2.31.7
2025-07-10T22:54:48:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:48:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:48:     at async Promise.all (index 2)
2025-07-10T22:54:48:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:48:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:48:     at async Promise.all (index 0)
2025-07-10T22:54:48:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:48:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:48: 10:54:48 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:48:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:48: 
2025-07-10T22:54:48: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:48: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:48: 
2025-07-10T22:54:49: 10:54:49 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:49: 10:54:49 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:49: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:49: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:49: 10:54:49 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:50: 10:54:50 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:50: Gateway listening on :42080
2025-07-10T22:54:50: Initializing services...
2025-07-10T22:54:50: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:50: 10:54:50 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:50: 10:54:50 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:50: IORedis client connected
2025-07-10T22:54:50: IORedis client initialized successfully
2025-07-10T22:54:50: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:50: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:50: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:50: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:50: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:50: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:50: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:50: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:50: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:50: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:50: Event publisher initialized successfully
2025-07-10T22:54:50: 10:54:50 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:50: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:50: 
2025-07-10T22:54:50: Version: viem@2.31.7
2025-07-10T22:54:50:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:50:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:50:     at async Promise.all (index 2)
2025-07-10T22:54:50:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:50:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:50:     at async Promise.all (index 0)
2025-07-10T22:54:50:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:50:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:50: 10:54:50 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:50:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:50: 
2025-07-10T22:54:50: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:50: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:50: 
2025-07-10T22:54:50: 10:54:50 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:51: 10:54:51 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:51: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:51: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:51: 10:54:51 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:51: 10:54:51 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:52: Gateway listening on :42080
2025-07-10T22:54:52: Initializing services...
2025-07-10T22:54:52: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:52: 10:54:52 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:52: 10:54:52 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:52: IORedis client connected
2025-07-10T22:54:52: IORedis client initialized successfully
2025-07-10T22:54:52: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:52: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:52: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:52: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:52: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:52: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:52: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:52: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:52: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:52: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:52: Event publisher initialized successfully
2025-07-10T22:54:52: 10:54:52 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:52: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:52: 
2025-07-10T22:54:52: Version: viem@2.31.7
2025-07-10T22:54:52:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:52:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:52:     at async Promise.all (index 2)
2025-07-10T22:54:52:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:52:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:52:     at async Promise.all (index 0)
2025-07-10T22:54:52:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:52:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:52: 10:54:52 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:52:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:52: 
2025-07-10T22:54:52: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:52: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:52: 
2025-07-10T22:54:52: 10:54:52 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:53: 10:54:53 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:53: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:53: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:53: 10:54:53 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:53: 10:54:53 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:53: Gateway listening on :42080
2025-07-10T22:54:53: Initializing services...
2025-07-10T22:54:53: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:53: 10:54:53 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:53: 10:54:53 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:53: IORedis client connected
2025-07-10T22:54:53: IORedis client initialized successfully
2025-07-10T22:54:53: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:53: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:53: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:53: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:53: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:53: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:53: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:53: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:53: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:53: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:53: Event publisher initialized successfully
2025-07-10T22:54:53: 10:54:53 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:53: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:53: 
2025-07-10T22:54:53: Version: viem@2.31.7
2025-07-10T22:54:53:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:53:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:53:     at async Promise.all (index 2)
2025-07-10T22:54:53:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:53:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:53:     at async Promise.all (index 0)
2025-07-10T22:54:53:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:53:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:53: 10:54:53 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:53:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:53: 
2025-07-10T22:54:53: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:53: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:53: 
2025-07-10T22:54:54: 10:54:54 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:54: 10:54:54 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:54: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:54: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:54: 10:54:54 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:55: 10:54:55 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:55: Gateway listening on :42080
2025-07-10T22:54:55: Initializing services...
2025-07-10T22:54:55: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:55: 10:54:55 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:55: 10:54:55 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:55: IORedis client connected
2025-07-10T22:54:55: IORedis client initialized successfully
2025-07-10T22:54:55: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:55: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:55: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:55: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:55: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:55: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:55: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:55: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:55: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:55: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:55: Event publisher initialized successfully
2025-07-10T22:54:55: 10:54:55 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:55: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:55: 
2025-07-10T22:54:55: Version: viem@2.31.7
2025-07-10T22:54:55:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:55:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:55:     at async Promise.all (index 2)
2025-07-10T22:54:55:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:55:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:55:     at async Promise.all (index 0)
2025-07-10T22:54:55:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:55:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:55: 10:54:55 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:55:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:55: 
2025-07-10T22:54:55: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:55: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:55: 
2025-07-10T22:54:55: 10:54:55 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:56: 10:54:56 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:56: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:56: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:56: 10:54:56 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:56: 10:54:56 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:56: Gateway listening on :42080
2025-07-10T22:54:56: Initializing services...
2025-07-10T22:54:56: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:56: 10:54:56 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:56: 10:54:56 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:56: IORedis client connected
2025-07-10T22:54:56: IORedis client initialized successfully
2025-07-10T22:54:56: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:56: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:56: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:56: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:56: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:56: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:56: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:56: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:56: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:56: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:56: Event publisher initialized successfully
2025-07-10T22:54:56: 10:54:56 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:56: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:56: 
2025-07-10T22:54:56: Version: viem@2.31.7
2025-07-10T22:54:56:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:56:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:56:     at async Promise.all (index 2)
2025-07-10T22:54:56:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:56:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:56:     at async Promise.all (index 0)
2025-07-10T22:54:56:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:56:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:56: 10:54:56 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:56:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:56: 
2025-07-10T22:54:56: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:56: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:56: 
2025-07-10T22:54:57: 10:54:57 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:57: 10:54:57 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:57: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:57: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:57: 10:54:57 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:58: 10:54:58 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:58: Gateway listening on :42080
2025-07-10T22:54:58: Initializing services...
2025-07-10T22:54:58: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:58: 10:54:58 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:58: 10:54:58 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:58: IORedis client connected
2025-07-10T22:54:58: IORedis client initialized successfully
2025-07-10T22:54:58: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:58: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:58: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:58: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:58: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:58: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:58: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:58: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:58: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:58: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:58: Event publisher initialized successfully
2025-07-10T22:54:58: 10:54:58 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:58: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:58: 
2025-07-10T22:54:58: Version: viem@2.31.7
2025-07-10T22:54:58:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:58:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:58:     at async Promise.all (index 2)
2025-07-10T22:54:58:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:58:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:58:     at async Promise.all (index 0)
2025-07-10T22:54:58:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:58:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:58: 10:54:58 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:58:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:58: 
2025-07-10T22:54:58: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:58: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:58: 
2025-07-10T22:54:58: 10:54:58 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:54:59: 10:54:59 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:54:59: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:54:59: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:54:59: 10:54:59 PM INFO  database   Using database schema 'public'
2025-07-10T22:54:59: 10:54:59 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:54:59: Gateway listening on :42080
2025-07-10T22:54:59: Initializing services...
2025-07-10T22:54:59: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:54:59: 10:54:59 PM INFO  server     Started listening on port 42069
2025-07-10T22:54:59: 10:54:59 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:54:59: IORedis client connected
2025-07-10T22:54:59: IORedis client initialized successfully
2025-07-10T22:54:59: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:54:59: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:54:59: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:54:59: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:54:59: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:54:59: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:54:59: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:54:59: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:54:59: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:54:59: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:54:59: Event publisher initialized successfully
2025-07-10T22:54:59: 10:54:59 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:54:59: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:54:59: 
2025-07-10T22:54:59: Version: viem@2.31.7
2025-07-10T22:54:59:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:54:59:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:54:59:     at async Promise.all (index 2)
2025-07-10T22:54:59:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:54:59:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:54:59:     at async Promise.all (index 0)
2025-07-10T22:54:59:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:54:59:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:54:59: 10:54:59 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:54:59:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:54:59: 
2025-07-10T22:54:59: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:54:59: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:54:59: 
2025-07-10T22:55:00: 10:55:00 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:55:00: 10:55:00 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:55:00: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:55:00: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:55:00: 10:55:00 PM INFO  database   Using database schema 'public'
2025-07-10T22:55:01: 10:55:01 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:55:01: Gateway listening on :42080
2025-07-10T22:55:01: Initializing services...
2025-07-10T22:55:01: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:55:01: 10:55:01 PM INFO  server     Started listening on port 42069
2025-07-10T22:55:01: 10:55:01 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:55:01: IORedis client connected
2025-07-10T22:55:01: IORedis client initialized successfully
2025-07-10T22:55:01: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:55:01: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:55:01: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:55:01: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:55:01: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:55:01: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:55:01: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:55:01: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:55:01: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:55:01: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:55:01: Event publisher initialized successfully
2025-07-10T22:55:01: 10:55:01 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:55:01: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:55:01: 
2025-07-10T22:55:01: Version: viem@2.31.7
2025-07-10T22:55:01:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:55:01:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:55:01:     at async Promise.all (index 2)
2025-07-10T22:55:01:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:55:01:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:55:01:     at async Promise.all (index 0)
2025-07-10T22:55:01:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:55:01:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:55:01: 10:55:01 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:55:01:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:55:01: 
2025-07-10T22:55:01: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:55:01: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:55:01: 
2025-07-10T22:55:01: 10:55:01 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:55:02: 10:55:02 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:55:02: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:55:02: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:55:02: 10:55:02 PM INFO  database   Using database schema 'public'
2025-07-10T22:55:02: 10:55:02 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:55:02: Gateway listening on :42080
2025-07-10T22:55:02: Initializing services...
2025-07-10T22:55:02: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:55:02: 10:55:02 PM INFO  server     Started listening on port 42069
2025-07-10T22:55:02: 10:55:02 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:55:02: IORedis client connected
2025-07-10T22:55:02: IORedis client initialized successfully
2025-07-10T22:55:02: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:55:02: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:55:02: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:55:02: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:55:02: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:55:02: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:55:02: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:55:02: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:55:02: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:55:02: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:55:02: Event publisher initialized successfully
2025-07-10T22:55:02: 10:55:02 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:55:02: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:55:02: 
2025-07-10T22:55:02: Version: viem@2.31.7
2025-07-10T22:55:02:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:55:02:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:55:02:     at async Promise.all (index 2)
2025-07-10T22:55:02:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:55:02:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:55:02:     at async Promise.all (index 0)
2025-07-10T22:55:02:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:55:02:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:55:02: 10:55:02 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:55:02:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:55:03: 
2025-07-10T22:55:03: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:55:03: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:55:03: 
2025-07-10T22:55:03: 10:55:03 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:55:03: 10:55:03 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:55:03: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:55:03: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:55:03: 10:55:03 PM INFO  database   Using database schema 'public'
2025-07-10T22:55:04: 10:55:04 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-10T22:55:04: Gateway listening on :42080
2025-07-10T22:55:04: Initializing services...
2025-07-10T22:55:04: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-10T22:55:04: 10:55:04 PM INFO  server     Started listening on port 42069
2025-07-10T22:55:04: 10:55:04 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-10T22:55:04: IORedis client connected
2025-07-10T22:55:04: IORedis client initialized successfully
2025-07-10T22:55:04: Consumer group websocket-consumers already exists for stream trades
2025-07-10T22:55:04: Consumer group analytics-consumers already exists for stream trades
2025-07-10T22:55:04: Consumer group websocket-consumers already exists for stream balances
2025-07-10T22:55:04: Consumer group analytics-consumers already exists for stream balances
2025-07-10T22:55:04: Consumer group websocket-consumers already exists for stream orders
2025-07-10T22:55:04: Consumer group analytics-consumers already exists for stream orders
2025-07-10T22:55:04: Consumer group websocket-consumers already exists for stream depth
2025-07-10T22:55:04: Consumer group websocket-consumers already exists for stream klines
2025-07-10T22:55:04: Consumer group analytics-consumers already exists for stream klines
2025-07-10T22:55:04: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-10T22:55:04: Event publisher initialized successfully
2025-07-10T22:55:04: 10:55:04 PM ERROR process    Caught unhandledRejection event
2025-07-10T22:55:04: BlockNotFoundError: Block at number "16010800" could not be found.
2025-07-10T22:55:04: 
2025-07-10T22:55:04: Version: viem@2.31.7
2025-07-10T22:55:04:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/utils/rpc.ts:43:15
2025-07-10T22:55:04:     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-07-10T22:55:04:     at async Promise.all (index 2)
2025-07-10T22:55:04:     at getLocalSyncProgress (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:1407:23)
2025-07-10T22:55:04:     at file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:683:28
2025-07-10T22:55:04:     at async Promise.all (index 0)
2025-07-10T22:55:04:     at createSync (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/sync/index.ts:654:3)
2025-07-10T22:55:04:     at run (file:///Users/renaka/gtx/clob-indexer/node_modules/.pnpm/ponder@0.9.28_@opentelemetry+api@1.9.0_@types+node@20.19.4_hono@4.8.4_typescript@5.8.3_viem@2.31.7_typescript@5.8.3_/node_modules/ponder/src/bin/utils/run.ts:54:16)
2025-07-10T22:55:04: 10:55:04 PM WARN  process    Received unhandledRejection, starting shutdown sequence
2025-07-10T22:55:04:  ELIFECYCLE  Command failed with exit code 1.
2025-07-10T22:55:04: 
2025-07-10T22:55:04: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-10T22:55:04: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-10T22:55:04: 
2025-07-10T22:55:04: 10:55:04 PM WARN  app        Local environment file (.env.local) not found
2025-07-10T22:55:05: 10:55:05 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-10T22:55:05: ENABLE_WEBSOCKET_LOG true
2025-07-10T22:55:05: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-10T22:55:05: 10:55:05 PM INFO  database   Using database schema 'public'
2025-07-10T22:55:05: 10:55:05 PM WARN  process    Received SIGINT, starting shutdown sequence
2025-07-10T22:55:05: 10:55:05 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-11T19:31:51: 
2025-07-11T19:31:51: > clob-dex@0.0.1 dev /Users/renaka/gtx/clob-indexer
2025-07-11T19:31:51: > ponder dev --config pg-ponder.config.ts --disable-ui
2025-07-11T19:31:51: 
2025-07-11T19:31:51: 7:31:51 PM WARN  app        Local environment file (.env.local) not found
2025-07-11T19:31:52: 7:31:52 PM INFO  build      Using Postgres database 'localhost:5433/ponder' (from ponder.config.ts)
2025-07-11T19:31:52: ENABLE_WEBSOCKET_LOG true
2025-07-11T19:31:52: WebSocket logs will be written to: /Users/renaka/gtx/clob-indexer/websocket-connection-logs.txt
2025-07-11T19:31:52: 7:31:52 PM INFO  database   Using database schema 'public'
2025-07-11T19:31:52: 7:31:52 PM INFO  database   Created tables [pools, orders, order_history, order_book_depth, order_book_depth_snapshots, trades, order_book_trades, minute_buckets, five_minute_buckets, thirty_minute_buckets, hour_buckets, daily_buckets, balances, market_makers, velock_positions, votes, currencies, faucet_requests, faucet_deposits, faucet_tokens]
2025-07-11T19:31:52: Gateway listening on :42080
2025-07-11T19:31:52: Initializing services...
2025-07-11T19:31:52: System monitor disabled (set ENABLE_SYSTEM_MONITOR=true to enable)
2025-07-11T19:31:52: 7:31:52 PM INFO  server     Started listening on port 42069
2025-07-11T19:31:52: 7:31:52 PM INFO  server     Started returning 200 responses from /health endpoint
2025-07-11T19:31:52: IORedis client connected
2025-07-11T19:31:52: IORedis client initialized successfully
2025-07-11T19:31:52: Consumer group websocket-consumers already exists for stream trades
2025-07-11T19:31:52: Consumer group analytics-consumers already exists for stream trades
2025-07-11T19:31:52: Consumer group websocket-consumers already exists for stream balances
2025-07-11T19:31:52: Consumer group analytics-consumers already exists for stream balances
2025-07-11T19:31:52: Consumer group websocket-consumers already exists for stream orders
2025-07-11T19:31:52: Consumer group analytics-consumers already exists for stream orders
2025-07-11T19:31:52: Consumer group websocket-consumers already exists for stream depth
2025-07-11T19:31:52: Consumer group websocket-consumers already exists for stream klines
2025-07-11T19:31:52: Consumer group analytics-consumers already exists for stream klines
2025-07-11T19:31:52: Consumer group websocket-consumers already exists for stream execution_reports
2025-07-11T19:31:52: Event publisher initialized successfully
2025-07-11T19:31:52: 7:31:52 PM INFO  historical Started 'network' historical sync with 0% cached
2025-07-11T19:31:52: 7:31:52 PM INFO  sync       Completed 'network' historical sync
2025-07-11T19:31:52: Block number: 166, File: redis.ts, Function: getCachedData, handlePoolCreated Starting cache retrieval: {"key":"websocket:enable:block","blockNumber":166}
2025-07-11T19:31:52: Redis client connected
2025-07-11T19:31:52: Block number: 166, File: redis.ts, Function: getCachedData, handlePoolCreated Cache retrieval completed: {"key":"websocket:enable:block","blockNumber":166,"found":true,"dataLength":3}
2025-07-11T19:31:52: Block number: 166, File: syncState.ts, Function: shouldEnableWebSocket, handlePoolCreated WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 166, File: redis.ts, Function: setCachedData, handlePoolCreated Starting cache operation: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","ttl":3600,"dataType":"object","dataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"]}
2025-07-11T19:31:53: Block number: 166, File: redis.ts, Function: setCachedData, handlePoolCreated Data serialized successfully: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","serializedLength":476,"containsBigInt":true}
2025-07-11T19:31:53: Block number: 166, File: redis.ts, Function: setCachedData, handlePoolCreated Cache set successfully: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","ttl":3600,"success":true}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: executeIfInSync, handlePoolCreated Called by main function: {"callerFunction":"handlePoolCreated","eventBlockNumber":166}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: shouldEnableWebSocket, handlePoolCreated WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: executeIfInSync, handlePoolCreated WebSocket disabled - skipping: {"callerFunction":"handlePoolCreated"}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: shouldEnableWebSocket, handlePoolCreated WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 166, File: redis.ts, Function: setCachedData, handlePoolCreated Starting cache operation: {"key":"pool:0x8773c3744204a2f146dbf2c37a2326b58ce05b33:31337","ttl":3600,"dataType":"object","dataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"]}
2025-07-11T19:31:53: Block number: 166, File: redis.ts, Function: setCachedData, handlePoolCreated Data serialized successfully: {"key":"pool:0x8773c3744204a2f146dbf2c37a2326b58ce05b33:31337","serializedLength":475,"containsBigInt":true}
2025-07-11T19:31:53: Block number: 166, File: redis.ts, Function: setCachedData, handlePoolCreated Cache set successfully: {"key":"pool:0x8773c3744204a2f146dbf2c37a2326b58ce05b33:31337","ttl":3600,"success":true}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: executeIfInSync, handlePoolCreated Called by main function: {"callerFunction":"handlePoolCreated","eventBlockNumber":166}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: shouldEnableWebSocket, handlePoolCreated WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 166, File: syncState.ts, Function: executeIfInSync, handlePoolCreated WebSocket disabled - skipping: {"callerFunction":"handlePoolCreated"}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"169","blockHash":"0xbbea2a263addc2f5a8473dc852c94c2fe298d68a6f96d9b7f96ab9e37e391f49","txHash":"0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":1,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3","networkName":"network"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"1","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xf012353a25db5cc5f02ccc1970199a5e255c9d425e9ce4eaee7702be6a0abab3, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"169","blockHash":"0xbbea2a263addc2f5a8473dc852c94c2fe298d68a6f96d9b7f96ab9e37e391f49","txHash":"0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":2,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9","networkName":"network"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"2","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0xc18765e0aa00c5da08a43ef60a274b12c3bde3a3daefaf009f9f05d2f22032c9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"169","blockHash":"0xbbea2a263addc2f5a8473dc852c94c2fe298d68a6f96d9b7f96ab9e37e391f49","txHash":"0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":3,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758","networkName":"network"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"3","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x59ec0be928133e4e7a65413f2d23547a522f2f7157da516787c6ef865b855758, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"169","blockHash":"0xbbea2a263addc2f5a8473dc852c94c2fe298d68a6f96d9b7f96ab9e37e391f49","txHash":"0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":4,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739","networkName":"network"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"4","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":169}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 169, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 169, Transaction hash: 0x0fe992f5edfc897dc4d016b4cbf3945a33e83c67770196a7e034e777dcefb739, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":170}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":170}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"170","blockHash":"0x14d39a66eaef21348b94369e77e1f9a168482d28895df34f4ff76654e702b396","txHash":"0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":5,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87","networkName":"network"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"5","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":170}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x2dc46fd2b2278b313ac28caec8faf88769e0d44661eff31610afb201d2c2be87, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":170}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":170}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"170","blockHash":"0x14d39a66eaef21348b94369e77e1f9a168482d28895df34f4ff76654e702b396","txHash":"0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":6,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10","networkName":"network"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"6","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":170}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 170, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 170, Transaction hash: 0x5d0026f3fe8402ba3a27c25ccd54d9a0d98056812b601abd041b60ecc80bff10, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"171","blockHash":"0xd544980b342b88a73f958ce5c70ef27f498dcf7b341893be65880d241ba697c2","txHash":"0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":7,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5","networkName":"network"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"7","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x672d5bb0f64b2c5a1181ca8aeda2d8fcd1a5f7279e8688e35683d00334746ac5, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"171","blockHash":"0xd544980b342b88a73f958ce5c70ef27f498dcf7b341893be65880d241ba697c2","txHash":"0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":8,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd","networkName":"network"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"8","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x6ac88a9a9b5de2bbab368ba3e6650c3ae19402a82c844101e91ccd35665ca8dd, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"171","blockHash":"0xd544980b342b88a73f958ce5c70ef27f498dcf7b341893be65880d241ba697c2","txHash":"0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":9,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5","networkName":"network"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"9","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x54f2dc0e3f1174c5ee0feee5f6adfca8420549a538eba8c88ba0dd8c1ba4b8d5, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"171","blockHash":"0xd544980b342b88a73f958ce5c70ef27f498dcf7b341893be65880d241ba697c2","txHash":"0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":10,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1759937970,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1","networkName":"network"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"10","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161970","convertedTimestamp":1752161970}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":171}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 171, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 171, Transaction hash: 0x7133af42a5e62f94d25252fbfaf3e9fcb61597f9628644fa847016fc17b217e1, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"175","blockHash":"0x6f7d07edd083c2ed0a42d58caa8c359030e2e7f3857052d253d96e49dd3d6ad1","txHash":"0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":11,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1759937984,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297","networkName":"network"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"11","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161984","convertedTimestamp":1752161984}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"6","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752161984,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket disabled - skipping: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket disabled - skipping: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"7","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752161984,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket disabled - skipping: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket disabled - skipping: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"8","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752161984,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket disabled - skipping: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x01fd7d51c38040b9a4843b23352971a432966376266278ced0d4f567fd1e5297, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket disabled - skipping: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"175","blockHash":"0x6f7d07edd083c2ed0a42d58caa8c359030e2e7f3857052d253d96e49dd3d6ad1","txHash":"0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af","logIndex":20,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":12,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1759937984,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af","networkName":"network"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"12","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752161984","convertedTimestamp":1752161984}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"5","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752161984,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket disabled - skipping: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket disabled - skipping: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"4","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752161984,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket disabled - skipping: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 175, Transaction hash: 0x7387c4c493379e10027a3652a7a7e01924bcce9450ef1e32a8016e50ab6620af, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket disabled - skipping: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":175}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 175, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: 7:31:53 PM INFO  app        Indexed 58 events with 28.8% complete and 522ms remaining
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"179","blockHash":"0x717c74aefae617ed4ae59907b1bc9d1c416981c2840ba1e63b5cbeda30279a5d","txHash":"0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":13,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0","networkName":"network"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"13","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x16b99f4d59a97ac63ea3ec11c9f2c8fac82da6999c9925ceada30e03ca3e8cc0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"179","blockHash":"0x717c74aefae617ed4ae59907b1bc9d1c416981c2840ba1e63b5cbeda30279a5d","txHash":"0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":14,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609","networkName":"network"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"14","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x09b2b4693707a13be5a5fa3dcac279bd578412b8aef5b6e08a9d923400cc0609, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"179","blockHash":"0x717c74aefae617ed4ae59907b1bc9d1c416981c2840ba1e63b5cbeda30279a5d","txHash":"0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":15,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e","networkName":"network"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"15","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":179}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 179, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 179, Transaction hash: 0x12f1477138bee8a5ac36988a42e047899d67fa9c7bd090214ed0deca23af628e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":180}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":180}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"180","blockHash":"0x4ce0ec651e64240ba6af58c0ed40aaeaa29d25cd165ff342cb31bc2b11ba52e7","txHash":"0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":16,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9","networkName":"network"}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"16","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":180}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 180, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 180, Transaction hash: 0x39237b9d16e7bd9fd6cced7fef107854dedf21389e21bc342124720b5c793df9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":181}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":181}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"181","blockHash":"0x74bf04e714928f7884702d050899471b024023af970db5aa840a3080ab0cd093","txHash":"0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":17,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e","networkName":"network"}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"17","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":181}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 181, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 181, Transaction hash: 0xe214e480c84999a51a6ca68f80bf387d91aa687543f5a2d0d76d7d7c9ce3983e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":182}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":182}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"182","blockHash":"0xaa7145c140d137cbec396ab9a73e500701e005edae4f0e2d4022b0f057d89453","txHash":"0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":18,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0","networkName":"network"}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"18","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":182}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 182, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 182, Transaction hash: 0xac5b95fb033a8a27a2b0c603a5cfd8675a225fc242f373a555b7192d327ce2f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":183}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":183}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"183","blockHash":"0x70b577f36f0ff30f4bc0debc949f3a6d841a28e39bf559fd8f8c0c8ead11b30e","txHash":"0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":19,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145","networkName":"network"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"19","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":183}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xf0f027614e6efff32f3d73149d3240cdbbbbbe2d893dd57fc325dada2d61f145, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":183}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":183}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"183","blockHash":"0x70b577f36f0ff30f4bc0debc949f3a6d841a28e39bf559fd8f8c0c8ead11b30e","txHash":"0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":20,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f","networkName":"network"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"20","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":183}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 183, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 183, Transaction hash: 0xe0030367284a0c1dd9eac3cded95c5c45af9112b07c0ab30ad35242306117f6f, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":184}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":184}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"184","blockHash":"0xa220678f9f49e743661ac74cebc53a188310cdef35ebef8f79a621eca6b22ffd","txHash":"0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":21,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152","networkName":"network"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"21","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":184}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x5b645bce28e448c218617ba7af904604bec97eab8da7d60adb8aefcec2790152, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":184}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":184}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket disabled - skipping: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"184","blockHash":"0xa220678f9f49e743661ac74cebc53a188310cdef35ebef8f79a621eca6b22ffd","txHash":"0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":22,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1759994284,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4","networkName":"network"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"22","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218284","convertedTimestamp":1752218284}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":184}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":false}
2025-07-11T19:31:53: Block number: 184, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket disabled - skipping: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 184, Transaction hash: 0x7aee676da30c88e9d9d05478ece48eba9f468a320d8fc59dc6fd17343acd4df4, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=592313000 locked=0 (ID: 1752237113133-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7687000 locked=292313000 (ID: 1752237113134-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"186","blockHash":"0xaaaa9594f8a8a3931c33aea3286fd84043254ff6e5efcfda6d98befbaf33969d","txHash":"0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":23,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1759994290,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9","networkName":"network"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"23","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218290","convertedTimestamp":1752218290}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 23 (ID: 1752237113136-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 23 (ID: 1752237113136-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113146-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-72313000 locked=292313000 (ID: 1752237113147-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-485980800 locked=766500000 (ID: 1752237113148-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=667800 locked=0 (ID: 1752237113148-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160100000000000000 locked=260000000000000000 (ID: 1752237113149-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=139720000000000000 locked=0 (ID: 1752237113149-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=380000000000000 locked=0 (ID: 1752237113150-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"18","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752218290,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237113152-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 18 (ID: 1752237113152-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 18 (ID: 1752237113152-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113158-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237113165-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 23 (ID: 1752237113166-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 23 (ID: 1752237113166-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 18 (ID: 1752237113166-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 18 (ID: 1752237113166-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113179-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237113181-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237113217-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237113292-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237113293-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-152713000 locked=292313000 (ID: 1752237113294-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-405661200 locked=766500000 (ID: 1752237113294-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=748200 locked=0 (ID: 1752237113295-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120100000000000000 locked=220000000000000000 (ID: 1752237113296-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=179640000000000000 locked=0 (ID: 1752237113297-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=460000000000000 locked=0 (ID: 1752237113297-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"19","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752218290,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237113299-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 19 (ID: 1752237113299-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 19 (ID: 1752237113299-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113306-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237113306-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237113307-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237113307-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237113308-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237113312-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 23 (ID: 1752237113313-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 23 (ID: 1752237113313-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 19 (ID: 1752237113313-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 19 (ID: 1752237113313-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113397-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237113397-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237113398-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237113398-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237113399-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-193113000 locked=292313000 (ID: 1752237113400-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-365301600 locked=766500000 (ID: 1752237113400-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=788600 locked=0 (ID: 1752237113401-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100100000000000000 locked=200000000000000000 (ID: 1752237113401-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=199600000000000000 locked=0 (ID: 1752237113402-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=500000000000000 locked=0 (ID: 1752237113402-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"8","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752218290,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237113404-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 8 (ID: 1752237113404-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 8 (ID: 1752237113404-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113409-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237113410-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237113410-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237113411-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237113412-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237113417-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 23 (ID: 1752237113417-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 23 (ID: 1752237113417-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 8 (ID: 1752237113417-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 8 (ID: 1752237113417-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113433-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237113433-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237113434-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237113434-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237113435-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0x54bc63cd40c388b258d5ab5444d80df262c8c968f25bd2ca66bd64e14b1421b9, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=391513000 locked=0 (ID: 1752237113435-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=299600000000000000 locked=0 (ID: 1752237113436-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-99600000000000000 locked=199600000000000000 (ID: 1752237113436-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"186","blockHash":"0xaaaa9594f8a8a3931c33aea3286fd84043254ff6e5efcfda6d98befbaf33969d","txHash":"0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807","logIndex":23,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":24,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1759994290,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807","networkName":"network"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"24","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752218290","convertedTimestamp":1752218290}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 24 (ID: 1752237113438-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 24 (ID: 1752237113438-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113444-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-149600000000000000 locked=199600000000000000 (ID: 1752237113445-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50150000000000000 locked=200000000000000000 (ID: 1752237113445-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=550000000000000 locked=0 (ID: 1752237113446-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-268301600 locked=669500000 (ID: 1752237113446-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=488319000 locked=0 (ID: 1752237113447-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=982600 locked=0 (ID: 1752237113447-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"17","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752218290,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237113449-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 17 (ID: 1752237113449-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 17 (ID: 1752237113449-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113454-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237113455-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237113455-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237113456-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237113456-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237113461-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 17 (ID: 1752237113461-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 17 (ID: 1752237113461-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 24 (ID: 1752237113461-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 24 (ID: 1752237113461-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113476-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237113476-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237113477-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237113477-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237113478-0)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-199600000000000000 locked=199600000000000000 (ID: 1752237113478-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200000000000000 locked=200000000000000000 (ID: 1752237113479-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=600000000000000 locked=0 (ID: 1752237113479-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-171801600 locked=573000000 (ID: 1752237113480-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=584626000 locked=0 (ID: 1752237113480-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1175600 locked=0 (ID: 1752237113481-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"16","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752218290,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237113482-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 16 (ID: 1752237113482-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 16 (ID: 1752237113482-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113486-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237113487-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237113487-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237113488-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237113488-1)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":186,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":186,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 186, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237113492-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 16 (ID: 1752237113493-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 16 (ID: 1752237113493-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 24 (ID: 1752237113493-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 24 (ID: 1752237113493-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113506-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237113507-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237113507-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237113508-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237113508-1)
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 186, Transaction hash: 0xb58adbaa4fe0b715850a88d3281dde7ec4911a1f3fa3029995b018ee997b6807, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":186}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=199600000000000000 locked=0 (ID: 1752237113508-0)
2025-07-11T19:31:53: Block number: 186, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: 7:31:53 PM INFO  app        Indexed 58 events with 82.2% complete and 146ms remaining
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-76801600 locked=573000000 (ID: 1752237113524-0)
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-266801600 locked=668000000 (ID: 1752237113524-1)
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"189","blockHash":"0x9948fa51b2b890f3f090d59185ea3400b7ace0877c15d2560a608936b3c36088","txHash":"0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":25,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582","networkName":"network"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"25","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":189,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 189, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":189,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 25 (ID: 1752237113525-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 25 (ID: 1752237113525-0)
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113539-0)
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xa466dbfc7555a2213d551d642e536e233ab841ee1400a66462b0b12c2dc99582, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-171301600 locked=668000000 (ID: 1752237113540-0)
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-362301600 locked=763500000 (ID: 1752237113540-1)
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"189","blockHash":"0x9948fa51b2b890f3f090d59185ea3400b7ace0877c15d2560a608936b3c36088","txHash":"0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275","logIndex":8,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":26,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275","networkName":"network"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"26","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":189,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 189, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":189,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 26 (ID: 1752237113542-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 26 (ID: 1752237113542-0)
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113547-0)
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0x09339024e4de1d4ee4529b0008127c35a2f763ed37a17ff868bdccb1722c2275, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-266301600 locked=763500000 (ID: 1752237113547-0)
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-458301600 locked=859500000 (ID: 1752237113548-0)
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"189","blockHash":"0x9948fa51b2b890f3f090d59185ea3400b7ace0877c15d2560a608936b3c36088","txHash":"0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9","logIndex":12,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":27,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9","networkName":"network"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"27","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":189,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 189, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":189}
2025-07-11T19:31:53: Block number: 189, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":189,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 189, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 27 (ID: 1752237113549-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 27 (ID: 1752237113549-0)
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113554-0)
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 189, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 189, Transaction hash: 0xf861ba7940af9ff8e4359a1d36bb01f6b12a6249a5afe400b8223cbb9b8538b9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":190}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-361801600 locked=859500000 (ID: 1752237113555-0)
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":190}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-554801600 locked=956000000 (ID: 1752237113555-1)
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"190","blockHash":"0x27712c7f038f055326967ec3043b6939800f383c260e5d95ba655383edd504c3","txHash":"0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":28,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d","networkName":"network"}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"28","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":190}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":190}
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":190,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 190, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":190}
2025-07-11T19:31:53: Block number: 190, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":190,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 190, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 28 (ID: 1752237113556-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 28 (ID: 1752237113557-0)
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113561-0)
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 190, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 190, Transaction hash: 0xce7b7af9fbeee727fd2293cafdbbf18a5c60fe5bad8983823fa7b78b542c524d, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":191}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-457801600 locked=956000000 (ID: 1752237113562-0)
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":191}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-651801600 locked=1053000000 (ID: 1752237113562-1)
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"191","blockHash":"0xf2779e30e52d7add2b350d7b0669c364c42f903cd6ea42d65be00e59db9ac19b","txHash":"0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":29,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b","networkName":"network"}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"29","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":191}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":191}
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":191,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 191, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":191}
2025-07-11T19:31:53: Block number: 191, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":191,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 191, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 29 (ID: 1752237113564-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 29 (ID: 1752237113564-0)
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113568-0)
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 191, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 191, Transaction hash: 0xb82cc4dd48c5d27ab02abd5b6a74ca58947561fa4a40c00490722b7792b4b18b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39800000000000000 locked=200000000000000000 (ID: 1752237113568-0)
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40200000000000000 locked=240000000000000000 (ID: 1752237113568-1)
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"192","blockHash":"0xf79ac557b83c86142d0a829e3ad5a33ac1c9f42120a4497501dba7a40b8e3fed","txHash":"0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":30,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca","networkName":"network"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"30","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":192,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 192, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":192,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 30 (ID: 1752237113570-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 30 (ID: 1752237113570-0)
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113574-0)
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x4bd91108cf6484447d48cf0fd5816744bfa651cec004d3c7aceee1a3676184ca, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200000000000000 locked=240000000000000000 (ID: 1752237113574-0)
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80200000000000000 locked=280000000000000000 (ID: 1752237113574-1)
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"192","blockHash":"0xf79ac557b83c86142d0a829e3ad5a33ac1c9f42120a4497501dba7a40b8e3fed","txHash":"0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":31,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa","networkName":"network"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"31","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":192,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 192, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":192}
2025-07-11T19:31:53: Block number: 192, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":192,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 192, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 31 (ID: 1752237113576-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 31 (ID: 1752237113576-0)
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113581-0)
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 192, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 192, Transaction hash: 0x43c34a238924df0135dce73290d33aa254f412e551740306079d32cdbaac03fa, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":193}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40200000000000000 locked=280000000000000000 (ID: 1752237113581-0)
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":193}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120200000000000000 locked=320000000000000000 (ID: 1752237113581-1)
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"193","blockHash":"0x2573a79aef59176169402754531c7ce638239f2046487ceb1e9650b5d79474e4","txHash":"0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":32,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c","networkName":"network"}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"32","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":193}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":193}
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":193,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 193, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":193}
2025-07-11T19:31:53: Block number: 193, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":193,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 193, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 32 (ID: 1752237113583-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 32 (ID: 1752237113583-0)
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113587-0)
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 193, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 193, Transaction hash: 0xa620a7c63ab33512b77ae8ec0378e16a6fddacafa235036ca970666c18cdbf3c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80200000000000000 locked=320000000000000000 (ID: 1752237113588-0)
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160200000000000000 locked=360000000000000000 (ID: 1752237113588-1)
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"194","blockHash":"0xb3b524d1ab47215bbac320fdbf3cc6e3d57a4bba04245a639b6a63dce1d77630","txHash":"0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":33,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1","networkName":"network"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"33","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":194,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 194, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":194,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 33 (ID: 1752237113589-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 33 (ID: 1752237113589-0)
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113594-0)
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0x28a1036685f744c6b95a3a221e3fb5fe98efda001acfc4137041227c6afe3bb1, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120200000000000000 locked=360000000000000000 (ID: 1752237113594-0)
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200200000000000000 locked=400000000000000000 (ID: 1752237113595-0)
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"194","blockHash":"0xb3b524d1ab47215bbac320fdbf3cc6e3d57a4bba04245a639b6a63dce1d77630","txHash":"0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":34,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760009965,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9","networkName":"network"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"34","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233965","convertedTimestamp":1752233965}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":194,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 194, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":194}
2025-07-11T19:31:53: Block number: 194, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":194,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 194, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 34 (ID: 1752237113596-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 34 (ID: 1752237113596-0)
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113600-0)
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 194, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 194, Transaction hash: 0xfd6b92d398b6c7736ca49bbc66ada608165c3ac128109148d9299cb5255082d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=884626000 locked=0 (ID: 1752237113600-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-284626000 locked=584626000 (ID: 1752237113601-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"197","blockHash":"0xa306a9cdaaa448b39f5e4f756a3b7a497c61d20ad9ef0aa017c481d74ed660d1","txHash":"0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":35,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760009971,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce","networkName":"network"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"35","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233971","convertedTimestamp":1752233971}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 35 (ID: 1752237113602-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 35 (ID: 1752237113602-0)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113606-0)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-364626000 locked=584626000 (ID: 1752237113606-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-571881600 locked=1053000000 (ID: 1752237113607-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1255600 locked=0 (ID: 1752237113607-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160200000000000000 locked=360000000000000000 (ID: 1752237113608-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=239520000000000000 locked=0 (ID: 1752237113608-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=680000000000000 locked=0 (ID: 1752237113608-2)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"30","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752233971,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237113609-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 30 (ID: 1752237113609-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 30 (ID: 1752237113609-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113614-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237113618-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 35 (ID: 1752237113619-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 35 (ID: 1752237113619-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 30 (ID: 1752237113619-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 30 (ID: 1752237113619-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113629-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237113629-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237113630-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237113630-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237113630-2)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-445026000 locked=584626000 (ID: 1752237113631-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-491562000 locked=1053000000 (ID: 1752237113631-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1336000 locked=0 (ID: 1752237113632-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120200000000000000 locked=320000000000000000 (ID: 1752237113632-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=279440000000000000 locked=0 (ID: 1752237113632-2)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=760000000000000 locked=0 (ID: 1752237113633-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"31","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752233971,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237113634-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 31 (ID: 1752237113634-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 31 (ID: 1752237113634-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113638-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237113638-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237113639-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237113639-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237113639-2)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237113643-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 35 (ID: 1752237113643-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 35 (ID: 1752237113643-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 31 (ID: 1752237113643-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 31 (ID: 1752237113643-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113659-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237113659-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237113660-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237113660-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237113660-2)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-485426000 locked=584626000 (ID: 1752237113661-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-451202400 locked=1053000000 (ID: 1752237113661-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1376400 locked=0 (ID: 1752237113662-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100200000000000000 locked=300000000000000000 (ID: 1752237113662-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=299400000000000000 locked=0 (ID: 1752237113663-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=800000000000000 locked=0 (ID: 1752237113663-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"20","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752233971,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237113664-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 20 (ID: 1752237113664-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 20 (ID: 1752237113664-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113668-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237113669-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237113669-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237113670-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237113670-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237113674-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 35 (ID: 1752237113674-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 35 (ID: 1752237113674-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 20 (ID: 1752237113674-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 20 (ID: 1752237113675-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113687-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237113688-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237113688-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237113689-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237113689-1)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0x76f9dd1dd237bfe5889186b2c668184f262840a44089b34190531ec8761246ce, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=683826000 locked=0 (ID: 1752237113690-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=399400000000000000 locked=0 (ID: 1752237113691-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-199400000000000000 locked=299400000000000000 (ID: 1752237113691-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"197","blockHash":"0xa306a9cdaaa448b39f5e4f756a3b7a497c61d20ad9ef0aa017c481d74ed660d1","txHash":"0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3","logIndex":21,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":36,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760009971,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3","networkName":"network"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"36","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233971","convertedTimestamp":1752233971}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 36 (ID: 1752237113692-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 36 (ID: 1752237113692-0)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113697-0)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-249400000000000000 locked=299400000000000000 (ID: 1752237113698-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50250000000000000 locked=300000000000000000 (ID: 1752237113698-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=850000000000000 locked=0 (ID: 1752237113699-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-354202400 locked=956000000 (ID: 1752237113699-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=780632000 locked=0 (ID: 1752237113700-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1570400 locked=0 (ID: 1752237113700-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"29","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752233971,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237113701-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 29 (ID: 1752237113701-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 29 (ID: 1752237113701-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113705-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237113705-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237113706-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237113706-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237113707-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237113711-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 29 (ID: 1752237113711-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 29 (ID: 1752237113711-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 36 (ID: 1752237113711-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 36 (ID: 1752237113711-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113723-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237113723-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237113724-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237113725-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237113725-1)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-299400000000000000 locked=299400000000000000 (ID: 1752237113725-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-300000000000000 locked=300000000000000000 (ID: 1752237113726-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=900000000000000 locked=0 (ID: 1752237113726-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-257702400 locked=859500000 (ID: 1752237113726-2)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=876939000 locked=0 (ID: 1752237113727-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1763400 locked=0 (ID: 1752237113727-1)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"28","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752233971,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237113728-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 28 (ID: 1752237113728-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 28 (ID: 1752237113728-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113731-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237113732-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237113732-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237113732-2)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237113732-3)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":197,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":197,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 197, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237113736-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 28 (ID: 1752237113736-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 28 (ID: 1752237113736-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 36 (ID: 1752237113736-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 36 (ID: 1752237113736-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113748-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237113748-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237113749-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237113749-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237113749-2)
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 197, Transaction hash: 0xb39841945f4e1b5aa5b822049f27251cae415f3a5a77ddfbc7c1426d93c59bd3, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":197}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=299400000000000000 locked=0 (ID: 1752237113750-0)
2025-07-11T19:31:53: Block number: 197, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":201}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-162702400 locked=859500000 (ID: 1752237113750-1)
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":201}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-352702400 locked=954500000 (ID: 1752237113751-0)
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"201","blockHash":"0xbff5edff7f52dcd39f6eee797945cd4361a06abaf9ddc5da185b6ec2db728cf7","txHash":"0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":37,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e","networkName":"network"}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"37","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":201}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":201}
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":201,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 201, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":201}
2025-07-11T19:31:53: Block number: 201, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":201,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 201, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 37 (ID: 1752237113752-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 37 (ID: 1752237113752-0)
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113757-0)
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 201, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 201, Transaction hash: 0x82cfe098b42ce6a9da6cbff32c99739fd464969a967f9621b94b55b0cc53361e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-257202400 locked=954500000 (ID: 1752237113757-0)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-448202400 locked=1050000000 (ID: 1752237113758-0)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"202","blockHash":"0xfd8bbe279bc365124e5cbdb6fdfa89bd0d3b761a09f11b859d47032fc0893dd5","txHash":"0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":38,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332","networkName":"network"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"38","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 38 (ID: 1752237113759-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 38 (ID: 1752237113759-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113764-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xe0222f25718b0b05c255ad408062eca7a5561a08af1777cf4867ae2e8e42e332, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-352202400 locked=1050000000 (ID: 1752237113764-0)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-544202400 locked=1146000000 (ID: 1752237113764-1)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"202","blockHash":"0xfd8bbe279bc365124e5cbdb6fdfa89bd0d3b761a09f11b859d47032fc0893dd5","txHash":"0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":39,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969","networkName":"network"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"39","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 39 (ID: 1752237113766-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 39 (ID: 1752237113766-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113770-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xd09ea15582bae058442a3fd844ad248058ddfd613d4858c1285627b8dc2e7969, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-447702400 locked=1146000000 (ID: 1752237113771-0)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-640702400 locked=1242500000 (ID: 1752237113771-1)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"202","blockHash":"0xfd8bbe279bc365124e5cbdb6fdfa89bd0d3b761a09f11b859d47032fc0893dd5","txHash":"0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":40,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4","networkName":"network"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"40","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 40 (ID: 1752237113772-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 40 (ID: 1752237113773-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113777-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0xfdd9c0b2dc18611641106d55c61e6ca25d5be8e5cc858e681d487e7f45ae8ee4, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-543702400 locked=1242500000 (ID: 1752237113778-0)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-737702400 locked=1339500000 (ID: 1752237113778-1)
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"202","blockHash":"0xfd8bbe279bc365124e5cbdb6fdfa89bd0d3b761a09f11b859d47032fc0893dd5","txHash":"0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":41,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa","networkName":"network"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"41","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":202,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202}
2025-07-11T19:31:53: Block number: 202, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":202,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 202, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 41 (ID: 1752237113779-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 41 (ID: 1752237113779-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113784-0)
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 202, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 202, Transaction hash: 0x6f3b1b5a82c2eb990890abb404af5c498e968fed86d45ea422ea5728c9ddbbaa, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39700000000000000 locked=300000000000000000 (ID: 1752237113785-0)
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40300000000000000 locked=340000000000000000 (ID: 1752237113785-1)
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"203","blockHash":"0x7a3be7a0d32a1ef92666e0385a214cf80787a6844c480980e472782b79c42591","txHash":"0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":42,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958","networkName":"network"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"42","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":203,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 203, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":203,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 42 (ID: 1752237113786-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 42 (ID: 1752237113786-0)
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113791-0)
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x62830a53231e385fa6607e69a113534bb5634712cbc6be1dd5f8bc3453f69958, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-300000000000000 locked=340000000000000000 (ID: 1752237113791-0)
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80300000000000000 locked=380000000000000000 (ID: 1752237113792-0)
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"203","blockHash":"0x7a3be7a0d32a1ef92666e0385a214cf80787a6844c480980e472782b79c42591","txHash":"0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":43,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d","networkName":"network"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"43","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":203,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 203, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":203,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 43 (ID: 1752237113793-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 43 (ID: 1752237113793-0)
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113798-0)
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x028c00da2efc7a8a0fd983e8042f0c80d5b3915b62f0930dc1a7dacb22243a1d, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40300000000000000 locked=380000000000000000 (ID: 1752237113798-0)
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120300000000000000 locked=420000000000000000 (ID: 1752237113798-1)
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"203","blockHash":"0x7a3be7a0d32a1ef92666e0385a214cf80787a6844c480980e472782b79c42591","txHash":"0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":44,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda","networkName":"network"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"44","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":203,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 203, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":203}
2025-07-11T19:31:53: Block number: 203, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":203,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 203, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 44 (ID: 1752237113800-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 44 (ID: 1752237113800-0)
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113805-0)
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 203, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 203, Transaction hash: 0x8c5186e07e4b7acd66170eb2eea3138378ad7fe93c7961a73e559e311f453cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80300000000000000 locked=420000000000000000 (ID: 1752237113805-0)
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160300000000000000 locked=460000000000000000 (ID: 1752237113805-1)
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"204","blockHash":"0x20b79f11206f4e81a787fcf43397c83060230d0ea5ef18384665585196f96b09","txHash":"0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":45,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e","networkName":"network"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"45","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":204,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 204, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":204,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 45 (ID: 1752237113806-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 45 (ID: 1752237113807-0)
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113812-0)
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0xcbc4dbd9c5eb99999db2206e6d3a5db03681134af978782c6b5ab22c6891520e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120300000000000000 locked=460000000000000000 (ID: 1752237113812-0)
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200300000000000000 locked=500000000000000000 (ID: 1752237113813-0)
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"204","blockHash":"0x20b79f11206f4e81a787fcf43397c83060230d0ea5ef18384665585196f96b09","txHash":"0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":46,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760009987,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e","networkName":"network"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"46","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233987","convertedTimestamp":1752233987}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":204,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 204, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":204}
2025-07-11T19:31:53: Block number: 204, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":204,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 204, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 46 (ID: 1752237113814-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 46 (ID: 1752237113814-0)
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113819-0)
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 204, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 204, Transaction hash: 0x4016b987ea6d179faa7b2211f1b86224367aaf8ed0d20872fa2aea410b90867e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1176939000 locked=0 (ID: 1752237113819-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-576939000 locked=876939000 (ID: 1752237113819-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"208","blockHash":"0xd4879d293102dea7137ede44bb19a042f600214b0db97b054e39456739b5691a","txHash":"0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":47,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760009993,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1","networkName":"network"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"47","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233993","convertedTimestamp":1752233993}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 47 (ID: 1752237113821-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 47 (ID: 1752237113821-0)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237113826-0)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-656939000 locked=876939000 (ID: 1752237113826-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-657782400 locked=1339500000 (ID: 1752237113827-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1843400 locked=0 (ID: 1752237113827-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160300000000000000 locked=460000000000000000 (ID: 1752237113828-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=339320000000000000 locked=0 (ID: 1752237113828-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=980000000000000 locked=0 (ID: 1752237113828-2)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"42","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752233993,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237113829-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 42 (ID: 1752237113829-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 42 (ID: 1752237113830-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113834-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237113834-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237113835-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237113835-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237113836-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237113839-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 47 (ID: 1752237113839-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 47 (ID: 1752237113840-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 42 (ID: 1752237113840-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 42 (ID: 1752237113840-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237113852-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237113853-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237113853-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237113854-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237113855-0)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-737339000 locked=876939000 (ID: 1752237113855-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-577462800 locked=1339500000 (ID: 1752237113856-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1923800 locked=0 (ID: 1752237113856-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120300000000000000 locked=420000000000000000 (ID: 1752237113856-2)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=379240000000000000 locked=0 (ID: 1752237113857-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1060000000000000 locked=0 (ID: 1752237113857-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"43","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752233993,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237113858-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 43 (ID: 1752237113858-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 43 (ID: 1752237113858-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113863-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237113863-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237113863-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237113864-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237113865-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237113869-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 47 (ID: 1752237113869-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 47 (ID: 1752237113869-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 43 (ID: 1752237113869-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 43 (ID: 1752237113869-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113882-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237113883-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237113883-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237113884-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237113884-1)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-777739000 locked=876939000 (ID: 1752237113885-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-537103200 locked=1339500000 (ID: 1752237113885-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1964200 locked=0 (ID: 1752237113886-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100300000000000000 locked=400000000000000000 (ID: 1752237113886-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=399200000000000000 locked=0 (ID: 1752237113887-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1100000000000000 locked=0 (ID: 1752237113887-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"20","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752233993,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237113888-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 20 (ID: 1752237113888-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 20 (ID: 1752237113888-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113893-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237113893-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237113894-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237113894-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237113895-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237113899-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 47 (ID: 1752237113899-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 47 (ID: 1752237113899-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 20 (ID: 1752237113899-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 20 (ID: 1752237113899-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113912-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237113913-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237113913-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237113914-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237113914-1)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x6b9fdb8d9b81ad707f4407010a5900dd67a504fdb9a4ef57da6a46a5743618b1, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=976139000 locked=0 (ID: 1752237113915-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=499200000000000000 locked=0 (ID: 1752237113915-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-299200000000000000 locked=399200000000000000 (ID: 1752237113915-2)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"208","blockHash":"0xd4879d293102dea7137ede44bb19a042f600214b0db97b054e39456739b5691a","txHash":"0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd","logIndex":20,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":48,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760009993,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd","networkName":"network"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"48","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752233993","convertedTimestamp":1752233993}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell open 48 (ID: 1752237113917-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 48 (ID: 1752237113917-0)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237113922-0)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-349200000000000000 locked=399200000000000000 (ID: 1752237113922-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50350000000000000 locked=400000000000000000 (ID: 1752237113923-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1150000000000000 locked=0 (ID: 1752237113923-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-440103200 locked=1242500000 (ID: 1752237113925-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1072945000 locked=0 (ID: 1752237113925-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2158200 locked=0 (ID: 1752237113926-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"41","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752233993,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237113927-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 41 (ID: 1752237113927-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 41 (ID: 1752237113927-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113931-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237113931-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237113932-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237113932-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237113932-2)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237113936-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 41 (ID: 1752237113936-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 41 (ID: 1752237113936-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 48 (ID: 1752237113936-1)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 48 (ID: 1752237113936-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237113949-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237113950-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237113950-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237113951-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237113951-1)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-399200000000000000 locked=399200000000000000 (ID: 1752237113951-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-400000000000000 locked=400000000000000000 (ID: 1752237113952-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1200000000000000 locked=0 (ID: 1752237113952-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-343603200 locked=1146000000 (ID: 1752237113953-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1169252000 locked=0 (ID: 1752237113953-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2351200 locked=0 (ID: 1752237113954-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"40","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752233993,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237113955-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 40 (ID: 1752237113955-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 40 (ID: 1752237113955-0)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113959-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237113960-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237113960-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237113961-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237113961-1)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":208,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":208,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 208, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237113965-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy filled 40 (ID: 1752237113965-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 40 (ID: 1752237113966-0)
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc sell filled 48 (ID: 1752237113966-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc trade 48 (ID: 1752237113966-1)
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113978-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237113979-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237113979-1)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237113980-0)
2025-07-11T19:31:53: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237113980-1)
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:53: Block number: 208, Transaction hash: 0x22d28063ad92bf67bcee32ff53c2dafd53aa91cfc0d7f2b72243c17c17d997bd, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":208}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=399200000000000000 locked=0 (ID: 1752237113980-0)
2025-07-11T19:31:53: Block number: 208, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-248603200 locked=1146000000 (ID: 1752237113981-0)
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-438603200 locked=1241000000 (ID: 1752237113981-1)
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"210","blockHash":"0x0f30f1e9b84670a60c7f387b5cc1a09b4c0755abfbdbb2474824acbfacba1082","txHash":"0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":49,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea","networkName":"network"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"49","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 49 (ID: 1752237113982-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 49 (ID: 1752237113982-0)
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113987-0)
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x0884938c9d2176a26f31338a2bdce5f55317165e90ca7a83479a03dd1ca8a3ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-343103200 locked=1241000000 (ID: 1752237113988-0)
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-534103200 locked=1336500000 (ID: 1752237113988-1)
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"210","blockHash":"0x0f30f1e9b84670a60c7f387b5cc1a09b4c0755abfbdbb2474824acbfacba1082","txHash":"0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb","logIndex":10,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":50,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb","networkName":"network"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"50","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 50 (ID: 1752237113989-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 50 (ID: 1752237113989-0)
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:53: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237113994-0)
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0x2a9e9a2c5f3ec6ec383fd979f28299e3718fa0592c0139623ed5f73970973dfb, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-438103200 locked=1336500000 (ID: 1752237113994-0)
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-630103200 locked=1432500000 (ID: 1752237113994-1)
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"210","blockHash":"0x0f30f1e9b84670a60c7f387b5cc1a09b4c0755abfbdbb2474824acbfacba1082","txHash":"0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c","logIndex":14,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":51,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c","networkName":"network"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"51","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:53: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:53: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210}
2025-07-11T19:31:53: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210,"found":true,"dataLength":476}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:53: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:53: [REDIS STREAM] Published order event: mwethmusdc buy open 51 (ID: 1752237113995-0)
2025-07-11T19:31:53: [REDIS STREAM] Published execution report: mwethmusdc new 51 (ID: 1752237113996-0)
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114000-0)
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xb93eef98f061f28a13a27f1a37488e4992259063daabd0190d41a4e22672129c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-533603200 locked=1432500000 (ID: 1752237114001-0)
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":210}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-726603200 locked=1529000000 (ID: 1752237114001-1)
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"210","blockHash":"0x0f30f1e9b84670a60c7f387b5cc1a09b4c0755abfbdbb2474824acbfacba1082","txHash":"0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42","logIndex":18,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":52,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42","networkName":"network"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"52","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":210}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210}
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":210,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210}
2025-07-11T19:31:54: Block number: 210, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":210,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 210, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 52 (ID: 1752237114002-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 52 (ID: 1752237114003-0)
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114007-0)
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 210, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 210, Transaction hash: 0xedffc539a7131e3eebf26e8692aa3770b3ed6f541f224afd06d04376c4e3ae42, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":211}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-629603200 locked=1529000000 (ID: 1752237114008-0)
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":211}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-823603200 locked=1626000000 (ID: 1752237114008-1)
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"211","blockHash":"0xa90cc00a1d2e1f760ffd7d5c16b955b5841327e56e9cfccafe9e0b5f34cb94e4","txHash":"0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":53,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414","networkName":"network"}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"53","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":211}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":211}
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":211,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 211, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":211}
2025-07-11T19:31:54: Block number: 211, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":211,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 211, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 53 (ID: 1752237114009-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 53 (ID: 1752237114009-0)
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114013-0)
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 211, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 211, Transaction hash: 0xd4cddd98e02e9fe7c4d12a46b55b7f9aae9e1661ffb18f76dde5d72ac7018414, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39600000000000000 locked=400000000000000000 (ID: 1752237114014-0)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40400000000000000 locked=440000000000000000 (ID: 1752237114014-1)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"212","blockHash":"0xdd59d62aee5e5be261e8ba261eab9ff37a5c6fca351d04098291684879045c5a","txHash":"0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":54,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16","networkName":"network"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"54","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 54 (ID: 1752237114015-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 54 (ID: 1752237114015-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114019-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x542e9318931a260308a63dc59b6510d74c91f3201866810820d4d50b3fb36a16, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-400000000000000 locked=440000000000000000 (ID: 1752237114019-0)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80400000000000000 locked=480000000000000000 (ID: 1752237114019-1)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"212","blockHash":"0xdd59d62aee5e5be261e8ba261eab9ff37a5c6fca351d04098291684879045c5a","txHash":"0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":55,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916","networkName":"network"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"55","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 55 (ID: 1752237114021-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 55 (ID: 1752237114021-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114026-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x4a77382b2ba3612c770cd0e210ba134e92a2d4e70f61db79d76dba6456ab8916, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40400000000000000 locked=480000000000000000 (ID: 1752237114027-0)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120400000000000000 locked=520000000000000000 (ID: 1752237114027-1)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"212","blockHash":"0xdd59d62aee5e5be261e8ba261eab9ff37a5c6fca351d04098291684879045c5a","txHash":"0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":56,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b","networkName":"network"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"56","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 56 (ID: 1752237114028-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 56 (ID: 1752237114028-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114033-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0xc3e468295c43173d577e91e80607a1bfb7276809546108b130dfbd462d183b5b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80400000000000000 locked=520000000000000000 (ID: 1752237114033-0)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160400000000000000 locked=560000000000000000 (ID: 1752237114033-1)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"212","blockHash":"0xdd59d62aee5e5be261e8ba261eab9ff37a5c6fca351d04098291684879045c5a","txHash":"0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":57,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb","networkName":"network"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"57","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 57 (ID: 1752237114035-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 57 (ID: 1752237114035-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114040-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x92e8a9946a7333574b12df8b516983e340b0923ffc8754ae337e3c3944c340cb, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120400000000000000 locked=560000000000000000 (ID: 1752237114041-0)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200400000000000000 locked=600000000000000000 (ID: 1752237114041-1)
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"212","blockHash":"0xdd59d62aee5e5be261e8ba261eab9ff37a5c6fca351d04098291684879045c5a","txHash":"0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":58,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010009,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5","networkName":"network"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"58","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234009","convertedTimestamp":1752234009}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":212,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212}
2025-07-11T19:31:54: Block number: 212, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":212,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 212, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 58 (ID: 1752237114043-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 58 (ID: 1752237114043-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114048-0)
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 212, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 212, Transaction hash: 0x0b7a990dd75f3e89165bc182d5a0032a13d07b97c9f234da44ca1a319c0797f5, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1469252000 locked=0 (ID: 1752237114048-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-869252000 locked=1169252000 (ID: 1752237114048-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"217","blockHash":"0x3c14fec9e258dc4dc64b0b832653108693d3b88772d3c60836fd2560f79b6eb7","txHash":"0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":59,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010014,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b","networkName":"network"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"59","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234014","convertedTimestamp":1752234014}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 59 (ID: 1752237114050-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 59 (ID: 1752237114050-0)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114055-0)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-949252000 locked=1169252000 (ID: 1752237114056-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-743683200 locked=1626000000 (ID: 1752237114056-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2431200 locked=0 (ID: 1752237114057-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160400000000000000 locked=560000000000000000 (ID: 1752237114057-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=439120000000000000 locked=0 (ID: 1752237114057-2)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1280000000000000 locked=0 (ID: 1752237114058-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"54","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234014,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237114059-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 54 (ID: 1752237114059-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 54 (ID: 1752237114059-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114063-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114064-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114065-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237114069-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 59 (ID: 1752237114069-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 59 (ID: 1752237114069-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 54 (ID: 1752237114069-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 54 (ID: 1752237114069-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114081-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114081-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114082-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114082-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114083-0)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1029652000 locked=1169252000 (ID: 1752237114083-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-663363600 locked=1626000000 (ID: 1752237114084-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2511600 locked=0 (ID: 1752237114084-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120400000000000000 locked=520000000000000000 (ID: 1752237114085-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=479040000000000000 locked=0 (ID: 1752237114085-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1360000000000000 locked=0 (ID: 1752237114085-2)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"55","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234014,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237114086-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 55 (ID: 1752237114087-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 55 (ID: 1752237114087-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114092-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114092-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114092-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114093-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114093-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237114098-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 59 (ID: 1752237114098-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 59 (ID: 1752237114098-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 55 (ID: 1752237114098-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 55 (ID: 1752237114098-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114112-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114113-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114113-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114114-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114114-1)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1070052000 locked=1169252000 (ID: 1752237114115-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-623004000 locked=1626000000 (ID: 1752237114115-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2552000 locked=0 (ID: 1752237114115-2)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100400000000000000 locked=500000000000000000 (ID: 1752237114116-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=499000000000000000 locked=0 (ID: 1752237114116-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1400000000000000 locked=0 (ID: 1752237114117-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"32","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234014,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237114117-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 32 (ID: 1752237114118-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 32 (ID: 1752237114118-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114121-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114122-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114122-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114123-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114123-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237114127-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 59 (ID: 1752237114127-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 59 (ID: 1752237114127-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 32 (ID: 1752237114127-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 32 (ID: 1752237114128-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114139-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114139-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114140-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114140-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114141-0)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xe609c7e48b84ebaf8e14b1d90ea6ebd33f5266ee0a91df4f3c5422e977a9c67b, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1268452000 locked=0 (ID: 1752237114141-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=599000000000000000 locked=0 (ID: 1752237114141-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-399000000000000000 locked=499000000000000000 (ID: 1752237114142-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"217","blockHash":"0x3c14fec9e258dc4dc64b0b832653108693d3b88772d3c60836fd2560f79b6eb7","txHash":"0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc","logIndex":20,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":60,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010014,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc","networkName":"network"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"60","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234014","convertedTimestamp":1752234014}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 60 (ID: 1752237114143-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 60 (ID: 1752237114143-0)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114148-0)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-449000000000000000 locked=499000000000000000 (ID: 1752237114148-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50450000000000000 locked=500000000000000000 (ID: 1752237114149-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1450000000000000 locked=0 (ID: 1752237114149-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-526004000 locked=1529000000 (ID: 1752237114150-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1365258000 locked=0 (ID: 1752237114150-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2746000 locked=0 (ID: 1752237114151-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"53","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234014,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237114151-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 53 (ID: 1752237114152-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 53 (ID: 1752237114152-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114156-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114157-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114157-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114157-2)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114158-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237114162-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 53 (ID: 1752237114162-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 53 (ID: 1752237114162-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 60 (ID: 1752237114163-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 60 (ID: 1752237114163-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114176-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114177-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114177-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114178-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114178-1)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-499000000000000000 locked=499000000000000000 (ID: 1752237114178-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-500000000000000 locked=500000000000000000 (ID: 1752237114179-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1500000000000000 locked=0 (ID: 1752237114179-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-429504000 locked=1432500000 (ID: 1752237114180-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1461565000 locked=0 (ID: 1752237114180-1)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2939000 locked=0 (ID: 1752237114180-2)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"52","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234014,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237114181-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 52 (ID: 1752237114182-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 52 (ID: 1752237114182-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114186-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114186-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114187-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114187-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114188-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":217,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":217,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 217, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237114192-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 52 (ID: 1752237114192-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 52 (ID: 1752237114192-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 60 (ID: 1752237114192-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 60 (ID: 1752237114192-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114208-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114208-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114209-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114209-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114209-2)
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 217, Transaction hash: 0xce3d9102857e69461433e2a9230d14495051898ed46d1c13b0e2df165eaba6bc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":217}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=499000000000000000 locked=0 (ID: 1752237114210-0)
2025-07-11T19:31:54: Block number: 217, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-334504000 locked=1432500000 (ID: 1752237114211-0)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-524504000 locked=1527500000 (ID: 1752237114211-1)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"222","blockHash":"0xadef137e985324bf2904644dc7ddd9766ff575c0b17dc47aafc265c21eab44eb","txHash":"0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":61,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688","networkName":"network"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"61","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 61 (ID: 1752237114212-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 61 (ID: 1752237114212-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114218-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xf82bd2cc1cae814a517422c805ee302186727f9030da96969aac6b80b78e4688, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-429004000 locked=1527500000 (ID: 1752237114218-0)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-620004000 locked=1623000000 (ID: 1752237114218-1)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"222","blockHash":"0xadef137e985324bf2904644dc7ddd9766ff575c0b17dc47aafc265c21eab44eb","txHash":"0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":62,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27","networkName":"network"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"62","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 62 (ID: 1752237114220-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 62 (ID: 1752237114220-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114226-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x421f06594c04808a284d2f5b6daa17a1f276b84047c2dbecc257b71ce841da27, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-524004000 locked=1623000000 (ID: 1752237114227-0)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-716004000 locked=1719000000 (ID: 1752237114227-1)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"222","blockHash":"0xadef137e985324bf2904644dc7ddd9766ff575c0b17dc47aafc265c21eab44eb","txHash":"0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":63,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db","networkName":"network"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"63","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 63 (ID: 1752237114229-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 63 (ID: 1752237114229-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114234-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0x2b7aeb265df537cc3619052efdf05fd02e5b2b04add8487e2bbc9bd41f05d7db, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-619504000 locked=1719000000 (ID: 1752237114234-0)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-812504000 locked=1815500000 (ID: 1752237114235-0)
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"222","blockHash":"0xadef137e985324bf2904644dc7ddd9766ff575c0b17dc47aafc265c21eab44eb","txHash":"0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":64,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1","networkName":"network"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"64","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":222,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222}
2025-07-11T19:31:54: Block number: 222, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":222,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 222, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 64 (ID: 1752237114236-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 64 (ID: 1752237114236-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114241-0)
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 222, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 222, Transaction hash: 0xd98ecb9cc45e00b33a7b401d16e31498b4182dbe655749350d3c210aadba78b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":223}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-715504000 locked=1815500000 (ID: 1752237114242-0)
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":223}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-909504000 locked=1912500000 (ID: 1752237114242-1)
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"223","blockHash":"0x14e9ea011dbfded904b279e83b40111c5ce381fb55c8276d24456d75b590a4d7","txHash":"0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":65,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b","networkName":"network"}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"65","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":223}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":223}
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":223,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 223, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":223}
2025-07-11T19:31:54: Block number: 223, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":223,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 223, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 65 (ID: 1752237114243-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 65 (ID: 1752237114243-0)
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114248-0)
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 223, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 223, Transaction hash: 0x079baa54217d84eb612f11e5b921515f1602a56878e0df026802b28611325d7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39500000000000000 locked=500000000000000000 (ID: 1752237114249-0)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40500000000000000 locked=540000000000000000 (ID: 1752237114249-1)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"224","blockHash":"0x10993a026c1c64632fb378258e9753d5f92520e658d8b0fc3c60c2a2d1304582","txHash":"0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":66,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d","networkName":"network"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"66","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 66 (ID: 1752237114250-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 66 (ID: 1752237114250-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114256-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3cffc71568b1d38dc4ad307c32d5bb0837a81e829ad52fb1c7716979e67f036d, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-500000000000000 locked=540000000000000000 (ID: 1752237114256-0)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80500000000000000 locked=580000000000000000 (ID: 1752237114256-1)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"224","blockHash":"0x10993a026c1c64632fb378258e9753d5f92520e658d8b0fc3c60c2a2d1304582","txHash":"0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":67,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27","networkName":"network"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"67","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 67 (ID: 1752237114258-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 67 (ID: 1752237114258-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114263-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xbe6d76354b3d6bfe865a9fbdb25e0724b8d00deca6a396bc133a335ab81f9f27, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40500000000000000 locked=580000000000000000 (ID: 1752237114263-0)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120500000000000000 locked=620000000000000000 (ID: 1752237114263-1)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"224","blockHash":"0x10993a026c1c64632fb378258e9753d5f92520e658d8b0fc3c60c2a2d1304582","txHash":"0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":68,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea","networkName":"network"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"68","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 68 (ID: 1752237114265-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 68 (ID: 1752237114265-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114269-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x3c4e5c8942f78132cbc17c2db16bd5a5907e0415a96bc95cf87448cbdab647ea, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80500000000000000 locked=620000000000000000 (ID: 1752237114270-0)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160500000000000000 locked=660000000000000000 (ID: 1752237114270-1)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"224","blockHash":"0x10993a026c1c64632fb378258e9753d5f92520e658d8b0fc3c60c2a2d1304582","txHash":"0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":69,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63","networkName":"network"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"69","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 69 (ID: 1752237114271-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 69 (ID: 1752237114271-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114276-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0x46fa505e10d8034d3d44012ee9ea14814a433f69efabfa977cb33e5c4bdb8e63, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120500000000000000 locked=660000000000000000 (ID: 1752237114277-0)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200500000000000000 locked=700000000000000000 (ID: 1752237114277-1)
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"224","blockHash":"0x10993a026c1c64632fb378258e9753d5f92520e658d8b0fc3c60c2a2d1304582","txHash":"0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":70,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010031,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9","networkName":"network"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"70","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234031","convertedTimestamp":1752234031}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":224,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224}
2025-07-11T19:31:54: Block number: 224, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":224,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 224, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 70 (ID: 1752237114278-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 70 (ID: 1752237114278-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114283-0)
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 224, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 224, Transaction hash: 0xdb7cbf4d5895bfdfb8a8b7c71195c61296876dfd3208177337e2216444caa8d9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1761565000 locked=0 (ID: 1752237114284-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1161565000 locked=1461565000 (ID: 1752237114284-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"227","blockHash":"0x9711f8e8717e4e615fc342190b11acbbfe0ec4e805c43509e2ef2e5aa1bc5d3f","txHash":"0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":71,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010036,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e","networkName":"network"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"71","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234036","convertedTimestamp":1752234036}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 71 (ID: 1752237114285-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 71 (ID: 1752237114285-0)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114290-0)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1241565000 locked=1461565000 (ID: 1752237114291-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-829584000 locked=1912500000 (ID: 1752237114291-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3019000 locked=0 (ID: 1752237114292-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160500000000000000 locked=660000000000000000 (ID: 1752237114292-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=538920000000000000 locked=0 (ID: 1752237114292-2)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1580000000000000 locked=0 (ID: 1752237114293-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"66","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234036,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237114294-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 66 (ID: 1752237114294-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 66 (ID: 1752237114294-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114299-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114299-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114300-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114300-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114301-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237114305-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 71 (ID: 1752237114305-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 71 (ID: 1752237114305-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 66 (ID: 1752237114305-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 66 (ID: 1752237114305-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114318-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114319-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114319-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114320-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114320-1)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1321965000 locked=1461565000 (ID: 1752237114321-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-749264400 locked=1912500000 (ID: 1752237114321-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3099400 locked=0 (ID: 1752237114322-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120500000000000000 locked=620000000000000000 (ID: 1752237114322-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=578840000000000000 locked=0 (ID: 1752237114322-2)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1660000000000000 locked=0 (ID: 1752237114323-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"67","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234036,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237114324-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 67 (ID: 1752237114324-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 67 (ID: 1752237114324-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114328-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114329-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114329-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114330-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114330-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237114334-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 71 (ID: 1752237114334-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 71 (ID: 1752237114334-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 67 (ID: 1752237114334-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 67 (ID: 1752237114334-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114346-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114346-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114347-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114347-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114347-2)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1362365000 locked=1461565000 (ID: 1752237114348-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-708904800 locked=1912500000 (ID: 1752237114348-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3139800 locked=0 (ID: 1752237114349-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100500000000000000 locked=600000000000000000 (ID: 1752237114349-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=598800000000000000 locked=0 (ID: 1752237114349-2)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1700000000000000 locked=0 (ID: 1752237114350-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"32","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234036,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237114351-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 32 (ID: 1752237114351-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 32 (ID: 1752237114351-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114355-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114356-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114356-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114357-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114357-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237114361-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 71 (ID: 1752237114361-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 71 (ID: 1752237114361-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 32 (ID: 1752237114361-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 32 (ID: 1752237114361-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114374-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114375-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114375-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114375-2)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114376-0)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xa73b68f695b2c8a167a445b98217e83a3158d7bfd8c1e3cda8e157b228ff356e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1560765000 locked=0 (ID: 1752237114376-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=698800000000000000 locked=0 (ID: 1752237114377-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-498800000000000000 locked=598800000000000000 (ID: 1752237114377-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"227","blockHash":"0x9711f8e8717e4e615fc342190b11acbbfe0ec4e805c43509e2ef2e5aa1bc5d3f","txHash":"0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":72,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010036,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2","networkName":"network"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"72","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234036","convertedTimestamp":1752234036}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 72 (ID: 1752237114378-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 72 (ID: 1752237114378-0)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114383-0)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-548800000000000000 locked=598800000000000000 (ID: 1752237114384-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50550000000000000 locked=600000000000000000 (ID: 1752237114384-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1750000000000000 locked=0 (ID: 1752237114385-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-611904800 locked=1815500000 (ID: 1752237114385-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1657571000 locked=0 (ID: 1752237114385-2)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3333800 locked=0 (ID: 1752237114386-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"65","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234036,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237114387-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 65 (ID: 1752237114387-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 65 (ID: 1752237114387-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114391-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114392-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114392-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114393-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114393-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237114397-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 65 (ID: 1752237114397-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 65 (ID: 1752237114397-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 72 (ID: 1752237114397-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 72 (ID: 1752237114397-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114410-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114410-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114411-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114412-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114412-1)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-598800000000000000 locked=598800000000000000 (ID: 1752237114413-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-600000000000000 locked=600000000000000000 (ID: 1752237114413-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1800000000000000 locked=0 (ID: 1752237114413-2)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-515404800 locked=1719000000 (ID: 1752237114414-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1753878000 locked=0 (ID: 1752237114414-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3526800 locked=0 (ID: 1752237114415-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"64","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234036,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237114416-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 64 (ID: 1752237114416-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 64 (ID: 1752237114416-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114420-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114421-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114421-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114422-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114422-1)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":227,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":227,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 227, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237114426-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 64 (ID: 1752237114426-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 64 (ID: 1752237114426-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 72 (ID: 1752237114426-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 72 (ID: 1752237114426-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114440-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114440-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114441-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114441-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114441-2)
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 227, Transaction hash: 0xc03420eba2be1924f6afcde105b49cdd1dc70b1c4c935f7dcd671722c44207e2, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":227}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=598800000000000000 locked=0 (ID: 1752237114442-0)
2025-07-11T19:31:54: Block number: 227, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-420404800 locked=1719000000 (ID: 1752237114442-1)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-610404800 locked=1814000000 (ID: 1752237114443-0)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"230","blockHash":"0xc7f31a69ff5033044e09499a75a88eebed969c6fea9ac20167cd4452898267fa","txHash":"0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":73,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca","networkName":"network"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"73","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 73 (ID: 1752237114444-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 73 (ID: 1752237114444-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114449-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x9b440f410805f499d05cdb9afcbdef3fd75bd46c0f38eda4120d1696f7787eca, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-514904800 locked=1814000000 (ID: 1752237114450-0)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-705904800 locked=1909500000 (ID: 1752237114450-1)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"230","blockHash":"0xc7f31a69ff5033044e09499a75a88eebed969c6fea9ac20167cd4452898267fa","txHash":"0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83","logIndex":9,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":74,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83","networkName":"network"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"74","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 74 (ID: 1752237114452-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 74 (ID: 1752237114452-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114457-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x1e70e959da8b9c293575820c2051edb1d716737f2dc6396c881c9b78fe7f8b83, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-609904800 locked=1909500000 (ID: 1752237114458-0)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-801904800 locked=2005500000 (ID: 1752237114458-1)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"230","blockHash":"0xc7f31a69ff5033044e09499a75a88eebed969c6fea9ac20167cd4452898267fa","txHash":"0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916","logIndex":13,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":75,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916","networkName":"network"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"75","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 75 (ID: 1752237114459-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 75 (ID: 1752237114459-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114465-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x12249cba2c85555266242ab3567c8e00dc948eba74fa34eddecb4c138f196916, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-705404800 locked=2005500000 (ID: 1752237114465-0)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-898404800 locked=2102000000 (ID: 1752237114465-1)
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"230","blockHash":"0xc7f31a69ff5033044e09499a75a88eebed969c6fea9ac20167cd4452898267fa","txHash":"0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e","logIndex":17,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":76,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e","networkName":"network"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"76","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":230,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230}
2025-07-11T19:31:54: Block number: 230, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":230,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 230, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 76 (ID: 1752237114467-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 76 (ID: 1752237114467-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114472-0)
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 230, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 230, Transaction hash: 0x0ac6cf82a55a7a03e4feea983c2681acccd9d5f5841a2c5d4aab724fb09e594e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":231}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-801404800 locked=2102000000 (ID: 1752237114472-0)
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":231}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-995404800 locked=2199000000 (ID: 1752237114472-1)
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"231","blockHash":"0x7c1b125896017f8dacc7d35e52f8dfbb0f5b9e3887572592ba7f8f9a94a83722","txHash":"0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":77,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405","networkName":"network"}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"77","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":231}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":231}
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":231,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 231, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":231}
2025-07-11T19:31:54: Block number: 231, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":231,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 231, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 77 (ID: 1752237114474-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 77 (ID: 1752237114474-0)
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114479-0)
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 231, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 231, Transaction hash: 0x69f4bef3febc1ba057a870a33f2d7a76cfe3234d3d1c7e6b6404e5b6ebe80405, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39400000000000000 locked=600000000000000000 (ID: 1752237114479-0)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40600000000000000 locked=640000000000000000 (ID: 1752237114479-1)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"232","blockHash":"0x4bba5e6242767a165a4fa18f7a48cfab419ccae11dff687102798443724d8fbd","txHash":"0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":78,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298","networkName":"network"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"78","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 78 (ID: 1752237114481-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 78 (ID: 1752237114481-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114486-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xb1d9acd5ce54101733e0c37946a78d928df9631745243e8ef34d70a06ac8f298, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-600000000000000 locked=640000000000000000 (ID: 1752237114487-0)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80600000000000000 locked=680000000000000000 (ID: 1752237114487-1)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"232","blockHash":"0x4bba5e6242767a165a4fa18f7a48cfab419ccae11dff687102798443724d8fbd","txHash":"0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":79,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726","networkName":"network"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"79","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 79 (ID: 1752237114488-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 79 (ID: 1752237114488-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114493-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x2868e75ad891f41772824c12ec4e999b7ad963c0ce1cb9e2179be31906d82726, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40600000000000000 locked=680000000000000000 (ID: 1752237114494-0)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120600000000000000 locked=720000000000000000 (ID: 1752237114494-1)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"232","blockHash":"0x4bba5e6242767a165a4fa18f7a48cfab419ccae11dff687102798443724d8fbd","txHash":"0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":80,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86","networkName":"network"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"80","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 80 (ID: 1752237114495-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 80 (ID: 1752237114495-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114500-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0xfc3c9108c27a57acf99733418421339d0ddce61e34dac0c2dc283c1dd0797b86, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80600000000000000 locked=720000000000000000 (ID: 1752237114500-0)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160600000000000000 locked=760000000000000000 (ID: 1752237114500-1)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"232","blockHash":"0x4bba5e6242767a165a4fa18f7a48cfab419ccae11dff687102798443724d8fbd","txHash":"0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":81,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745","networkName":"network"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"81","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 81 (ID: 1752237114502-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 81 (ID: 1752237114502-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114507-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x856c97afceebedcad2d26c38a26ea107536e5ccb0bbdb1bd7141093a2c8c2745, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120600000000000000 locked=760000000000000000 (ID: 1752237114507-0)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200600000000000000 locked=800000000000000000 (ID: 1752237114507-1)
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"232","blockHash":"0x4bba5e6242767a165a4fa18f7a48cfab419ccae11dff687102798443724d8fbd","txHash":"0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":82,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010053,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf","networkName":"network"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"82","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234053","convertedTimestamp":1752234053}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":232,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232}
2025-07-11T19:31:54: Block number: 232, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":232,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 232, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 82 (ID: 1752237114509-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 82 (ID: 1752237114509-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114513-0)
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 232, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 232, Transaction hash: 0x4a103f7e59e1a0341b6a324947dd7576333c33449febccc1e73f9334e68d2adf, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2053878000 locked=0 (ID: 1752237114514-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1453878000 locked=1753878000 (ID: 1752237114514-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"235","blockHash":"0xbadddb0f1d6044c2119774d3ff2054cd0a0de9a44d7e774a4653afa90bb42877","txHash":"0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":83,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010058,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781","networkName":"network"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"83","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234058","convertedTimestamp":1752234058}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 83 (ID: 1752237114515-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 83 (ID: 1752237114515-0)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114521-0)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1533878000 locked=1753878000 (ID: 1752237114521-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-915484800 locked=2199000000 (ID: 1752237114522-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3606800 locked=0 (ID: 1752237114522-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160600000000000000 locked=760000000000000000 (ID: 1752237114522-2)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=638720000000000000 locked=0 (ID: 1752237114523-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1880000000000000 locked=0 (ID: 1752237114523-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"78","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234058,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237114524-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 78 (ID: 1752237114524-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 78 (ID: 1752237114524-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114529-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114529-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114530-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114530-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114531-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237114535-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 83 (ID: 1752237114535-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 83 (ID: 1752237114535-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 78 (ID: 1752237114535-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 78 (ID: 1752237114535-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114545-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114545-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114546-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114546-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114546-2)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1614278000 locked=1753878000 (ID: 1752237114547-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-835165200 locked=2199000000 (ID: 1752237114547-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3687200 locked=0 (ID: 1752237114547-2)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120600000000000000 locked=720000000000000000 (ID: 1752237114547-3)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=678640000000000000 locked=0 (ID: 1752237114548-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1960000000000000 locked=0 (ID: 1752237114548-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"79","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234058,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237114549-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 79 (ID: 1752237114549-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 79 (ID: 1752237114549-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114553-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114554-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114554-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114555-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114555-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237114559-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 83 (ID: 1752237114559-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 83 (ID: 1752237114559-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 79 (ID: 1752237114559-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 79 (ID: 1752237114559-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114572-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114572-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114573-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114573-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114574-0)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1654678000 locked=1753878000 (ID: 1752237114574-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-794805600 locked=2199000000 (ID: 1752237114575-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3727600 locked=0 (ID: 1752237114575-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100600000000000000 locked=700000000000000000 (ID: 1752237114575-2)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=698600000000000000 locked=0 (ID: 1752237114576-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2000000000000000 locked=0 (ID: 1752237114576-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"44","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234058,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237114577-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 44 (ID: 1752237114577-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 44 (ID: 1752237114577-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114582-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114582-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114583-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114583-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114583-2)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237114587-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 83 (ID: 1752237114587-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 83 (ID: 1752237114587-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 44 (ID: 1752237114587-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 44 (ID: 1752237114588-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114600-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114601-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114601-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114601-2)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114602-0)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xa629da98de7383dae3cd9f6983d2b648da07e053b6b5cd95b1b9ef778053c781, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1853078000 locked=0 (ID: 1752237114602-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=798600000000000000 locked=0 (ID: 1752237114603-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-598600000000000000 locked=698600000000000000 (ID: 1752237114603-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"235","blockHash":"0xbadddb0f1d6044c2119774d3ff2054cd0a0de9a44d7e774a4653afa90bb42877","txHash":"0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":84,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010058,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06","networkName":"network"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"84","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234058","convertedTimestamp":1752234058}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 84 (ID: 1752237114604-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 84 (ID: 1752237114604-0)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114609-0)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-648600000000000000 locked=698600000000000000 (ID: 1752237114610-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50650000000000000 locked=700000000000000000 (ID: 1752237114610-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2050000000000000 locked=0 (ID: 1752237114611-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-697805600 locked=2102000000 (ID: 1752237114611-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=1949884000 locked=0 (ID: 1752237114611-2)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3921600 locked=0 (ID: 1752237114612-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"77","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234058,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237114613-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 77 (ID: 1752237114613-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 77 (ID: 1752237114613-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114618-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114618-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114618-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114619-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114619-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237114623-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 77 (ID: 1752237114623-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 77 (ID: 1752237114623-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 84 (ID: 1752237114623-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 84 (ID: 1752237114623-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114637-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114637-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114638-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114638-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114638-2)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-698600000000000000 locked=698600000000000000 (ID: 1752237114639-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-700000000000000 locked=700000000000000000 (ID: 1752237114639-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2100000000000000 locked=0 (ID: 1752237114640-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-601305600 locked=2005500000 (ID: 1752237114640-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2046191000 locked=0 (ID: 1752237114641-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4114600 locked=0 (ID: 1752237114641-1)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"76","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234058,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237114642-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 76 (ID: 1752237114642-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 76 (ID: 1752237114642-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114647-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114647-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114648-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114648-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114649-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":235,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":235,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 235, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237114653-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 76 (ID: 1752237114654-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 76 (ID: 1752237114654-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 84 (ID: 1752237114654-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 84 (ID: 1752237114654-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114668-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114669-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114669-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114670-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114670-1)
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 235, Transaction hash: 0xead1806a242773c30d0e1b9a02a3a92e218f95247f651e03604fd873e19f0d06, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":235}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=698600000000000000 locked=0 (ID: 1752237114671-0)
2025-07-11T19:31:54: Block number: 235, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-506305600 locked=2005500000 (ID: 1752237114671-1)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-696305600 locked=2100500000 (ID: 1752237114671-2)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"239","blockHash":"0xed07292df54c6ceed95da9f91acbd619d82779f04504c8e2f41608f17417839f","txHash":"0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":85,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda","networkName":"network"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"85","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 85 (ID: 1752237114673-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 85 (ID: 1752237114673-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114678-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0xfdb07e0b2d59d5c5e8c233ec14bc7ddf8da0c9cb244cd3ad2572a0274a133cda, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-600805600 locked=2100500000 (ID: 1752237114679-0)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-791805600 locked=2196000000 (ID: 1752237114679-1)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"239","blockHash":"0xed07292df54c6ceed95da9f91acbd619d82779f04504c8e2f41608f17417839f","txHash":"0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207","logIndex":8,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":86,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207","networkName":"network"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"86","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 86 (ID: 1752237114680-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 86 (ID: 1752237114680-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114685-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x37f3ba4b9054dc2fe6b14fdb939582e15e52cddb6b16207a2e483ef7a7b5a207, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-695805600 locked=2196000000 (ID: 1752237114686-0)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-887805600 locked=2292000000 (ID: 1752237114686-1)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"239","blockHash":"0xed07292df54c6ceed95da9f91acbd619d82779f04504c8e2f41608f17417839f","txHash":"0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6","logIndex":12,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":87,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6","networkName":"network"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"87","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 87 (ID: 1752237114687-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 87 (ID: 1752237114687-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114692-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x5395fd7bc4df0ec0cfc5c7b97de01bb07e8d6ea75e9e1aadfd245123960ccba6, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-791305600 locked=2292000000 (ID: 1752237114693-0)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-984305600 locked=2388500000 (ID: 1752237114693-1)
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"239","blockHash":"0xed07292df54c6ceed95da9f91acbd619d82779f04504c8e2f41608f17417839f","txHash":"0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9","logIndex":16,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":88,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9","networkName":"network"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"88","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":239,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239}
2025-07-11T19:31:54: Block number: 239, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":239,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 239, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 88 (ID: 1752237114694-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 88 (ID: 1752237114694-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114699-0)
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 239, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 239, Transaction hash: 0x1d0f7ac35ce98f51bbdc7229f8fd61a3fc5efb0da3dc3084c41003a75293e4a9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":241}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-887305600 locked=2388500000 (ID: 1752237114700-0)
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":241}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1081305600 locked=2485500000 (ID: 1752237114700-1)
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"241","blockHash":"0x3b6be42f492d9185984a79a63d2d5b09f6f195a968b44b2c6100b67da005fbaa","txHash":"0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":89,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324","networkName":"network"}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"89","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":241}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":241}
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":241,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 241, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":241}
2025-07-11T19:31:54: Block number: 241, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":241,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 241, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 89 (ID: 1752237114701-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 89 (ID: 1752237114701-0)
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114708-0)
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 241, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 241, Transaction hash: 0x9eff97e214046eb1522a305958cb8d3cb2593e3b9c243c6489172f9c3c913324, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":242}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39300000000000000 locked=700000000000000000 (ID: 1752237114708-0)
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":242}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40700000000000000 locked=740000000000000000 (ID: 1752237114708-1)
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"242","blockHash":"0xfc239eb3923e4a81f6913ff639934a593af49e89305e1edd6e033fde9cf034f7","txHash":"0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":90,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095","networkName":"network"}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"90","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":242}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":242}
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":242,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 242, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":242}
2025-07-11T19:31:54: Block number: 242, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":242,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 242, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 90 (ID: 1752237114710-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 90 (ID: 1752237114710-0)
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114715-0)
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 242, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 242, Transaction hash: 0x6559d6ed356855677d01e9bd8f56e8a8abc36c1caed87fafc3e87fb36ffb0095, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-700000000000000 locked=740000000000000000 (ID: 1752237114715-0)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80700000000000000 locked=780000000000000000 (ID: 1752237114715-1)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"243","blockHash":"0x4fb3e37b8ba456664fe345560d87be5222aedc3c1ad2f944aeb274c2d5857b49","txHash":"0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":91,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50","networkName":"network"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"91","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 91 (ID: 1752237114716-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 91 (ID: 1752237114717-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114722-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xc0659cc79ec4518c9b35dffe8fc302fdeef92f4fa88ddf13895c757666c0ac50, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40700000000000000 locked=780000000000000000 (ID: 1752237114722-0)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120700000000000000 locked=820000000000000000 (ID: 1752237114722-1)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"243","blockHash":"0x4fb3e37b8ba456664fe345560d87be5222aedc3c1ad2f944aeb274c2d5857b49","txHash":"0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":92,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6","networkName":"network"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"92","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 92 (ID: 1752237114723-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 92 (ID: 1752237114724-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114728-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x7d466faaa37f3d6613b0900a676fa10bc9fb09594d5fd72d3e574f56e4f6ecd6, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80700000000000000 locked=820000000000000000 (ID: 1752237114729-0)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160700000000000000 locked=860000000000000000 (ID: 1752237114729-1)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"243","blockHash":"0x4fb3e37b8ba456664fe345560d87be5222aedc3c1ad2f944aeb274c2d5857b49","txHash":"0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":93,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b","networkName":"network"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"93","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 93 (ID: 1752237114730-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 93 (ID: 1752237114730-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114736-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0x69f151c984ac6b8b9a4df21bf4aed3a9f0ad2bb8c30e8d5c2574e1a9173dc88b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120700000000000000 locked=860000000000000000 (ID: 1752237114736-0)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200700000000000000 locked=900000000000000000 (ID: 1752237114736-1)
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"243","blockHash":"0x4fb3e37b8ba456664fe345560d87be5222aedc3c1ad2f944aeb274c2d5857b49","txHash":"0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":94,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010075,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df","networkName":"network"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"94","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234075","convertedTimestamp":1752234075}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":243,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243}
2025-07-11T19:31:54: Block number: 243, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":243,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 243, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 94 (ID: 1752237114737-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 94 (ID: 1752237114738-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114741-0)
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 243, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 243, Transaction hash: 0xb3105d2155f0db8b7f46c10446f1dc77a1a5f0c7d0ae01484c9aca7b523275df, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2346191000 locked=0 (ID: 1752237114742-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1746191000 locked=2046191000 (ID: 1752237114742-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"246","blockHash":"0xeb01b81c91c3f3eb22783895462f25c319750fdba8dfb059d0d9ec157af5ca49","txHash":"0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":95,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010080,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c","networkName":"network"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"95","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234080","convertedTimestamp":1752234080}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 95 (ID: 1752237114743-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 95 (ID: 1752237114743-0)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114747-0)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1826191000 locked=2046191000 (ID: 1752237114747-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1001385600 locked=2485500000 (ID: 1752237114748-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4194600 locked=0 (ID: 1752237114748-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160700000000000000 locked=860000000000000000 (ID: 1752237114748-2)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=738520000000000000 locked=0 (ID: 1752237114749-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2180000000000000 locked=0 (ID: 1752237114749-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"90","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234080,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237114750-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 90 (ID: 1752237114750-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 90 (ID: 1752237114750-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114754-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114754-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114755-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114755-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237114759-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 95 (ID: 1752237114759-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 95 (ID: 1752237114759-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 90 (ID: 1752237114759-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 90 (ID: 1752237114759-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114771-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114772-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114773-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114773-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114773-2)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1906591000 locked=2046191000 (ID: 1752237114774-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-921066000 locked=2485500000 (ID: 1752237114774-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4275000 locked=0 (ID: 1752237114775-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120700000000000000 locked=820000000000000000 (ID: 1752237114775-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=778440000000000000 locked=0 (ID: 1752237114775-2)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2260000000000000 locked=0 (ID: 1752237114776-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"91","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234080,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237114777-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 91 (ID: 1752237114777-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 91 (ID: 1752237114777-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114782-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237114782-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237114782-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237114783-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237114783-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237114787-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 95 (ID: 1752237114787-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 95 (ID: 1752237114787-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 91 (ID: 1752237114787-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 91 (ID: 1752237114788-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114800-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114801-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114801-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114801-2)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114802-0)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1946991000 locked=2046191000 (ID: 1752237114802-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-880706400 locked=2485500000 (ID: 1752237114803-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4315400 locked=0 (ID: 1752237114803-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100700000000000000 locked=800000000000000000 (ID: 1752237114804-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=798400000000000000 locked=0 (ID: 1752237114804-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2300000000000000 locked=0 (ID: 1752237114804-2)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"44","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234080,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237114805-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 44 (ID: 1752237114805-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 44 (ID: 1752237114805-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114810-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237114810-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237114811-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237114811-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237114812-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237114815-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 95 (ID: 1752237114815-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 95 (ID: 1752237114816-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 44 (ID: 1752237114816-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 44 (ID: 1752237114816-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114829-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114829-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114830-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114830-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114830-2)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x09b2d9568092d9b58f81057931e0f1446b41e0608bbcd41f97b0849eb137526c, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2145391000 locked=0 (ID: 1752237114831-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=898400000000000000 locked=0 (ID: 1752237114831-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-698400000000000000 locked=798400000000000000 (ID: 1752237114832-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"246","blockHash":"0xeb01b81c91c3f3eb22783895462f25c319750fdba8dfb059d0d9ec157af5ca49","txHash":"0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":96,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010080,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a","networkName":"network"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"96","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234080","convertedTimestamp":1752234080}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 96 (ID: 1752237114833-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 96 (ID: 1752237114833-0)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114838-0)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-748400000000000000 locked=798400000000000000 (ID: 1752237114839-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50750000000000000 locked=800000000000000000 (ID: 1752237114839-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2350000000000000 locked=0 (ID: 1752237114839-2)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-783706400 locked=2388500000 (ID: 1752237114840-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2242197000 locked=0 (ID: 1752237114840-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4509400 locked=0 (ID: 1752237114841-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"89","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234080,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237114841-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 89 (ID: 1752237114842-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 89 (ID: 1752237114842-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114846-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237114847-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237114847-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237114847-2)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237114848-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237114852-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 89 (ID: 1752237114852-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 89 (ID: 1752237114852-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 96 (ID: 1752237114852-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 96 (ID: 1752237114852-1)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114865-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114866-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114866-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114866-2)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114867-0)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-798400000000000000 locked=798400000000000000 (ID: 1752237114867-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-800000000000000 locked=800000000000000000 (ID: 1752237114868-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2400000000000000 locked=0 (ID: 1752237114868-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-687206400 locked=2292000000 (ID: 1752237114868-2)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2338504000 locked=0 (ID: 1752237114869-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4702400 locked=0 (ID: 1752237114869-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"88","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234080,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237114870-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 88 (ID: 1752237114870-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 88 (ID: 1752237114870-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114875-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237114875-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237114875-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237114876-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237114876-1)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":246,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":246,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 246, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237114880-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy filled 88 (ID: 1752237114880-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 88 (ID: 1752237114880-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 96 (ID: 1752237114881-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 96 (ID: 1752237114881-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114895-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114895-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114895-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114896-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114896-1)
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:54: Block number: 246, Transaction hash: 0x12c08e5c67e27bdd627ed165fd213f2eba864e19aa298daf6e4d6b008fa8322a, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":246}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=798400000000000000 locked=0 (ID: 1752237114897-0)
2025-07-11T19:31:54: Block number: 246, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-592206400 locked=2292000000 (ID: 1752237114897-1)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-782206400 locked=2387000000 (ID: 1752237114897-2)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"249","blockHash":"0xda78d00329924a846ea7043d88ea25b0888058e40003f6d816d6c9be38c826e5","txHash":"0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":97,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7","networkName":"network"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"97","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 97 (ID: 1752237114899-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 97 (ID: 1752237114899-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114904-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x075739eeb1d65893abdcbe6c5dbe81e731b042d10046de9783ecea707b65ffa7, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-686706400 locked=2387000000 (ID: 1752237114904-0)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-877706400 locked=2482500000 (ID: 1752237114905-0)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"249","blockHash":"0xda78d00329924a846ea7043d88ea25b0888058e40003f6d816d6c9be38c826e5","txHash":"0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb","logIndex":9,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":98,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb","networkName":"network"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"98","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 98 (ID: 1752237114906-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 98 (ID: 1752237114906-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114911-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0x6b6adc42e44188ea47732da86e443ffa393c366d609ef7b4035846d99d2791eb, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-781706400 locked=2482500000 (ID: 1752237114911-0)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-973706400 locked=2578500000 (ID: 1752237114912-0)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"249","blockHash":"0xda78d00329924a846ea7043d88ea25b0888058e40003f6d816d6c9be38c826e5","txHash":"0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0","logIndex":13,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":99,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0","networkName":"network"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"99","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 99 (ID: 1752237114913-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 99 (ID: 1752237114913-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237114918-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xefd20b3db22c3bfdd6ade34d709755af590d96e0dec01f5c1a0dd0d2d40900f0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-877206400 locked=2578500000 (ID: 1752237114918-0)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1070206400 locked=2675000000 (ID: 1752237114919-0)
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"249","blockHash":"0xda78d00329924a846ea7043d88ea25b0888058e40003f6d816d6c9be38c826e5","txHash":"0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347","logIndex":17,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":100,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347","networkName":"network"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"100","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":249,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249}
2025-07-11T19:31:54: Block number: 249, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":249,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 249, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 100 (ID: 1752237114920-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 100 (ID: 1752237114920-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237114925-0)
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 249, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 249, Transaction hash: 0xd466fb8d05563c8772bae46dd79e6c413f88f3f938df20d163eaefa3f31c7347, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":250}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-973206400 locked=2675000000 (ID: 1752237114926-0)
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":250}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1167206400 locked=2772000000 (ID: 1752237114926-1)
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"250","blockHash":"0xace0382ad29f3a20595fd7f6b7eb64782fdbc2d712d5a65b75c457392b9d85fb","txHash":"0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":101,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8","networkName":"network"}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"101","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":250}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":250}
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":250,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 250, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":250}
2025-07-11T19:31:54: Block number: 250, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":250,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 250, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 101 (ID: 1752237114927-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 101 (ID: 1752237114927-0)
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237114932-0)
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 250, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 250, Transaction hash: 0x37fbf67b64d1ede15aaf021bb6f9da2fef29dc202e843a41f34d1fdffc0a5ed8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39200000000000000 locked=800000000000000000 (ID: 1752237114933-0)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40800000000000000 locked=840000000000000000 (ID: 1752237114933-1)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"251","blockHash":"0x2eae2dc847cb32edb92ecf5e1a59c7a330095752306b080833a3d2b8e5bf83a1","txHash":"0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":102,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b","networkName":"network"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"102","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 102 (ID: 1752237114934-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 102 (ID: 1752237114934-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114940-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0xfe6ae7b4ce28a734939c572182f04f18ad9b607a29b3ed7614e07b243582b77b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-800000000000000 locked=840000000000000000 (ID: 1752237114940-0)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80800000000000000 locked=880000000000000000 (ID: 1752237114940-1)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"251","blockHash":"0x2eae2dc847cb32edb92ecf5e1a59c7a330095752306b080833a3d2b8e5bf83a1","txHash":"0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":103,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a","networkName":"network"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"103","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 103 (ID: 1752237114941-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 103 (ID: 1752237114941-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114945-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x70ead86df29c7d897f56bf5c59071f6137b8002dfb83fe35182e37b57489fe3a, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40800000000000000 locked=880000000000000000 (ID: 1752237114946-0)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120800000000000000 locked=920000000000000000 (ID: 1752237114946-1)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"251","blockHash":"0x2eae2dc847cb32edb92ecf5e1a59c7a330095752306b080833a3d2b8e5bf83a1","txHash":"0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":104,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0","networkName":"network"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"104","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 104 (ID: 1752237114947-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 104 (ID: 1752237114947-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114951-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x571bd44e777da5f1b3d72f9d52f1fffff649e687023e358a668c25fe62468fb0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80800000000000000 locked=920000000000000000 (ID: 1752237114951-0)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160800000000000000 locked=960000000000000000 (ID: 1752237114951-1)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"251","blockHash":"0x2eae2dc847cb32edb92ecf5e1a59c7a330095752306b080833a3d2b8e5bf83a1","txHash":"0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":105,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0","networkName":"network"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"105","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 105 (ID: 1752237114953-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 105 (ID: 1752237114953-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114958-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x53349087cc17cd4e353002c0ca1139ea2abebaa30bff218239bb62efb1e2e1d0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120800000000000000 locked=960000000000000000 (ID: 1752237114958-0)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200800000000000000 locked=1000000000000000000 (ID: 1752237114958-1)
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"251","blockHash":"0x2eae2dc847cb32edb92ecf5e1a59c7a330095752306b080833a3d2b8e5bf83a1","txHash":"0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":106,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010097,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65","networkName":"network"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"106","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234097","convertedTimestamp":1752234097}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":251,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251}
2025-07-11T19:31:54: Block number: 251, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":251,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 251, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell open 106 (ID: 1752237114960-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 106 (ID: 1752237114960-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114965-0)
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 251, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 251, Transaction hash: 0x361e6ca92fecfbb11dbdeb648708cfb13c633fc4928294e30fb70cf35fdaad65, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2638504000 locked=0 (ID: 1752237114966-0)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2038504000 locked=2338504000 (ID: 1752237114966-1)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"254","blockHash":"0xdd28448e6efae8237bf94b7c1ebbef7512b492ddfab71ddf83506272fd1a41b7","txHash":"0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":107,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010102,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f","networkName":"network"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"107","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234102","convertedTimestamp":1752234102}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy open 107 (ID: 1752237114967-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc new 107 (ID: 1752237114967-0)
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237114972-0)
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2118504000 locked=2338504000 (ID: 1752237114973-0)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1087286400 locked=2772000000 (ID: 1752237114973-1)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4782400 locked=0 (ID: 1752237114974-0)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160800000000000000 locked=960000000000000000 (ID: 1752237114974-1)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=838320000000000000 locked=0 (ID: 1752237114974-2)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2480000000000000 locked=0 (ID: 1752237114975-0)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"102","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234102,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237114976-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 102 (ID: 1752237114976-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 102 (ID: 1752237114976-0)
2025-07-11T19:31:54: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237114981-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237114981-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237114982-0)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237114982-1)
2025-07-11T19:31:54: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237114982-2)
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:54: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:54: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:54: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:54: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:54: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:54: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237114986-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 107 (ID: 1752237114986-0)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 107 (ID: 1752237114986-0)
2025-07-11T19:31:54: [REDIS STREAM] Published order event: mwethmusdc sell filled 102 (ID: 1752237114986-1)
2025-07-11T19:31:54: [REDIS STREAM] Published execution report: mwethmusdc trade 102 (ID: 1752237114987-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115001-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115002-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115002-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115002-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115003-0)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2198904000 locked=2338504000 (ID: 1752237115003-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1006966800 locked=2772000000 (ID: 1752237115004-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4862800 locked=0 (ID: 1752237115004-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120800000000000000 locked=920000000000000000 (ID: 1752237115005-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=878240000000000000 locked=0 (ID: 1752237115005-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2560000000000000 locked=0 (ID: 1752237115006-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"103","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234102,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237115007-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 103 (ID: 1752237115007-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 103 (ID: 1752237115007-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115012-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115012-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115012-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115013-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115013-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237115017-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 107 (ID: 1752237115017-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 107 (ID: 1752237115017-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 103 (ID: 1752237115017-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 103 (ID: 1752237115018-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115031-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115032-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115032-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115033-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115033-1)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2239304000 locked=2338504000 (ID: 1752237115033-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-966607200 locked=2772000000 (ID: 1752237115034-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4903200 locked=0 (ID: 1752237115035-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100800000000000000 locked=900000000000000000 (ID: 1752237115035-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=898200000000000000 locked=0 (ID: 1752237115035-2)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2600000000000000 locked=0 (ID: 1752237115036-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"56","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234102,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237115037-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 56 (ID: 1752237115037-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 56 (ID: 1752237115037-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115042-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115042-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115043-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115043-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115043-2)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237115047-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 107 (ID: 1752237115047-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 107 (ID: 1752237115047-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 56 (ID: 1752237115048-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 56 (ID: 1752237115048-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115062-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115063-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115063-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115063-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115064-0)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0xdd527d16ae5a628ae31e4acd9590219cca80859a68e5f2359c688d1b30311b5f, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2437704000 locked=0 (ID: 1752237115064-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=998200000000000000 locked=0 (ID: 1752237115065-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-798200000000000000 locked=898200000000000000 (ID: 1752237115065-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"254","blockHash":"0xdd28448e6efae8237bf94b7c1ebbef7512b492ddfab71ddf83506272fd1a41b7","txHash":"0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":108,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010102,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36","networkName":"network"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"108","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234102","convertedTimestamp":1752234102}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 108 (ID: 1752237115066-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 108 (ID: 1752237115066-0)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115071-0)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-848200000000000000 locked=898200000000000000 (ID: 1752237115072-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50850000000000000 locked=900000000000000000 (ID: 1752237115072-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2650000000000000 locked=0 (ID: 1752237115072-2)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-869607200 locked=2675000000 (ID: 1752237115073-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2534510000 locked=0 (ID: 1752237115073-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5097200 locked=0 (ID: 1752237115074-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"101","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234102,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237115075-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 101 (ID: 1752237115075-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 101 (ID: 1752237115075-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115079-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115080-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115080-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115081-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115081-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237115085-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 101 (ID: 1752237115085-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 101 (ID: 1752237115085-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 108 (ID: 1752237115085-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 108 (ID: 1752237115085-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115099-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115099-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115099-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115100-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115100-1)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-898200000000000000 locked=898200000000000000 (ID: 1752237115101-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-900000000000000 locked=900000000000000000 (ID: 1752237115101-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2700000000000000 locked=0 (ID: 1752237115102-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-773107200 locked=2578500000 (ID: 1752237115102-1)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2630817000 locked=0 (ID: 1752237115102-2)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5290200 locked=0 (ID: 1752237115103-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"100","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234102,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237115104-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 100 (ID: 1752237115104-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 100 (ID: 1752237115104-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115109-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115109-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115110-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115110-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115111-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":254,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":254,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 254, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237115114-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 100 (ID: 1752237115114-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 100 (ID: 1752237115115-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 108 (ID: 1752237115115-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 108 (ID: 1752237115115-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115129-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237115130-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115130-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115130-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115131-0)
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 254, Transaction hash: 0x8210ea716ef21545ef6b6b062becd44e55cb7069d9252855e77cb11f181abd36, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":254}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=898200000000000000 locked=0 (ID: 1752237115131-0)
2025-07-11T19:31:55: Block number: 254, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-678107200 locked=2578500000 (ID: 1752237115132-0)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-868107200 locked=2673500000 (ID: 1752237115132-1)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"258","blockHash":"0x7d9e27fe005897390c51282ac69088f757723aafdb2b574071114ed6122f45bd","txHash":"0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":109,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c","networkName":"network"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"109","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 109 (ID: 1752237115133-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 109 (ID: 1752237115133-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115140-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x41d4c19b1a8077d96312aac3480d96251376e658b322ad02eaf6a1a5197b9d4c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-772607200 locked=2673500000 (ID: 1752237115140-0)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-963607200 locked=2769000000 (ID: 1752237115140-1)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"258","blockHash":"0x7d9e27fe005897390c51282ac69088f757723aafdb2b574071114ed6122f45bd","txHash":"0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e","logIndex":8,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":110,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e","networkName":"network"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"110","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 110 (ID: 1752237115142-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 110 (ID: 1752237115142-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115146-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0xbac133826a92728bd3427d312de2f6f236b97b5b23bd83b506774bfa076a9a1e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-867607200 locked=2769000000 (ID: 1752237115147-0)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1059607200 locked=2865000000 (ID: 1752237115147-1)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"258","blockHash":"0x7d9e27fe005897390c51282ac69088f757723aafdb2b574071114ed6122f45bd","txHash":"0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d","logIndex":12,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":111,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d","networkName":"network"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"111","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 111 (ID: 1752237115148-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 111 (ID: 1752237115148-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115154-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5508385660f763743bd8247cc902798f0d67275553d3413658486a5ba2b6d70d, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-963107200 locked=2865000000 (ID: 1752237115154-0)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1156107200 locked=2961500000 (ID: 1752237115154-1)
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"258","blockHash":"0x7d9e27fe005897390c51282ac69088f757723aafdb2b574071114ed6122f45bd","txHash":"0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356","logIndex":16,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":112,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356","networkName":"network"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"112","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":258,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258}
2025-07-11T19:31:55: Block number: 258, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":258,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 258, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 112 (ID: 1752237115156-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 112 (ID: 1752237115156-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115162-0)
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 258, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 258, Transaction hash: 0x5aff9531b040ee07a1f092d97f287a448a16f6a8fad80558b6853a8933eaf356, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":260}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1059107200 locked=2961500000 (ID: 1752237115162-0)
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":260}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1253107200 locked=3058500000 (ID: 1752237115162-1)
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"260","blockHash":"0xddd579e86a73bbe1a932249550f076d745478ad69dfe1e793b25559b50f5bdb0","txHash":"0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":113,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6","networkName":"network"}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"113","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":260}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":260}
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":260,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 260, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":260}
2025-07-11T19:31:55: Block number: 260, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":260,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 260, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 113 (ID: 1752237115164-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 113 (ID: 1752237115164-0)
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115169-0)
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 260, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 260, Transaction hash: 0x013cf36181591b69e8c1fab965b23d3c5b315fb49c7d33062615bbda5b7a3bf6, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":261}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39100000000000000 locked=900000000000000000 (ID: 1752237115170-0)
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":261}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40900000000000000 locked=940000000000000000 (ID: 1752237115170-1)
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"261","blockHash":"0x3aebf51ddef8d1e55f624c3edd8f20fc505106a726b39e93c959aa6e2533f106","txHash":"0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":114,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c","networkName":"network"}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"114","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":261}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":261}
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":261,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 261, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":261}
2025-07-11T19:31:55: Block number: 261, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":261,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 261, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 114 (ID: 1752237115171-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 114 (ID: 1752237115171-0)
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115177-0)
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 261, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 261, Transaction hash: 0xc8bfa189c714a691899c37d06ec26a5e1e7a4bc887cd17fa72841887f023ba0c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-900000000000000 locked=940000000000000000 (ID: 1752237115177-0)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80900000000000000 locked=980000000000000000 (ID: 1752237115177-1)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"262","blockHash":"0x90ccbb7235ca64ba9137ae4ad0bcfc5babc0441d4324d930f5a511eac2211a99","txHash":"0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":115,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd","networkName":"network"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"115","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 115 (ID: 1752237115179-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 115 (ID: 1752237115179-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115184-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x3cb73b975d892dd5a337f9db6ec6ad35dcfe35b495e9b86ee4b7a7fc7913dcdd, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-40900000000000000 locked=980000000000000000 (ID: 1752237115184-0)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120900000000000000 locked=1020000000000000000 (ID: 1752237115185-0)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"262","blockHash":"0x90ccbb7235ca64ba9137ae4ad0bcfc5babc0441d4324d930f5a511eac2211a99","txHash":"0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":116,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc","networkName":"network"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"116","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 116 (ID: 1752237115186-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 116 (ID: 1752237115186-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115191-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xf567b6f6842af449d35807a3d605f9e6085ee15323c0739aa99e14a8c65588dc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-80900000000000000 locked=1020000000000000000 (ID: 1752237115192-0)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160900000000000000 locked=1060000000000000000 (ID: 1752237115192-1)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"262","blockHash":"0x90ccbb7235ca64ba9137ae4ad0bcfc5babc0441d4324d930f5a511eac2211a99","txHash":"0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":117,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034","networkName":"network"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"117","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 117 (ID: 1752237115193-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 117 (ID: 1752237115193-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115199-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0xe214cbf0c609575205b5c8d5ff64a5f40dff1753d1106f76cf10f54397371034, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120900000000000000 locked=1060000000000000000 (ID: 1752237115199-0)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-200900000000000000 locked=1100000000000000000 (ID: 1752237115199-1)
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"262","blockHash":"0x90ccbb7235ca64ba9137ae4ad0bcfc5babc0441d4324d930f5a511eac2211a99","txHash":"0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":118,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010118,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f","networkName":"network"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"118","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234118","convertedTimestamp":1752234118}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":262,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262}
2025-07-11T19:31:55: Block number: 262, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":262,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 262, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 118 (ID: 1752237115200-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 118 (ID: 1752237115201-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115206-0)
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 262, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 262, Transaction hash: 0x82901dad9807003cf2c7184a9c472da729656d9920e657473c480990cf3d646f, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2930817000 locked=0 (ID: 1752237115206-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2330817000 locked=2630817000 (ID: 1752237115207-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"264","blockHash":"0x352fa39fda30456d5df792bd014b643e5e4795b133eb95fd89e49264eccd4b01","txHash":"0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":119,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010124,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc","networkName":"network"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"119","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234124","convertedTimestamp":1752234124}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 119 (ID: 1752237115208-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 119 (ID: 1752237115208-0)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115213-0)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2410817000 locked=2630817000 (ID: 1752237115214-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1173187200 locked=3058500000 (ID: 1752237115214-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5370200 locked=0 (ID: 1752237115215-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-160900000000000000 locked=1060000000000000000 (ID: 1752237115215-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=938120000000000000 locked=0 (ID: 1752237115215-2)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2780000000000000 locked=0 (ID: 1752237115216-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"114","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234124,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237115217-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 114 (ID: 1752237115217-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 114 (ID: 1752237115217-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115222-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115222-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115223-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115223-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237115227-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 119 (ID: 1752237115227-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 119 (ID: 1752237115227-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 114 (ID: 1752237115227-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 114 (ID: 1752237115227-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115240-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115240-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115241-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115241-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115242-0)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2491217000 locked=2630817000 (ID: 1752237115242-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1092867600 locked=3058500000 (ID: 1752237115243-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5450600 locked=0 (ID: 1752237115243-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-120900000000000000 locked=1020000000000000000 (ID: 1752237115243-2)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=978040000000000000 locked=0 (ID: 1752237115244-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2860000000000000 locked=0 (ID: 1752237115244-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"115","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234124,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237115245-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 115 (ID: 1752237115245-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 115 (ID: 1752237115245-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115252-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115252-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115253-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115253-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115253-2)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237115257-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 119 (ID: 1752237115257-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 119 (ID: 1752237115258-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 115 (ID: 1752237115258-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 115 (ID: 1752237115258-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115272-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115273-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115273-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115274-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115274-1)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2531617000 locked=2630817000 (ID: 1752237115274-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1052508000 locked=3058500000 (ID: 1752237115275-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5491000 locked=0 (ID: 1752237115275-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-100900000000000000 locked=1000000000000000000 (ID: 1752237115276-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=998000000000000000 locked=0 (ID: 1752237115276-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2900000000000000 locked=0 (ID: 1752237115277-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"56","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234124,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237115278-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 56 (ID: 1752237115278-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 56 (ID: 1752237115278-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115282-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115283-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115283-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115284-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115284-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237115288-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 119 (ID: 1752237115288-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 119 (ID: 1752237115288-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 56 (ID: 1752237115288-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 56 (ID: 1752237115288-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115301-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115302-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115302-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115303-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115303-1)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0x286d044d8a90554f462da9ffea522ee8214fc89b8e9382486646dff2b62369bc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2730017000 locked=0 (ID: 1752237115303-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1098000000000000000 locked=0 (ID: 1752237115304-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-898000000000000000 locked=998000000000000000 (ID: 1752237115304-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"264","blockHash":"0x352fa39fda30456d5df792bd014b643e5e4795b133eb95fd89e49264eccd4b01","txHash":"0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61","logIndex":23,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":120,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010124,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61","networkName":"network"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"120","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234124","convertedTimestamp":1752234124}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 120 (ID: 1752237115305-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 120 (ID: 1752237115305-0)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115311-0)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-948000000000000000 locked=998000000000000000 (ID: 1752237115311-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-50950000000000000 locked=1000000000000000000 (ID: 1752237115312-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=2950000000000000 locked=0 (ID: 1752237115312-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-955508000 locked=2961500000 (ID: 1752237115312-2)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2826823000 locked=0 (ID: 1752237115313-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5685000 locked=0 (ID: 1752237115313-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"113","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234124,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237115314-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 113 (ID: 1752237115314-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 113 (ID: 1752237115314-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115319-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115319-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115320-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115320-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115320-2)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237115324-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 113 (ID: 1752237115324-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 113 (ID: 1752237115324-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 120 (ID: 1752237115324-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 120 (ID: 1752237115324-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115338-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115338-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115339-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115339-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115340-0)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-998000000000000000 locked=998000000000000000 (ID: 1752237115340-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1000000000000000 locked=1000000000000000000 (ID: 1752237115340-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3000000000000000 locked=0 (ID: 1752237115341-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-859008000 locked=2865000000 (ID: 1752237115341-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=2923130000 locked=0 (ID: 1752237115342-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5878000 locked=0 (ID: 1752237115342-1)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"112","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234124,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237115343-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 112 (ID: 1752237115343-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 112 (ID: 1752237115343-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115347-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115348-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115348-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115348-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115349-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":264,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":264,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 264, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237115352-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 112 (ID: 1752237115352-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 112 (ID: 1752237115352-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 120 (ID: 1752237115352-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 120 (ID: 1752237115353-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115367-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237115367-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115368-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115368-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115368-2)
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 264, Transaction hash: 0xc25cc0a4c5aac72ef2ce05b78029eebb8bfb5d5d36dc8794e5416392b4fe5c61, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":264}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=998000000000000000 locked=0 (ID: 1752237115369-0)
2025-07-11T19:31:55: Block number: 264, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":266}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-764008000 locked=2865000000 (ID: 1752237115369-1)
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":266}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-954008000 locked=2960000000 (ID: 1752237115369-2)
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"266","blockHash":"0xd478dc50d7a3d5159ff3a19a8e81badaa9b1828ea8b47f55ebe4e095c5f83795","txHash":"0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":121,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2","networkName":"network"}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"121","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":266}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":266}
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":266,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 266, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":266}
2025-07-11T19:31:55: Block number: 266, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":266,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 266, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 121 (ID: 1752237115371-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 121 (ID: 1752237115371-0)
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115376-0)
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 266, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 266, Transaction hash: 0x12f3992235dba69b19a72f425799a921e5f8f7911fee1bc409cb8629f49b74c2, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-858508000 locked=2960000000 (ID: 1752237115377-0)
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1049508000 locked=3055500000 (ID: 1752237115377-1)
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"267","blockHash":"0xba39f7b168b35c00347755c845c4e11978e6e160707cc02ab54333a2dddccab6","txHash":"0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":122,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7","networkName":"network"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"122","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":267,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 267, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":267,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 122 (ID: 1752237115378-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 122 (ID: 1752237115378-0)
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115384-0)
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x8e73251f3284788e62687d0b304808240f0acf45a03c0117a0633e224504b0a7, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-953508000 locked=3055500000 (ID: 1752237115385-0)
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1145508000 locked=3151500000 (ID: 1752237115385-1)
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"267","blockHash":"0xba39f7b168b35c00347755c845c4e11978e6e160707cc02ab54333a2dddccab6","txHash":"0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":123,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9","networkName":"network"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"123","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":267,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 267, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":267,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 123 (ID: 1752237115386-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 123 (ID: 1752237115386-0)
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115391-0)
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x6b8f2659429f2ea68ae8815deaa07a78c709a0c37162fc2f598c0e3de85e2ec9, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1049008000 locked=3151500000 (ID: 1752237115392-0)
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1242008000 locked=3248000000 (ID: 1752237115392-1)
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"267","blockHash":"0xba39f7b168b35c00347755c845c4e11978e6e160707cc02ab54333a2dddccab6","txHash":"0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":124,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26","networkName":"network"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"124","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":267,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 267, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":267}
2025-07-11T19:31:55: Block number: 267, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":267,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 267, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 124 (ID: 1752237115393-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 124 (ID: 1752237115393-0)
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115398-0)
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 267, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 267, Transaction hash: 0x2cca1e9d40f022ede35293e9cea81d260ed2a4bc294439e9cdcfa8db98ca7b26, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1145008000 locked=3248000000 (ID: 1752237115399-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1339008000 locked=3345000000 (ID: 1752237115399-1)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"268","blockHash":"0xbea5ddd7a7c7a64da66fdf98b0ee4745fa070064d5157537475b2cfacf49d068","txHash":"0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":125,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac","networkName":"network"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"125","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 125 (ID: 1752237115400-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 125 (ID: 1752237115400-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115406-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6042c75ea77deffa956aaf802096e0cc3afb4e2a379c82edb98fb6e972b96dac, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=39000000000000000 locked=1000000000000000000 (ID: 1752237115406-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41000000000000000 locked=1040000000000000000 (ID: 1752237115406-1)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"268","blockHash":"0xbea5ddd7a7c7a64da66fdf98b0ee4745fa070064d5157537475b2cfacf49d068","txHash":"0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":126,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd","networkName":"network"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"126","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 126 (ID: 1752237115408-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 126 (ID: 1752237115408-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115413-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x32f265289419130a23fe717d7159608a4e539b1b01a006252b94b85fd6f3aedd, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1000000000000000 locked=1040000000000000000 (ID: 1752237115413-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81000000000000000 locked=1080000000000000000 (ID: 1752237115414-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"268","blockHash":"0xbea5ddd7a7c7a64da66fdf98b0ee4745fa070064d5157537475b2cfacf49d068","txHash":"0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":127,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb","networkName":"network"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"127","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 127 (ID: 1752237115415-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 127 (ID: 1752237115415-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115421-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6764a1d6fc94e3002f52e42113d5956e22f66fb3657164a97963d061a65eeedb, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41000000000000000 locked=1080000000000000000 (ID: 1752237115421-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121000000000000000 locked=1120000000000000000 (ID: 1752237115422-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"268","blockHash":"0xbea5ddd7a7c7a64da66fdf98b0ee4745fa070064d5157537475b2cfacf49d068","txHash":"0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":128,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4","networkName":"network"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"128","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 128 (ID: 1752237115423-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 128 (ID: 1752237115423-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115428-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x8cf570c37c67507522edb3bffc3528d42720532248cc9173caff7b2aa71407f4, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81000000000000000 locked=1120000000000000000 (ID: 1752237115429-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161000000000000000 locked=1160000000000000000 (ID: 1752237115429-1)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"268","blockHash":"0xbea5ddd7a7c7a64da66fdf98b0ee4745fa070064d5157537475b2cfacf49d068","txHash":"0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":129,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563","networkName":"network"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"129","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 129 (ID: 1752237115430-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 129 (ID: 1752237115430-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115436-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x7431d4ce15295e0cdf6f679802bcbeb6b1eefd420d49696de0783ecac6277563, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121000000000000000 locked=1160000000000000000 (ID: 1752237115436-0)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201000000000000000 locked=1200000000000000000 (ID: 1752237115436-1)
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"268","blockHash":"0xbea5ddd7a7c7a64da66fdf98b0ee4745fa070064d5157537475b2cfacf49d068","txHash":"0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78","logIndex":23,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":130,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010140,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78","networkName":"network"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"130","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234140","convertedTimestamp":1752234140}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":268,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268}
2025-07-11T19:31:55: Block number: 268, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":268,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 268, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 130 (ID: 1752237115437-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 130 (ID: 1752237115438-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115443-0)
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 268, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 268, Transaction hash: 0x6cef13f83f324882d08115bcbadd9b935504b78fdef81e213053c25a284ccf78, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3223130000 locked=0 (ID: 1752237115444-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2623130000 locked=2923130000 (ID: 1752237115444-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"272","blockHash":"0xb553105f5204e6e6a2262a9020aea09905d9a859322fa08da7bdd51c76e2a9c9","txHash":"0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":131,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010146,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17","networkName":"network"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"131","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234146","convertedTimestamp":1752234146}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 131 (ID: 1752237115445-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 131 (ID: 1752237115445-0)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115451-0)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2703130000 locked=2923130000 (ID: 1752237115451-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1259088000 locked=3345000000 (ID: 1752237115452-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5958000 locked=0 (ID: 1752237115452-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161000000000000000 locked=1160000000000000000 (ID: 1752237115453-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1037920000000000000 locked=0 (ID: 1752237115453-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3080000000000000 locked=0 (ID: 1752237115453-2)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"126","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234146,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237115454-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 126 (ID: 1752237115454-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 126 (ID: 1752237115454-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115459-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237115459-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115460-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115460-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115461-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237115464-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 131 (ID: 1752237115465-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 131 (ID: 1752237115465-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 126 (ID: 1752237115465-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 126 (ID: 1752237115465-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115479-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115479-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115480-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115480-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115481-0)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2783530000 locked=2923130000 (ID: 1752237115481-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1178768400 locked=3345000000 (ID: 1752237115481-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6038400 locked=0 (ID: 1752237115482-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121000000000000000 locked=1120000000000000000 (ID: 1752237115482-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1077840000000000000 locked=0 (ID: 1752237115483-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3160000000000000 locked=0 (ID: 1752237115483-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"127","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234146,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237115484-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 127 (ID: 1752237115484-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 127 (ID: 1752237115484-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115489-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115489-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115490-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115490-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115490-2)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237115494-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 131 (ID: 1752237115494-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 131 (ID: 1752237115494-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 127 (ID: 1752237115494-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 127 (ID: 1752237115495-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115509-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115509-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115510-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115510-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115510-2)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2823930000 locked=2923130000 (ID: 1752237115511-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1138408800 locked=3345000000 (ID: 1752237115511-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6078800 locked=0 (ID: 1752237115512-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101000000000000000 locked=1100000000000000000 (ID: 1752237115512-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1097800000000000000 locked=0 (ID: 1752237115513-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3200000000000000 locked=0 (ID: 1752237115513-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"68","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234146,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237115514-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 68 (ID: 1752237115514-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 68 (ID: 1752237115514-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115519-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115520-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115520-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115520-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115520-3)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237115524-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 131 (ID: 1752237115524-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 131 (ID: 1752237115524-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 68 (ID: 1752237115524-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 68 (ID: 1752237115524-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115541-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115542-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115542-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115543-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115543-1)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xa1f31ccde1d9dd2a81ed09cf98fd6887fb081b974e339cbcd562f73638278e17, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3022330000 locked=0 (ID: 1752237115544-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1197800000000000000 locked=0 (ID: 1752237115545-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-997800000000000000 locked=1097800000000000000 (ID: 1752237115545-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"272","blockHash":"0xb553105f5204e6e6a2262a9020aea09905d9a859322fa08da7bdd51c76e2a9c9","txHash":"0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc","logIndex":21,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":132,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010146,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc","networkName":"network"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"132","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234146","convertedTimestamp":1752234146}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 132 (ID: 1752237115547-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 132 (ID: 1752237115547-0)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115553-0)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1047800000000000000 locked=1097800000000000000 (ID: 1752237115553-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51050000000000000 locked=1100000000000000000 (ID: 1752237115554-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3250000000000000 locked=0 (ID: 1752237115554-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1041408800 locked=3248000000 (ID: 1752237115554-2)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3119136000 locked=0 (ID: 1752237115556-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6272800 locked=0 (ID: 1752237115556-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"125","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234146,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237115557-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 125 (ID: 1752237115557-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 125 (ID: 1752237115558-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115567-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115567-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115568-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115568-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115569-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237115573-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 125 (ID: 1752237115573-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 125 (ID: 1752237115573-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 132 (ID: 1752237115574-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 132 (ID: 1752237115574-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115589-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115589-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115590-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115590-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115590-2)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1097800000000000000 locked=1097800000000000000 (ID: 1752237115591-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1100000000000000 locked=1100000000000000000 (ID: 1752237115591-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3300000000000000 locked=0 (ID: 1752237115592-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-944908800 locked=3151500000 (ID: 1752237115592-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3215443000 locked=0 (ID: 1752237115593-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6465800 locked=0 (ID: 1752237115593-1)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"124","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234146,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237115594-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 124 (ID: 1752237115594-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 124 (ID: 1752237115594-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115600-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115600-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115601-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115601-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115601-2)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":272,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":272,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 272, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237115608-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 124 (ID: 1752237115608-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 124 (ID: 1752237115609-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 132 (ID: 1752237115609-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 132 (ID: 1752237115609-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115637-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237115637-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115638-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115638-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115639-0)
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 272, Transaction hash: 0xfde57c975194476b32c0152a2c793cd0d2d0b5337aaa5a0516c50ddb7f43fcfc, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":272}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1097800000000000000 locked=0 (ID: 1752237115639-0)
2025-07-11T19:31:55: Block number: 272, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-849908800 locked=3151500000 (ID: 1752237115640-0)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1039908800 locked=3246500000 (ID: 1752237115640-1)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"275","blockHash":"0xdfb1f869087ce7f301fe8bdeb64aaec873ba55a68e8e161398dd065bbc5988d7","txHash":"0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":133,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8","networkName":"network"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"133","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 133 (ID: 1752237115641-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 133 (ID: 1752237115642-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115648-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x6e0e34fd21a8fcff4f1ba339673ea8c70cc69ea955dcc8ec74e38051eebf95b8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-944408800 locked=3246500000 (ID: 1752237115649-0)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1135408800 locked=3342000000 (ID: 1752237115649-1)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"275","blockHash":"0xdfb1f869087ce7f301fe8bdeb64aaec873ba55a68e8e161398dd065bbc5988d7","txHash":"0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0","logIndex":9,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":134,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0","networkName":"network"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"134","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 134 (ID: 1752237115650-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 134 (ID: 1752237115650-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115656-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x87c69ca5c25ae1d05e37734c57e40d71642f3df85a925e940aa5cf5a224833b0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1039408800 locked=3342000000 (ID: 1752237115657-0)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1231408800 locked=3438000000 (ID: 1752237115657-1)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"275","blockHash":"0xdfb1f869087ce7f301fe8bdeb64aaec873ba55a68e8e161398dd065bbc5988d7","txHash":"0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60","logIndex":13,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":135,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60","networkName":"network"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"135","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 135 (ID: 1752237115658-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 135 (ID: 1752237115658-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115663-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x425c0df7c831b1f4db88373bda7f41993df0dd88adb31b98e52312d41c4dbc60, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1134908800 locked=3438000000 (ID: 1752237115664-0)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1327908800 locked=3534500000 (ID: 1752237115664-1)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"275","blockHash":"0xdfb1f869087ce7f301fe8bdeb64aaec873ba55a68e8e161398dd065bbc5988d7","txHash":"0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54","logIndex":17,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":136,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54","networkName":"network"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"136","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 136 (ID: 1752237115666-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 136 (ID: 1752237115666-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115671-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0x4450f28b09c7f93b50eb51486dddfeba1fa3ddf381f3a2d407eeb400e51ffb54, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1230908800 locked=3534500000 (ID: 1752237115672-0)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1424908800 locked=3631500000 (ID: 1752237115672-1)
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"275","blockHash":"0xdfb1f869087ce7f301fe8bdeb64aaec873ba55a68e8e161398dd065bbc5988d7","txHash":"0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01","logIndex":21,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":137,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01","networkName":"network"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"137","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":275,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275}
2025-07-11T19:31:55: Block number: 275, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":275,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 275, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 137 (ID: 1752237115673-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 137 (ID: 1752237115673-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115681-0)
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 275, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 275, Transaction hash: 0xf25c01125406417f7911e62665a9aa999d43a456d4b1d8fc9177e4f79a076c01, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":277}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38900000000000000 locked=1100000000000000000 (ID: 1752237115682-0)
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":277}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41100000000000000 locked=1140000000000000000 (ID: 1752237115682-1)
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"277","blockHash":"0x4d771be0ce5893ad06d7dac1761f56525f93fff2158cc2396efeef40eaef2a7e","txHash":"0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":138,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7","networkName":"network"}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"138","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":277}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":277}
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":277,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 277, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":277}
2025-07-11T19:31:55: 7:31:55 PM WARN  process    Received SIGINT, starting shutdown sequence
2025-07-11T19:31:55: Block number: 277, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":277,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 277, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 138 (ID: 1752237115686-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 138 (ID: 1752237115686-0)
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115694-0)
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 277, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 277, Transaction hash: 0x23e6ff9fd6417afaed0b612afc9fdc90a8b1c117a80937729f9bd187860523b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1100000000000000 locked=1140000000000000000 (ID: 1752237115694-0)
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81100000000000000 locked=1180000000000000000 (ID: 1752237115694-1)
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"278","blockHash":"0xd9426df0b19f9e1932403d7b56c5cae0ed6f7f37b21ca53bc75d100a5e1ad256","txHash":"0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":139,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17","networkName":"network"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"139","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":278,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 278, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":278,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 139 (ID: 1752237115696-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 139 (ID: 1752237115696-0)
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115701-0)
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x72d663ff207c7c30a216ec3dd518f45b95395296c89ba445a68a468ddf1f6c17, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41100000000000000 locked=1180000000000000000 (ID: 1752237115701-0)
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121100000000000000 locked=1220000000000000000 (ID: 1752237115702-0)
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"278","blockHash":"0xd9426df0b19f9e1932403d7b56c5cae0ed6f7f37b21ca53bc75d100a5e1ad256","txHash":"0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":140,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c","networkName":"network"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"140","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":278,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 278, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":278}
2025-07-11T19:31:55: Block number: 278, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":278,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 278, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 140 (ID: 1752237115703-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 140 (ID: 1752237115703-0)
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115708-0)
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 278, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 278, Transaction hash: 0x058c20e7a70c389c6a0563e7e9bed10af2f14107eae856e72a6877d3572b6b2c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81100000000000000 locked=1220000000000000000 (ID: 1752237115709-0)
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161100000000000000 locked=1260000000000000000 (ID: 1752237115709-1)
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"279","blockHash":"0xd3c7c758a0a330f3dc1142b71ac76a2228627c0dad59d24ac21a82762c62dd9e","txHash":"0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":141,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f","networkName":"network"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"141","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":279,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 279, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":279,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 141 (ID: 1752237115710-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 141 (ID: 1752237115710-0)
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115715-0)
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x458fea4207a1f198d207a28adf1f01e6474966b827bab0802ca6f903f8e6845f, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121100000000000000 locked=1260000000000000000 (ID: 1752237115716-0)
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201100000000000000 locked=1300000000000000000 (ID: 1752237115716-1)
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"279","blockHash":"0xd3c7c758a0a330f3dc1142b71ac76a2228627c0dad59d24ac21a82762c62dd9e","txHash":"0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":142,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010162,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8","networkName":"network"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"142","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234162","convertedTimestamp":1752234162}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":279,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 279, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":279}
2025-07-11T19:31:55: Block number: 279, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":279,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 279, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 142 (ID: 1752237115717-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 142 (ID: 1752237115717-0)
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115722-0)
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 279, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 279, Transaction hash: 0x8bbbb57c2450a3a11f9b6abe390afe74f353be3e7bc8166f2ec52fa879388dd8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3515443000 locked=0 (ID: 1752237115723-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2915443000 locked=3215443000 (ID: 1752237115723-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"282","blockHash":"0x6eabe4798b8f2a0267b8b3dca0548b732f32944a316ce19f140fe05cc9358259","txHash":"0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb","logIndex":4,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":143,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010168,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb","networkName":"network"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"143","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234168","convertedTimestamp":1752234168}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 143 (ID: 1752237115724-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 143 (ID: 1752237115724-0)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115729-0)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-2995443000 locked=3215443000 (ID: 1752237115730-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1344988800 locked=3631500000 (ID: 1752237115730-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6545800 locked=0 (ID: 1752237115730-2)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161100000000000000 locked=1260000000000000000 (ID: 1752237115731-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1137720000000000000 locked=0 (ID: 1752237115731-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3380000000000000 locked=0 (ID: 1752237115732-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"138","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234168,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237115732-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 138 (ID: 1752237115733-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 138 (ID: 1752237115733-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115737-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237115738-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115738-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115738-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115739-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237115742-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 143 (ID: 1752237115742-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 143 (ID: 1752237115742-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 138 (ID: 1752237115742-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 138 (ID: 1752237115742-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115755-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115755-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115756-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115756-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115756-2)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3075843000 locked=3215443000 (ID: 1752237115757-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1264669200 locked=3631500000 (ID: 1752237115757-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6626200 locked=0 (ID: 1752237115758-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121100000000000000 locked=1220000000000000000 (ID: 1752237115758-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1177640000000000000 locked=0 (ID: 1752237115759-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3460000000000000 locked=0 (ID: 1752237115759-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"139","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234168,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237115760-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 139 (ID: 1752237115760-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 139 (ID: 1752237115760-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115765-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115765-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115765-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115766-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115766-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237115769-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 143 (ID: 1752237115770-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 143 (ID: 1752237115770-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 139 (ID: 1752237115770-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 139 (ID: 1752237115770-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115783-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115783-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115784-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115784-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115785-0)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3116243000 locked=3215443000 (ID: 1752237115785-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1224309600 locked=3631500000 (ID: 1752237115785-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6666600 locked=0 (ID: 1752237115786-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101100000000000000 locked=1200000000000000000 (ID: 1752237115786-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1197600000000000000 locked=0 (ID: 1752237115787-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3500000000000000 locked=0 (ID: 1752237115787-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"68","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234168,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237115788-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 68 (ID: 1752237115788-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 68 (ID: 1752237115788-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115793-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237115793-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237115794-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237115794-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237115794-2)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237115798-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 143 (ID: 1752237115798-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 143 (ID: 1752237115798-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 68 (ID: 1752237115798-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 68 (ID: 1752237115798-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115810-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115811-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115811-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115812-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115812-1)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x345a13bf8d1ac7ec38665ba34c16e8277d4a4397422d1abfa0bd93d3e4e602fb, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3314643000 locked=0 (ID: 1752237115812-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1297600000000000000 locked=0 (ID: 1752237115813-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1097600000000000000 locked=1197600000000000000 (ID: 1752237115813-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"282","blockHash":"0x6eabe4798b8f2a0267b8b3dca0548b732f32944a316ce19f140fe05cc9358259","txHash":"0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5","logIndex":21,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":144,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010168,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5","networkName":"network"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"144","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234168","convertedTimestamp":1752234168}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 144 (ID: 1752237115814-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 144 (ID: 1752237115814-0)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115819-0)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1147600000000000000 locked=1197600000000000000 (ID: 1752237115820-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51150000000000000 locked=1200000000000000000 (ID: 1752237115820-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3550000000000000 locked=0 (ID: 1752237115821-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1127309600 locked=3534500000 (ID: 1752237115821-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3411449000 locked=0 (ID: 1752237115821-2)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=6860600 locked=0 (ID: 1752237115822-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"137","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234168,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237115822-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 137 (ID: 1752237115823-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 137 (ID: 1752237115823-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115827-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237115827-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237115828-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237115828-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237115828-2)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237115832-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 137 (ID: 1752237115832-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 137 (ID: 1752237115832-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 144 (ID: 1752237115832-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 144 (ID: 1752237115832-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115845-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115845-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115846-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115846-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115846-2)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1197600000000000000 locked=1197600000000000000 (ID: 1752237115847-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1200000000000000 locked=1200000000000000000 (ID: 1752237115847-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3600000000000000 locked=0 (ID: 1752237115848-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1030809600 locked=3438000000 (ID: 1752237115848-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3507756000 locked=0 (ID: 1752237115848-2)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7053600 locked=0 (ID: 1752237115849-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"136","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234168,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237115849-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 136 (ID: 1752237115850-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 136 (ID: 1752237115850-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115855-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237115855-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237115855-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237115856-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237115856-1)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":282,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":282,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 282, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237115860-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy filled 136 (ID: 1752237115860-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 136 (ID: 1752237115860-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 144 (ID: 1752237115860-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 144 (ID: 1752237115860-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115873-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237115873-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115873-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115874-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115874-1)
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 282, Transaction hash: 0x6260a7b1911883603895106315e3eb60837b141023f3b2f1212643799f7af0a5, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":282}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1197600000000000000 locked=0 (ID: 1752237115875-0)
2025-07-11T19:31:55: Block number: 282, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-935809600 locked=3438000000 (ID: 1752237115875-1)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1125809600 locked=3533000000 (ID: 1752237115875-2)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"284","blockHash":"0x22eae87f8b55a1d8f1a19b5c75358d01394cc74604794fa00a22690b44f89146","txHash":"0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":145,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc","networkName":"network"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"145","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 145 (ID: 1752237115876-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 145 (ID: 1752237115876-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115881-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xf313019a6f2076ab90549963119aea90cd3f5518054a6f5b985aadf98c22cbbc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1030309600 locked=3533000000 (ID: 1752237115882-0)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1221309600 locked=3628500000 (ID: 1752237115882-1)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"284","blockHash":"0x22eae87f8b55a1d8f1a19b5c75358d01394cc74604794fa00a22690b44f89146","txHash":"0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93","logIndex":10,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":146,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93","networkName":"network"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"146","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 146 (ID: 1752237115883-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 146 (ID: 1752237115883-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115889-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0x3f1d195940aa845032eb2844bcadfb5ee6629581fbe75fac7fd28188d61c6b93, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1125309600 locked=3628500000 (ID: 1752237115890-0)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1317309600 locked=3724500000 (ID: 1752237115890-1)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"284","blockHash":"0x22eae87f8b55a1d8f1a19b5c75358d01394cc74604794fa00a22690b44f89146","txHash":"0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc","logIndex":14,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":147,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc","networkName":"network"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"147","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 147 (ID: 1752237115891-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 147 (ID: 1752237115891-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237115896-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xa39c9dd505f9170baed4ec613cfec1fdae86a7b72bcc8fbdb2aecfca778bbafc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1220809600 locked=3724500000 (ID: 1752237115897-0)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1413809600 locked=3821000000 (ID: 1752237115897-1)
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"284","blockHash":"0x22eae87f8b55a1d8f1a19b5c75358d01394cc74604794fa00a22690b44f89146","txHash":"0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260","logIndex":18,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":148,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260","networkName":"network"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"148","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":284,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284}
2025-07-11T19:31:55: Block number: 284, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":284,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 284, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 148 (ID: 1752237115898-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 148 (ID: 1752237115898-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237115903-0)
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 284, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 284, Transaction hash: 0xadb76abc6d7efd1b6e75e117e1f26b572688736d88f314a9040bd104e941a260, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":285}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1316809600 locked=3821000000 (ID: 1752237115903-0)
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":285}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1510809600 locked=3918000000 (ID: 1752237115903-1)
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"285","blockHash":"0xecd3a4b4ad095d62e1cac01b436e0d58642022a28336b9859e6b8cbf68d6c451","txHash":"0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":149,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62","networkName":"network"}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"149","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":285}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":285}
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":285,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 285, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":285}
2025-07-11T19:31:55: Block number: 285, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":285,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 285, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 149 (ID: 1752237115904-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 149 (ID: 1752237115905-0)
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115909-0)
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 285, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 285, Transaction hash: 0x8d641ddd5c779a66213815c0d87d751fc17b32055b4c37ee9082ae9b35e0da62, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":286}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38800000000000000 locked=1200000000000000000 (ID: 1752237115910-0)
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":286}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41200000000000000 locked=1240000000000000000 (ID: 1752237115910-1)
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"286","blockHash":"0x98fc070f0530ee1abd4e981e7e9a9a568b9fca60bd4f4475f83895409ae91b4b","txHash":"0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":150,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5","networkName":"network"}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"150","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":286}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":286}
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":286,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 286, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":286}
2025-07-11T19:31:55: Block number: 286, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":286,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 286, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 150 (ID: 1752237115911-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 150 (ID: 1752237115911-0)
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115916-0)
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 286, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 286, Transaction hash: 0x5ad2527cae97f161cf3e3135d9cd70aff084fbe10ea58a6be74195f2d95a3be5, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1200000000000000 locked=1240000000000000000 (ID: 1752237115917-0)
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81200000000000000 locked=1280000000000000000 (ID: 1752237115917-1)
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"287","blockHash":"0x36233e358ea5b3be7a07b85cc5a42a77f50882f54ee5a3e0aa43efb92ed99903","txHash":"0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":151,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3","networkName":"network"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"151","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":287,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 287, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":287,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 151 (ID: 1752237115918-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 151 (ID: 1752237115918-0)
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115923-0)
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xc75ebf84e8dcaa3731ea3f3428398da5298d1878bc43dc91c65e549d6052c2a3, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41200000000000000 locked=1280000000000000000 (ID: 1752237115923-0)
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121200000000000000 locked=1320000000000000000 (ID: 1752237115923-1)
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"287","blockHash":"0x36233e358ea5b3be7a07b85cc5a42a77f50882f54ee5a3e0aa43efb92ed99903","txHash":"0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":152,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7","networkName":"network"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"152","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":287,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 287, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":287,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 152 (ID: 1752237115925-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 152 (ID: 1752237115925-0)
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115929-0)
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0xbee38733cdd7538feba0372694af04fb12233cd0827a775a118453097a83d9c7, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81200000000000000 locked=1320000000000000000 (ID: 1752237115930-0)
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161200000000000000 locked=1360000000000000000 (ID: 1752237115930-1)
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"287","blockHash":"0x36233e358ea5b3be7a07b85cc5a42a77f50882f54ee5a3e0aa43efb92ed99903","txHash":"0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":153,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254","networkName":"network"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"153","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":287,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 287, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":287}
2025-07-11T19:31:55: Block number: 287, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":287,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 287, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 153 (ID: 1752237115931-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 153 (ID: 1752237115931-0)
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115936-0)
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 287, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 287, Transaction hash: 0x026a9e362bd3cb1d983aa5418fed4eabdbf4618627201377baeae5013d993254, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":288}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121200000000000000 locked=1360000000000000000 (ID: 1752237115936-0)
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":288}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201200000000000000 locked=1400000000000000000 (ID: 1752237115936-1)
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"288","blockHash":"0xb4446a24d8feb52abbc57666fc26168bbd0b66ed0e621323856237b9427f38fe","txHash":"0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":154,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010184,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1","networkName":"network"}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"154","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234184","convertedTimestamp":1752234184}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":288}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":288}
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":288,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 288, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":288}
2025-07-11T19:31:55: Block number: 288, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":288,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 288, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell open 154 (ID: 1752237115937-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 154 (ID: 1752237115937-0)
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115942-0)
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 288, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 288, Transaction hash: 0xc2206658874fb625cb18e4818b51487ff0e84b57729ea3ebc9fd1861882272b1, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3807756000 locked=0 (ID: 1752237115943-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3207756000 locked=3507756000 (ID: 1752237115943-1)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"290","blockHash":"0x970864ba05a48933aa2c4ea109821a9ccfe4b17dd6ee81a551390521bef0f775","txHash":"0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":155,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010189,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626","networkName":"network"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"155","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234189","convertedTimestamp":1752234189}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy open 155 (ID: 1752237115944-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc new 155 (ID: 1752237115944-0)
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237115949-0)
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3287756000 locked=3507756000 (ID: 1752237115950-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1430889600 locked=3918000000 (ID: 1752237115950-1)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7133600 locked=0 (ID: 1752237115950-2)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161200000000000000 locked=1360000000000000000 (ID: 1752237115951-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1237520000000000000 locked=0 (ID: 1752237115951-1)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3680000000000000 locked=0 (ID: 1752237115951-2)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"150","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234189,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237115952-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 150 (ID: 1752237115952-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 150 (ID: 1752237115952-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115957-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237115958-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237115958-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237115959-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237115962-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 155 (ID: 1752237115962-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 155 (ID: 1752237115962-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 150 (ID: 1752237115962-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 150 (ID: 1752237115962-1)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237115974-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115975-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115975-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115975-2)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115976-0)
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3368156000 locked=3507756000 (ID: 1752237115976-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1350570000 locked=3918000000 (ID: 1752237115977-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7214000 locked=0 (ID: 1752237115977-1)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121200000000000000 locked=1320000000000000000 (ID: 1752237115977-2)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1277440000000000000 locked=0 (ID: 1752237115978-0)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3760000000000000 locked=0 (ID: 1752237115978-1)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"151","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234189,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237115979-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 151 (ID: 1752237115979-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 151 (ID: 1752237115979-0)
2025-07-11T19:31:55: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237115984-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237115984-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237115984-1)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237115985-0)
2025-07-11T19:31:55: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237115985-1)
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:55: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:55: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:55: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:55: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:55: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237115988-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 155 (ID: 1752237115989-0)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 155 (ID: 1752237115989-0)
2025-07-11T19:31:55: [REDIS STREAM] Published order event: mwethmusdc sell filled 151 (ID: 1752237115989-1)
2025-07-11T19:31:55: [REDIS STREAM] Published execution report: mwethmusdc trade 151 (ID: 1752237115989-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116001-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116002-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116002-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116002-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116002-3)
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3408556000 locked=3507756000 (ID: 1752237116003-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1310210400 locked=3918000000 (ID: 1752237116003-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7254400 locked=0 (ID: 1752237116003-2)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101200000000000000 locked=1300000000000000000 (ID: 1752237116004-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1297400000000000000 locked=0 (ID: 1752237116004-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3800000000000000 locked=0 (ID: 1752237116004-2)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"80","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234189,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237116005-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 80 (ID: 1752237116005-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 80 (ID: 1752237116005-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116010-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116010-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116011-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116011-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116011-2)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237116015-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 155 (ID: 1752237116015-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 155 (ID: 1752237116015-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 80 (ID: 1752237116015-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 80 (ID: 1752237116015-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116027-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116027-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116028-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116028-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116028-2)
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xc5e250843728f17402b1099ff9a8b2edda73e3e456debdd90e21e4e15c7ec626, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3606956000 locked=0 (ID: 1752237116029-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1397400000000000000 locked=0 (ID: 1752237116029-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1197400000000000000 locked=1297400000000000000 (ID: 1752237116029-2)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"290","blockHash":"0x970864ba05a48933aa2c4ea109821a9ccfe4b17dd6ee81a551390521bef0f775","txHash":"0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f","logIndex":23,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":156,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010189,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f","networkName":"network"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"156","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234189","convertedTimestamp":1752234189}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 156 (ID: 1752237116031-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 156 (ID: 1752237116031-0)
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116036-0)
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1247400000000000000 locked=1297400000000000000 (ID: 1752237116036-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51250000000000000 locked=1300000000000000000 (ID: 1752237116037-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3850000000000000 locked=0 (ID: 1752237116037-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1213210400 locked=3821000000 (ID: 1752237116037-2)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3703762000 locked=0 (ID: 1752237116038-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7448400 locked=0 (ID: 1752237116038-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"149","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234189,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237116039-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 149 (ID: 1752237116039-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 149 (ID: 1752237116039-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116044-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116044-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116045-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116045-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116046-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237116049-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 149 (ID: 1752237116049-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 149 (ID: 1752237116049-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 156 (ID: 1752237116049-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 156 (ID: 1752237116049-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116062-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116062-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116062-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116063-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116063-1)
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1297400000000000000 locked=1297400000000000000 (ID: 1752237116064-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1300000000000000 locked=1300000000000000000 (ID: 1752237116064-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3900000000000000 locked=0 (ID: 1752237116064-2)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1116710400 locked=3724500000 (ID: 1752237116065-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3800069000 locked=0 (ID: 1752237116065-1)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7641400 locked=0 (ID: 1752237116066-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"148","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234189,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237116067-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 148 (ID: 1752237116067-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 148 (ID: 1752237116067-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116071-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116072-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116072-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116072-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116073-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":290,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":290,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 290, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237116076-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 148 (ID: 1752237116076-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 148 (ID: 1752237116076-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 156 (ID: 1752237116076-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 156 (ID: 1752237116077-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116089-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116090-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116090-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116091-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116091-1)
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 290, Transaction hash: 0xd463c51ac32456b8a40bdaf321ae938cc92630eb7ba9ea2a9550da07b785a26f, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":290}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1297400000000000000 locked=0 (ID: 1752237116091-0)
2025-07-11T19:31:56: Block number: 290, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1021710400 locked=3724500000 (ID: 1752237116092-0)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1211710400 locked=3819500000 (ID: 1752237116092-1)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"292","blockHash":"0x66a957efabbcdeb95933043b14caab5c7eaa4b2650a34a2084c852dada3ada68","txHash":"0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":157,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862","networkName":"network"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"157","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 157 (ID: 1752237116093-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 157 (ID: 1752237116093-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116099-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xf00baffb8658afd3b460b5ddf5a7510ec0828ccfcf58dbe79c244a7cf7e11862, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1116210400 locked=3819500000 (ID: 1752237116099-0)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1307210400 locked=3915000000 (ID: 1752237116099-1)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"292","blockHash":"0x66a957efabbcdeb95933043b14caab5c7eaa4b2650a34a2084c852dada3ada68","txHash":"0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62","logIndex":10,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":158,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62","networkName":"network"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"158","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 158 (ID: 1752237116100-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 158 (ID: 1752237116100-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116104-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0x77a601aa443eda76eed6ff7a3d1722c08651d9144f0a319f41dd42f212967f62, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1211210400 locked=3915000000 (ID: 1752237116105-0)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1403210400 locked=4011000000 (ID: 1752237116105-1)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"292","blockHash":"0x66a957efabbcdeb95933043b14caab5c7eaa4b2650a34a2084c852dada3ada68","txHash":"0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68","logIndex":14,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":159,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68","networkName":"network"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"159","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 159 (ID: 1752237116106-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 159 (ID: 1752237116106-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116111-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xffec59fec4fe9d3959400f5e526ae09df9a7612b12c241f244160a5b8b6b3f68, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1306710400 locked=4011000000 (ID: 1752237116111-0)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1499710400 locked=4107500000 (ID: 1752237116111-1)
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"292","blockHash":"0x66a957efabbcdeb95933043b14caab5c7eaa4b2650a34a2084c852dada3ada68","txHash":"0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740","logIndex":18,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":160,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740","networkName":"network"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"160","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":292,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292}
2025-07-11T19:31:56: Block number: 292, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":292,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 292, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 160 (ID: 1752237116113-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 160 (ID: 1752237116113-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116118-0)
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 292, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 292, Transaction hash: 0xbf7573c12000d6a9b78aebe5d23b63537b0ea7d176ba3303eee3fcffb2ebb740, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":294}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1402710400 locked=4107500000 (ID: 1752237116118-0)
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":294}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1596710400 locked=4204500000 (ID: 1752237116118-1)
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"294","blockHash":"0x0d47a54ffa5fbcb7a54edba2267d5d92144c81d5a1bfd413b81848a6ad6a4ebd","txHash":"0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":161,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1","networkName":"network"}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"161","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":294}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":294}
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":294,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 294, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":294}
2025-07-11T19:31:56: Block number: 294, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":294,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 294, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 161 (ID: 1752237116119-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 161 (ID: 1752237116120-0)
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116125-0)
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 294, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 294, Transaction hash: 0xb86b2442866b29325e6ebc43401917010bf304a6fe54efa4ba3a78ee50b3b5c1, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38700000000000000 locked=1300000000000000000 (ID: 1752237116125-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41300000000000000 locked=1340000000000000000 (ID: 1752237116125-1)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"295","blockHash":"0xfaa46ca8a19a06877d799cb86c40e4cce9eb686827986c235931026b241b7618","txHash":"0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":162,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84","networkName":"network"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"162","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 162 (ID: 1752237116127-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 162 (ID: 1752237116127-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116134-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x0afa6b6b488a11425314c766599aad83865e01866db7aea081fa1129c75ffd84, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1300000000000000 locked=1340000000000000000 (ID: 1752237116134-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81300000000000000 locked=1380000000000000000 (ID: 1752237116135-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"295","blockHash":"0xfaa46ca8a19a06877d799cb86c40e4cce9eb686827986c235931026b241b7618","txHash":"0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":163,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d","networkName":"network"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"163","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 163 (ID: 1752237116137-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 163 (ID: 1752237116137-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116143-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xb07b8a35b29998847b26a10404eacc33a6ab5192bc7f38c5ff005365a656412d, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41300000000000000 locked=1380000000000000000 (ID: 1752237116143-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121300000000000000 locked=1420000000000000000 (ID: 1752237116144-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"295","blockHash":"0xfaa46ca8a19a06877d799cb86c40e4cce9eb686827986c235931026b241b7618","txHash":"0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":164,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093","networkName":"network"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"164","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 164 (ID: 1752237116145-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 164 (ID: 1752237116145-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116151-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x79d78b7e8cd7e0286c2a19fabd9c7e278dfe71c82c49c9b79b068a355e21f093, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81300000000000000 locked=1420000000000000000 (ID: 1752237116151-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161300000000000000 locked=1460000000000000000 (ID: 1752237116152-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"295","blockHash":"0xfaa46ca8a19a06877d799cb86c40e4cce9eb686827986c235931026b241b7618","txHash":"0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":165,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3","networkName":"network"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"165","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 165 (ID: 1752237116153-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 165 (ID: 1752237116153-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116158-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0xfc6c3d79f1eab3798f2f1a02263867b8110766afe95b048f7b1fc7843c6b18e3, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121300000000000000 locked=1460000000000000000 (ID: 1752237116158-0)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201300000000000000 locked=1500000000000000000 (ID: 1752237116158-1)
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"295","blockHash":"0xfaa46ca8a19a06877d799cb86c40e4cce9eb686827986c235931026b241b7618","txHash":"0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":166,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010205,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71","networkName":"network"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"166","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234205","convertedTimestamp":1752234205}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":295,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295}
2025-07-11T19:31:56: Block number: 295, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":295,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 295, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 166 (ID: 1752237116159-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 166 (ID: 1752237116160-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116165-0)
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 295, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 295, Transaction hash: 0x2c8d447f06f9276ebc11de66ad4ae189c08844ddff98952128b79dad14fd3b71, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4100069000 locked=0 (ID: 1752237116166-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3500069000 locked=3800069000 (ID: 1752237116166-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"298","blockHash":"0xbd1cddd6eb26524a585b690c2dd0171c317671e7afd0e55de868e21a398923e7","txHash":"0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":167,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010211,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82","networkName":"network"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"167","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234211","convertedTimestamp":1752234211}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 167 (ID: 1752237116167-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 167 (ID: 1752237116167-0)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116173-0)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3580069000 locked=3800069000 (ID: 1752237116174-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1516790400 locked=4204500000 (ID: 1752237116174-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7721400 locked=0 (ID: 1752237116175-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161300000000000000 locked=1460000000000000000 (ID: 1752237116175-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1337320000000000000 locked=0 (ID: 1752237116175-2)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=3980000000000000 locked=0 (ID: 1752237116176-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"162","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234211,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237116177-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 162 (ID: 1752237116177-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 162 (ID: 1752237116177-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116182-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116182-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116183-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116183-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116184-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237116187-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 167 (ID: 1752237116187-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 167 (ID: 1752237116187-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 162 (ID: 1752237116188-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 162 (ID: 1752237116188-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116202-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116202-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116203-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116203-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116203-2)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3660469000 locked=3800069000 (ID: 1752237116204-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1436470800 locked=4204500000 (ID: 1752237116204-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7801800 locked=0 (ID: 1752237116205-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121300000000000000 locked=1420000000000000000 (ID: 1752237116205-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1377240000000000000 locked=0 (ID: 1752237116205-2)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4060000000000000 locked=0 (ID: 1752237116206-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"163","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234211,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237116207-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 163 (ID: 1752237116207-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 163 (ID: 1752237116207-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116212-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116212-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116213-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116213-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116213-2)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237116217-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 167 (ID: 1752237116217-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 167 (ID: 1752237116217-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 163 (ID: 1752237116217-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 163 (ID: 1752237116217-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116231-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116232-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116232-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116233-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116233-1)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3700869000 locked=3800069000 (ID: 1752237116233-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1396111200 locked=4204500000 (ID: 1752237116234-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=7842200 locked=0 (ID: 1752237116234-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101300000000000000 locked=1400000000000000000 (ID: 1752237116235-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1397200000000000000 locked=0 (ID: 1752237116235-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4100000000000000 locked=0 (ID: 1752237116235-2)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"80","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234211,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237116236-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 80 (ID: 1752237116236-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 80 (ID: 1752237116237-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116242-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116242-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116243-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116243-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116244-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237116247-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 167 (ID: 1752237116247-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 167 (ID: 1752237116248-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 80 (ID: 1752237116248-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 80 (ID: 1752237116248-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116263-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116264-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116264-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116265-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116265-1)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x34e51762370ccf64c22a1ba1d1cfa37ccc4c600a5dd7e9072059408036d40f82, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3899269000 locked=0 (ID: 1752237116266-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1497200000000000000 locked=0 (ID: 1752237116266-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1297200000000000000 locked=1397200000000000000 (ID: 1752237116266-2)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"298","blockHash":"0xbd1cddd6eb26524a585b690c2dd0171c317671e7afd0e55de868e21a398923e7","txHash":"0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":168,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010211,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c","networkName":"network"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"168","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234211","convertedTimestamp":1752234211}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 168 (ID: 1752237116268-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 168 (ID: 1752237116268-0)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116274-0)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1347200000000000000 locked=1397200000000000000 (ID: 1752237116274-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51350000000000000 locked=1400000000000000000 (ID: 1752237116274-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4150000000000000 locked=0 (ID: 1752237116275-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1299111200 locked=4107500000 (ID: 1752237116275-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=3996075000 locked=0 (ID: 1752237116276-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8036200 locked=0 (ID: 1752237116276-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"161","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234211,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237116277-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 161 (ID: 1752237116277-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 161 (ID: 1752237116277-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116282-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116283-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116283-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116283-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116284-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237116287-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 161 (ID: 1752237116287-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 161 (ID: 1752237116288-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 168 (ID: 1752237116288-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 168 (ID: 1752237116288-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116302-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116302-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116302-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116303-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116303-1)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1397200000000000000 locked=1397200000000000000 (ID: 1752237116304-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1400000000000000 locked=1400000000000000000 (ID: 1752237116304-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4200000000000000 locked=0 (ID: 1752237116304-2)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1202611200 locked=4011000000 (ID: 1752237116305-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4092382000 locked=0 (ID: 1752237116305-1)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8229200 locked=0 (ID: 1752237116306-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"160","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234211,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237116307-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 160 (ID: 1752237116307-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 160 (ID: 1752237116307-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116312-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116312-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116313-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116313-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116314-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":298,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":298,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 298, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237116317-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 160 (ID: 1752237116317-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 160 (ID: 1752237116318-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 168 (ID: 1752237116318-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 168 (ID: 1752237116318-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116332-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116332-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116333-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116333-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116334-0)
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 298, Transaction hash: 0x27c4b39e627c9ab6eb596a58b129636cba0fb92eda981b25f051ca00bf24294c, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":298}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1397200000000000000 locked=0 (ID: 1752237116334-0)
2025-07-11T19:31:56: Block number: 298, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1107611200 locked=4011000000 (ID: 1752237116335-0)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1297611200 locked=4106000000 (ID: 1752237116335-1)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"301","blockHash":"0x7a4705dfd839fe123f01d33972f263461de8682f1cfc29eb90e7483b066b21e0","txHash":"0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":169,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd","networkName":"network"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"169","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 169 (ID: 1752237116336-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 169 (ID: 1752237116336-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116342-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0xfc73625ab4fd16036106e68180414619fe4cf76e5af65cddeced01c91e585dfd, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1202111200 locked=4106000000 (ID: 1752237116342-0)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1393111200 locked=4201500000 (ID: 1752237116342-1)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"301","blockHash":"0x7a4705dfd839fe123f01d33972f263461de8682f1cfc29eb90e7483b066b21e0","txHash":"0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad","logIndex":9,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":170,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad","networkName":"network"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"170","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 170 (ID: 1752237116344-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 170 (ID: 1752237116344-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116350-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x91dc02780e5d75b4b11bd94cb38b12149bab651c926da93a147def98202856ad, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1297111200 locked=4201500000 (ID: 1752237116350-0)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1489111200 locked=4297500000 (ID: 1752237116350-1)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"301","blockHash":"0x7a4705dfd839fe123f01d33972f263461de8682f1cfc29eb90e7483b066b21e0","txHash":"0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b","logIndex":13,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":171,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b","networkName":"network"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"171","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 171 (ID: 1752237116351-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 171 (ID: 1752237116352-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116357-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x5db4a809103df243b51e196b88a2ef3658079d2ff3d4a0cd2090e7f0f8f35a7b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1392611200 locked=4297500000 (ID: 1752237116358-0)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1585611200 locked=4394000000 (ID: 1752237116358-1)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"301","blockHash":"0x7a4705dfd839fe123f01d33972f263461de8682f1cfc29eb90e7483b066b21e0","txHash":"0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5","logIndex":17,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":172,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5","networkName":"network"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"172","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 172 (ID: 1752237116359-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 172 (ID: 1752237116359-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116365-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x1045612aac1ba9cb3c99ba2a1707c0177c8c9f94b239149d6c3f40b72bfca6b5, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1488611200 locked=4394000000 (ID: 1752237116365-0)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1682611200 locked=4491000000 (ID: 1752237116366-0)
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"301","blockHash":"0x7a4705dfd839fe123f01d33972f263461de8682f1cfc29eb90e7483b066b21e0","txHash":"0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43","logIndex":21,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":173,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43","networkName":"network"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"173","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":301,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301}
2025-07-11T19:31:56: Block number: 301, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":301,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 301, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 173 (ID: 1752237116367-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 173 (ID: 1752237116367-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116373-0)
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 301, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 301, Transaction hash: 0x7428fa852881a0a5aacc212f99802c834d30cd28d286b4a05d598e6ba14d7e43, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38600000000000000 locked=1400000000000000000 (ID: 1752237116373-0)
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41400000000000000 locked=1440000000000000000 (ID: 1752237116373-1)
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"302","blockHash":"0x573e663b5795baba7ed0544ec192f092d0142cd1c49035eb56058fc39546b148","txHash":"0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":174,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121","networkName":"network"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"174","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":302,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 302, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":302,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 174 (ID: 1752237116375-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 174 (ID: 1752237116375-0)
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116380-0)
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x4a0dcfcc31be9133e8136c257b7bbb8d780cb03be7138802983155c9ab4b6121, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1400000000000000 locked=1440000000000000000 (ID: 1752237116381-0)
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81400000000000000 locked=1480000000000000000 (ID: 1752237116381-1)
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"302","blockHash":"0x573e663b5795baba7ed0544ec192f092d0142cd1c49035eb56058fc39546b148","txHash":"0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":175,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6","networkName":"network"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"175","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":302,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 302, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":302}
2025-07-11T19:31:56: Block number: 302, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":302,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 302, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 175 (ID: 1752237116383-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 175 (ID: 1752237116383-0)
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116388-0)
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 302, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 302, Transaction hash: 0x3698a011d0d011abeac3a3640832e2f56added7c2cc992cdf89b3132bfe270a6, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":303}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41400000000000000 locked=1480000000000000000 (ID: 1752237116389-0)
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":303}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121400000000000000 locked=1520000000000000000 (ID: 1752237116389-1)
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"303","blockHash":"0x0af51285bf455b1c745f19ae919bf0391d8be18200013bb1da5ec7c470d51894","txHash":"0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":176,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b","networkName":"network"}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"176","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":303}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":303}
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":303,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 303, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":303}
2025-07-11T19:31:56: Block number: 303, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":303,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 303, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 176 (ID: 1752237116390-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 176 (ID: 1752237116390-0)
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116396-0)
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 303, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 303, Transaction hash: 0xc1a5bcc26f7f7c9c02291d4d2e868d7c85b64a999e26d397e499af38f7226f4b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81400000000000000 locked=1520000000000000000 (ID: 1752237116397-0)
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161400000000000000 locked=1560000000000000000 (ID: 1752237116397-1)
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"304","blockHash":"0x7af974480d366ad6c0977b705617836fb61a7e9682ebf3ef2f4746197f4e6f9f","txHash":"0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":177,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44","networkName":"network"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"177","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":304,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 304, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":304,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 177 (ID: 1752237116398-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 177 (ID: 1752237116398-0)
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116404-0)
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x32e61e75014f5935357717f77e8d94a05c2a8312f95875c13f97ab35b37e2e44, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121400000000000000 locked=1560000000000000000 (ID: 1752237116404-0)
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201400000000000000 locked=1600000000000000000 (ID: 1752237116405-0)
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"304","blockHash":"0x7af974480d366ad6c0977b705617836fb61a7e9682ebf3ef2f4746197f4e6f9f","txHash":"0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":178,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010227,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491","networkName":"network"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"178","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234227","convertedTimestamp":1752234227}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":304,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 304, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":304}
2025-07-11T19:31:56: Block number: 304, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":304,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 304, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 178 (ID: 1752237116406-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 178 (ID: 1752237116406-0)
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116412-0)
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 304, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 304, Transaction hash: 0x726fe5afb81807de2b934e5f853834cf13b177a05549e365ab0a99edfdc6d491, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4392382000 locked=0 (ID: 1752237116413-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3792382000 locked=4092382000 (ID: 1752237116413-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"307","blockHash":"0x1e4fdcd9412011e1cd014115ee7d774667a43aeb5651146c12e0775bf8cb623d","txHash":"0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":179,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010233,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e","networkName":"network"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"179","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234233","convertedTimestamp":1752234233}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 179 (ID: 1752237116414-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 179 (ID: 1752237116414-0)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116420-0)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3872382000 locked=4092382000 (ID: 1752237116421-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1602691200 locked=4491000000 (ID: 1752237116421-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8309200 locked=0 (ID: 1752237116421-2)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161400000000000000 locked=1560000000000000000 (ID: 1752237116422-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1437120000000000000 locked=0 (ID: 1752237116422-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4280000000000000 locked=0 (ID: 1752237116423-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"174","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234233,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237116424-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 174 (ID: 1752237116424-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 174 (ID: 1752237116424-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116429-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116429-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116430-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116430-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116431-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237116434-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 179 (ID: 1752237116434-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 179 (ID: 1752237116434-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 174 (ID: 1752237116435-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 174 (ID: 1752237116435-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116450-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116450-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116451-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116451-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116451-2)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3952782000 locked=4092382000 (ID: 1752237116452-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1522371600 locked=4491000000 (ID: 1752237116452-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8389600 locked=0 (ID: 1752237116453-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121400000000000000 locked=1520000000000000000 (ID: 1752237116453-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1477040000000000000 locked=0 (ID: 1752237116454-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4360000000000000 locked=0 (ID: 1752237116454-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"175","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234233,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237116455-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 175 (ID: 1752237116455-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 175 (ID: 1752237116455-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116460-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116461-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116461-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116461-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116462-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237116465-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 179 (ID: 1752237116465-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 179 (ID: 1752237116465-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 175 (ID: 1752237116466-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 175 (ID: 1752237116466-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116481-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116481-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116482-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116482-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116482-2)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-3993182000 locked=4092382000 (ID: 1752237116483-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1482012000 locked=4491000000 (ID: 1752237116483-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8430000 locked=0 (ID: 1752237116484-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101400000000000000 locked=1500000000000000000 (ID: 1752237116484-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1497000000000000000 locked=0 (ID: 1752237116485-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4400000000000000 locked=0 (ID: 1752237116485-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"92","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234233,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237116486-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 92 (ID: 1752237116486-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 92 (ID: 1752237116486-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116491-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116492-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116492-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116492-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116493-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237116496-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 179 (ID: 1752237116496-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 179 (ID: 1752237116497-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 92 (ID: 1752237116497-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 92 (ID: 1752237116497-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116511-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116512-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116512-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116512-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116513-0)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0xfe0b7cab80728b03c401884914b29bba42b833f1a0a856edcf72dfaa7245ab6e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4191582000 locked=0 (ID: 1752237116513-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1597000000000000000 locked=0 (ID: 1752237116514-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1397000000000000000 locked=1497000000000000000 (ID: 1752237116514-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"307","blockHash":"0x1e4fdcd9412011e1cd014115ee7d774667a43aeb5651146c12e0775bf8cb623d","txHash":"0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":180,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010233,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55","networkName":"network"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"180","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234233","convertedTimestamp":1752234233}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 180 (ID: 1752237116516-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 180 (ID: 1752237116516-0)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116522-0)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1447000000000000000 locked=1497000000000000000 (ID: 1752237116523-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51450000000000000 locked=1500000000000000000 (ID: 1752237116523-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4450000000000000 locked=0 (ID: 1752237116524-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1385012000 locked=4394000000 (ID: 1752237116524-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4288388000 locked=0 (ID: 1752237116524-2)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8624000 locked=0 (ID: 1752237116525-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"173","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234233,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237116526-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 173 (ID: 1752237116526-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 173 (ID: 1752237116526-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116531-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116531-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116532-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116532-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116533-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237116536-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 173 (ID: 1752237116536-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 173 (ID: 1752237116536-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 180 (ID: 1752237116536-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 180 (ID: 1752237116537-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116551-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116552-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116552-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116553-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116553-1)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1497000000000000000 locked=1497000000000000000 (ID: 1752237116553-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1500000000000000 locked=1500000000000000000 (ID: 1752237116554-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4500000000000000 locked=0 (ID: 1752237116554-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1288512000 locked=4297500000 (ID: 1752237116555-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4384695000 locked=0 (ID: 1752237116556-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8817000 locked=0 (ID: 1752237116556-1)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"172","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234233,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237116557-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 172 (ID: 1752237116557-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 172 (ID: 1752237116558-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116563-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116563-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116564-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116564-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116565-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":307,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":307,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 307, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237116568-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 172 (ID: 1752237116568-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 172 (ID: 1752237116569-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 180 (ID: 1752237116569-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 180 (ID: 1752237116569-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116583-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116584-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116584-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116584-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116585-0)
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 307, Transaction hash: 0x5b942f46f9e8f5da9f6348f09db55bed0381221907a74302cd3087415db64f55, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":307}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1497000000000000000 locked=0 (ID: 1752237116585-0)
2025-07-11T19:31:56: Block number: 307, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":310}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1193512000 locked=4297500000 (ID: 1752237116586-0)
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":310}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1383512000 locked=4392500000 (ID: 1752237116586-1)
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"310","blockHash":"0xbaa3080be2d16363f019c8c8b09fbcec5c1310524b9196a1337e8ec4b4e8950d","txHash":"0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":181,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc","networkName":"network"}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"181","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":310}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":310}
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":310,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 310, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":310}
2025-07-11T19:31:56: Block number: 310, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":310,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 310, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 181 (ID: 1752237116587-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 181 (ID: 1752237116587-0)
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116593-0)
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 310, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 310, Transaction hash: 0x3dde42e0acede8a1dc0f29f80ae9fee9a3de9e3c02e303852b884880f6c2ebfc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1288012000 locked=4392500000 (ID: 1752237116594-0)
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1479012000 locked=4488000000 (ID: 1752237116594-1)
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"311","blockHash":"0x35c853f5d5471f0b852e7a364ac24085d35d281a520d7a40349ac240eec5243f","txHash":"0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":182,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc","networkName":"network"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"182","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":311,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 311, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":311,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 182 (ID: 1752237116595-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 182 (ID: 1752237116595-0)
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116601-0)
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0xceabb3aadd8925d27748cc5bc24abddfe32f389ab3d0781cc3d7b3806f6f79bc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1383012000 locked=4488000000 (ID: 1752237116602-0)
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1575012000 locked=4584000000 (ID: 1752237116602-1)
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"311","blockHash":"0x35c853f5d5471f0b852e7a364ac24085d35d281a520d7a40349ac240eec5243f","txHash":"0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":183,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf","networkName":"network"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"183","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":311,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 311, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":311,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 183 (ID: 1752237116603-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 183 (ID: 1752237116603-0)
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116609-0)
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x3832832ecdeb790b86bc3467e4f6c95864d8b8c6e2cf754cd161323c1a731baf, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1478512000 locked=4584000000 (ID: 1752237116609-0)
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1671512000 locked=4680500000 (ID: 1752237116609-1)
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"311","blockHash":"0x35c853f5d5471f0b852e7a364ac24085d35d281a520d7a40349ac240eec5243f","txHash":"0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":184,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989","networkName":"network"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"184","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":311,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 311, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":311}
2025-07-11T19:31:56: Block number: 311, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":311,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 311, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 184 (ID: 1752237116611-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 184 (ID: 1752237116611-0)
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116617-0)
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 311, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 311, Transaction hash: 0x46e1aa3e57884eca484c2bedf0f16baff4478504eef00dbbaa041df055016989, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":312}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1574512000 locked=4680500000 (ID: 1752237116617-0)
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":312}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1768512000 locked=4777500000 (ID: 1752237116617-1)
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"312","blockHash":"0xa6d193c769f3e173c8a02879ca489d43c196f1382b333a93bc65984b5e33428c","txHash":"0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":185,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69","networkName":"network"}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"185","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":312}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":312}
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":312,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 312, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":312}
2025-07-11T19:31:56: Block number: 312, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":312,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 312, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 185 (ID: 1752237116618-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 185 (ID: 1752237116618-0)
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116625-0)
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 312, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 312, Transaction hash: 0x4b68114d7e38673ff2b49998a04a36998bfe6546edac4be15d04b523f4c41e69, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38500000000000000 locked=1500000000000000000 (ID: 1752237116625-0)
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41500000000000000 locked=1540000000000000000 (ID: 1752237116625-1)
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"313","blockHash":"0x271d5d882267a8615d4efb40cddc958c5c17f734c68c892f21f79381cc07dd06","txHash":"0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":186,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a","networkName":"network"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"186","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":313,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 313, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":313,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 186 (ID: 1752237116626-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 186 (ID: 1752237116626-0)
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116632-0)
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xa130309a6bea9770f865092e2df8cb0984ca2b54299b04fe37eb1d469791275a, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1500000000000000 locked=1540000000000000000 (ID: 1752237116633-0)
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81500000000000000 locked=1580000000000000000 (ID: 1752237116633-1)
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"313","blockHash":"0x271d5d882267a8615d4efb40cddc958c5c17f734c68c892f21f79381cc07dd06","txHash":"0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":187,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7","networkName":"network"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"187","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":313,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 313, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":313,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 187 (ID: 1752237116634-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 187 (ID: 1752237116634-0)
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116640-0)
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0xc4363fb052895b527a693cbb5bf4feb053cf41edcbbb12b2cdd297183b8261b7, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41500000000000000 locked=1580000000000000000 (ID: 1752237116640-0)
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121500000000000000 locked=1620000000000000000 (ID: 1752237116640-1)
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"313","blockHash":"0x271d5d882267a8615d4efb40cddc958c5c17f734c68c892f21f79381cc07dd06","txHash":"0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":188,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133","networkName":"network"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"188","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":313,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 313, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":313}
2025-07-11T19:31:56: Block number: 313, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":313,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 313, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 188 (ID: 1752237116642-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 188 (ID: 1752237116642-0)
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116648-0)
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 313, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 313, Transaction hash: 0x5ec6be773daf17e3010f9d4f41a617222672971bc60aa63aabc58b1b5c9e4133, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81500000000000000 locked=1620000000000000000 (ID: 1752237116648-0)
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161500000000000000 locked=1660000000000000000 (ID: 1752237116648-1)
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"314","blockHash":"0xda6ee9e819ee78ff7d82c49c3106ae7f4aede0311a942fa58017f3789d29f868","txHash":"0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":189,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95","networkName":"network"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"189","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":314,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 314, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":314,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 189 (ID: 1752237116650-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 189 (ID: 1752237116650-0)
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116656-0)
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0xb23a4b6cac80e1b2e7f034099602746ca6b249a3999c99e2a9cd9ba1e8d79a95, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121500000000000000 locked=1660000000000000000 (ID: 1752237116656-0)
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201500000000000000 locked=1700000000000000000 (ID: 1752237116656-1)
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"314","blockHash":"0xda6ee9e819ee78ff7d82c49c3106ae7f4aede0311a942fa58017f3789d29f868","txHash":"0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":190,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010249,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef","networkName":"network"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"190","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234249","convertedTimestamp":1752234249}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":314,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 314, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":314}
2025-07-11T19:31:56: Block number: 314, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":314,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 314, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 190 (ID: 1752237116658-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 190 (ID: 1752237116658-0)
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116664-0)
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 314, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 314, Transaction hash: 0x9c2706c29b6c0d066cf196f64f8019d466c3fc5eea6d060297f22f9f629441ef, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4684695000 locked=0 (ID: 1752237116665-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4084695000 locked=4384695000 (ID: 1752237116665-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"316","blockHash":"0x5d03dd7b9997ef6b6dcd259c49cba8e3f7010e54ea3fb2a4eea375b2a9994c7b","txHash":"0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":191,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010255,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04","networkName":"network"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"191","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234255","convertedTimestamp":1752234255}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 191 (ID: 1752237116666-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 191 (ID: 1752237116666-0)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116672-0)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4164695000 locked=4384695000 (ID: 1752237116672-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1688592000 locked=4777500000 (ID: 1752237116673-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8897000 locked=0 (ID: 1752237116673-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161500000000000000 locked=1660000000000000000 (ID: 1752237116674-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1536920000000000000 locked=0 (ID: 1752237116674-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4580000000000000 locked=0 (ID: 1752237116674-2)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"186","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234255,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237116675-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 186 (ID: 1752237116675-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 186 (ID: 1752237116675-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116681-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116681-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116682-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116682-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237116686-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 191 (ID: 1752237116686-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 191 (ID: 1752237116686-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 186 (ID: 1752237116686-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 186 (ID: 1752237116686-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116700-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116701-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116701-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116701-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116702-0)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4245095000 locked=4384695000 (ID: 1752237116702-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1608272400 locked=4777500000 (ID: 1752237116703-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=8977400 locked=0 (ID: 1752237116703-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121500000000000000 locked=1620000000000000000 (ID: 1752237116703-2)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1576840000000000000 locked=0 (ID: 1752237116704-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4660000000000000 locked=0 (ID: 1752237116704-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"187","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234255,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237116705-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 187 (ID: 1752237116705-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 187 (ID: 1752237116705-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116709-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116710-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116710-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116711-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116711-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237116715-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 191 (ID: 1752237116715-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 191 (ID: 1752237116715-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 187 (ID: 1752237116715-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 187 (ID: 1752237116715-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116729-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116730-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116730-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116731-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116731-1)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4285495000 locked=4384695000 (ID: 1752237116731-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1567912800 locked=4777500000 (ID: 1752237116732-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9017800 locked=0 (ID: 1752237116732-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101500000000000000 locked=1600000000000000000 (ID: 1752237116733-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1596800000000000000 locked=0 (ID: 1752237116733-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4700000000000000 locked=0 (ID: 1752237116733-2)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"92","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234255,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237116734-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 92 (ID: 1752237116734-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 92 (ID: 1752237116734-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116740-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116740-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116740-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116741-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116741-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237116745-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 191 (ID: 1752237116745-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 191 (ID: 1752237116745-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 92 (ID: 1752237116745-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 92 (ID: 1752237116745-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116760-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116760-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116760-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116761-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116761-1)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0x0d41cc131b734ed9e712b5c39ea54dacb627ddac313bf53bda0b6e1be7a16e04, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4483895000 locked=0 (ID: 1752237116762-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1696800000000000000 locked=0 (ID: 1752237116762-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1496800000000000000 locked=1596800000000000000 (ID: 1752237116762-2)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"316","blockHash":"0x5d03dd7b9997ef6b6dcd259c49cba8e3f7010e54ea3fb2a4eea375b2a9994c7b","txHash":"0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753","logIndex":23,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":192,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010255,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753","networkName":"network"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"192","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234255","convertedTimestamp":1752234255}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 192 (ID: 1752237116763-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 192 (ID: 1752237116763-0)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116770-0)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1546800000000000000 locked=1596800000000000000 (ID: 1752237116770-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51550000000000000 locked=1600000000000000000 (ID: 1752237116770-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4750000000000000 locked=0 (ID: 1752237116771-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1470912800 locked=4680500000 (ID: 1752237116771-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4580701000 locked=0 (ID: 1752237116772-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9211800 locked=0 (ID: 1752237116772-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"185","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234255,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237116773-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 185 (ID: 1752237116773-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 185 (ID: 1752237116774-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116779-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237116779-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237116780-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237116780-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237116781-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237116784-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 185 (ID: 1752237116784-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 185 (ID: 1752237116784-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 192 (ID: 1752237116784-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 192 (ID: 1752237116784-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116799-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116799-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116800-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116800-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116801-0)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1596800000000000000 locked=1596800000000000000 (ID: 1752237116801-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1600000000000000 locked=1600000000000000000 (ID: 1752237116801-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4800000000000000 locked=0 (ID: 1752237116802-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1374412800 locked=4584000000 (ID: 1752237116802-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4677008000 locked=0 (ID: 1752237116803-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9404800 locked=0 (ID: 1752237116803-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"184","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234255,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237116804-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 184 (ID: 1752237116804-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 184 (ID: 1752237116804-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116810-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237116810-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237116810-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237116811-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237116811-1)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":316,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":316,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 316, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237116815-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 184 (ID: 1752237116815-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 184 (ID: 1752237116815-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 192 (ID: 1752237116815-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 192 (ID: 1752237116815-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116830-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116830-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116830-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116831-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116831-1)
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 316, Transaction hash: 0xa87b0abf49583e73a70a36cfef00464e9ab073019c62a46881d28d9a4b69a753, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":316}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1596800000000000000 locked=0 (ID: 1752237116832-0)
2025-07-11T19:31:56: Block number: 316, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":318}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1279412800 locked=4584000000 (ID: 1752237116832-1)
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":318}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1469412800 locked=4679000000 (ID: 1752237116832-2)
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"318","blockHash":"0xc0e56cbd3cacf00de942be4f071876963f8bfbbdf30798a0b874e729ac79768f","txHash":"0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f","logIndex":6,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":193,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f","networkName":"network"}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"193","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":318}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":318}
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":318,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 318, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":318}
2025-07-11T19:31:56: Block number: 318, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":318,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 318, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 193 (ID: 1752237116833-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 193 (ID: 1752237116834-0)
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116839-0)
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 318, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 318, Transaction hash: 0xf62af19b401e651980127cc0412e5fb553c3eb047aa21deffa2483681607221f, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1373912800 locked=4679000000 (ID: 1752237116840-0)
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1564912800 locked=4774500000 (ID: 1752237116840-1)
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"319","blockHash":"0x4af4a876b746bc497743a83216e43959e350584c25ec835716a582bb6bf2e4f1","txHash":"0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":194,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8","networkName":"network"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"194","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":319,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 319, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":319,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 194 (ID: 1752237116841-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 194 (ID: 1752237116841-0)
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116847-0)
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x43ccea1e988d53349eff23f9cb1f8c62713c1fc9c6a94e5233eba2765d6209a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1468912800 locked=4774500000 (ID: 1752237116848-0)
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1660912800 locked=4870500000 (ID: 1752237116848-1)
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"319","blockHash":"0x4af4a876b746bc497743a83216e43959e350584c25ec835716a582bb6bf2e4f1","txHash":"0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":195,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8","networkName":"network"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"195","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":319,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 319, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":319,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 195 (ID: 1752237116849-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 195 (ID: 1752237116849-0)
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237116855-0)
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x4b8656895b7c7dfe46287269ecdb92c2f6950d87646a038d93672ed68701ede8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1564412800 locked=4870500000 (ID: 1752237116856-0)
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1757412800 locked=4967000000 (ID: 1752237116856-1)
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"319","blockHash":"0x4af4a876b746bc497743a83216e43959e350584c25ec835716a582bb6bf2e4f1","txHash":"0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":196,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67","networkName":"network"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"196","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":319,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 319, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":319}
2025-07-11T19:31:56: Block number: 319, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":319,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 319, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 196 (ID: 1752237116857-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 196 (ID: 1752237116857-0)
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237116865-0)
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 319, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 319, Transaction hash: 0x63eaa4c9b1ba563e1be0f57ff10c6e5391d8e76006b6b06dfa16b7ab941f3f67, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":320}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1660412800 locked=4967000000 (ID: 1752237116865-0)
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":320}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1854412800 locked=5064000000 (ID: 1752237116865-1)
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"320","blockHash":"0x46556893d190c31d252defe5e71dd73139c80e1f931cc736d09becff126da19f","txHash":"0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":197,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19","networkName":"network"}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"197","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":320}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":320}
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":320,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 320, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":320}
2025-07-11T19:31:56: Block number: 320, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":320,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 320, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 197 (ID: 1752237116867-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 197 (ID: 1752237116867-0)
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116873-0)
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 320, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 320, Transaction hash: 0x40247c362a88bf31dd30b48b279abd70fc964273539e38a35296600156761c19, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":321}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38400000000000000 locked=1600000000000000000 (ID: 1752237116874-0)
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":321}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41600000000000000 locked=1640000000000000000 (ID: 1752237116874-1)
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"321","blockHash":"0x22d0622b2519cac401de30a5046c5955f46e0b2b5a98198a6603023c64193641","txHash":"0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":198,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0","networkName":"network"}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"198","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":321}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":321}
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":321,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 321, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":321}
2025-07-11T19:31:56: Block number: 321, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":321,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 321, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 198 (ID: 1752237116875-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 198 (ID: 1752237116875-0)
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116881-0)
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 321, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 321, Transaction hash: 0xefca995b5b456d8ff4ad8d003b9351798debbe3d60316e85a70aec0310d2b4e0, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":322}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1600000000000000 locked=1640000000000000000 (ID: 1752237116882-0)
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":322}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81600000000000000 locked=1680000000000000000 (ID: 1752237116882-1)
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"322","blockHash":"0x1ffd4da2efec52b4cb7be8cc36eebfd2a2076527383ac067cc259a42467bf986","txHash":"0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":199,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b","networkName":"network"}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"199","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":322}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":322}
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":322,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 322, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":322}
2025-07-11T19:31:56: Block number: 322, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":322,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 322, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 199 (ID: 1752237116883-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 199 (ID: 1752237116883-0)
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116889-0)
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 322, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 322, Transaction hash: 0x5118737bb4b0d9d5acb3b4d549b45dfe35b4f81a00fe401bf9cfe07a7c7df67b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":323}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41600000000000000 locked=1680000000000000000 (ID: 1752237116890-0)
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":323}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121600000000000000 locked=1720000000000000000 (ID: 1752237116890-1)
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"323","blockHash":"0x8641bc3c4cefcad771316965853cf343a946b51e7890adf0e6df84a245af9468","txHash":"0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":200,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b","networkName":"network"}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"200","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":323}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":323}
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":323,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 323, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":323}
2025-07-11T19:31:56: Block number: 323, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":323,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 323, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 200 (ID: 1752237116891-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 200 (ID: 1752237116891-0)
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116897-0)
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 323, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 323, Transaction hash: 0xb05e594d87be82581311dd88d06709d8300513695f8e1467a4276a7758d1e17b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81600000000000000 locked=1720000000000000000 (ID: 1752237116898-0)
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161600000000000000 locked=1760000000000000000 (ID: 1752237116898-1)
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"324","blockHash":"0x0dc37573418664e819bd1422fac45e78e0a658a9d49c8ed5fcb98af795d8691a","txHash":"0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":201,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6","networkName":"network"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"201","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":324,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 324, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":324,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 201 (ID: 1752237116899-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 201 (ID: 1752237116899-0)
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116906-0)
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x06540c61ce50d36c6f49c3b97068729d191a3246bafe87ce4a3cc8ab7ae0bcc6, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121600000000000000 locked=1760000000000000000 (ID: 1752237116906-0)
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201600000000000000 locked=1800000000000000000 (ID: 1752237116906-1)
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"324","blockHash":"0x0dc37573418664e819bd1422fac45e78e0a658a9d49c8ed5fcb98af795d8691a","txHash":"0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":202,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010271,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87","networkName":"network"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"202","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234271","convertedTimestamp":1752234271}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":324,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 324, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":324}
2025-07-11T19:31:56: Block number: 324, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":324,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 324, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell open 202 (ID: 1752237116907-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 202 (ID: 1752237116907-0)
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116912-0)
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 324, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 324, Transaction hash: 0x8df0e104d550157d31943b85a36be1845bf051a8e7ed1cd07615483e3fdefe87, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4977008000 locked=0 (ID: 1752237116913-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4377008000 locked=4677008000 (ID: 1752237116913-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"327","blockHash":"0xe5fad2d67276e309f9c432ffd1c9b342a26a39b29c9443317be0353ed9124a78","txHash":"0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6","logIndex":5,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":203,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010277,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6","networkName":"network"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"203","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234277","convertedTimestamp":1752234277}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy open 203 (ID: 1752237116914-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc new 203 (ID: 1752237116914-0)
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237116919-0)
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4457008000 locked=4677008000 (ID: 1752237116920-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1774492800 locked=5064000000 (ID: 1752237116920-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9484800 locked=0 (ID: 1752237116920-2)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161600000000000000 locked=1760000000000000000 (ID: 1752237116921-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1636720000000000000 locked=0 (ID: 1752237116921-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4880000000000000 locked=0 (ID: 1752237116921-2)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"198","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234277,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237116922-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 198 (ID: 1752237116922-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 198 (ID: 1752237116922-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116927-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237116928-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237116928-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237116928-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237116929-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237116932-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 203 (ID: 1752237116932-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 203 (ID: 1752237116933-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 198 (ID: 1752237116933-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 198 (ID: 1752237116933-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237116947-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116948-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116948-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116949-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116949-1)
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4537408000 locked=4677008000 (ID: 1752237116950-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1694173200 locked=5064000000 (ID: 1752237116950-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9565200 locked=0 (ID: 1752237116950-2)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121600000000000000 locked=1720000000000000000 (ID: 1752237116951-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1676640000000000000 locked=0 (ID: 1752237116951-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=4960000000000000 locked=0 (ID: 1752237116952-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"199","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234277,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237116952-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 199 (ID: 1752237116953-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 199 (ID: 1752237116953-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116958-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237116958-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237116959-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237116959-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237116960-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237116963-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 203 (ID: 1752237116963-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 203 (ID: 1752237116963-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell filled 199 (ID: 1752237116963-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 199 (ID: 1752237116963-1)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116979-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116980-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116980-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116980-2)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116981-0)
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4577808000 locked=4677008000 (ID: 1752237116981-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1653813600 locked=5064000000 (ID: 1752237116982-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9605600 locked=0 (ID: 1752237116982-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101600000000000000 locked=1700000000000000000 (ID: 1752237116982-2)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1696600000000000000 locked=0 (ID: 1752237116983-0)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5000000000000000 locked=0 (ID: 1752237116983-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"104","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"PARTIALLY_FILLED","filled":"20000000000000000","timestamp":1752234277,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc sell 20000000000000000@2020000000 (ID: 1752237116984-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 104 (ID: 1752237116984-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 104 (ID: 1752237116984-0)
2025-07-11T19:31:56: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237116990-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237116990-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237116990-1)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237116991-0)
2025-07-11T19:31:56: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237116991-1)
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:56: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:56: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:56: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:56: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:56: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237116995-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc buy filled 203 (ID: 1752237116995-0)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 203 (ID: 1752237116995-0)
2025-07-11T19:31:56: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 104 (ID: 1752237116995-1)
2025-07-11T19:31:56: [REDIS STREAM] Published execution report: mwethmusdc trade 104 (ID: 1752237116995-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117010-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237117010-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237117011-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237117011-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237117012-0)
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xd0a2f2831c8af8f2aee05b6b0b1bced2d427963ee5286ffcc9c4116a57521ac6, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4776208000 locked=0 (ID: 1752237117012-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1796600000000000000 locked=0 (ID: 1752237117012-1)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1596600000000000000 locked=1696600000000000000 (ID: 1752237117013-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"327","blockHash":"0xe5fad2d67276e309f9c432ffd1c9b342a26a39b29c9443317be0353ed9124a78","txHash":"0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e","logIndex":22,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":204,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010277,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e","networkName":"network"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"204","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234277","convertedTimestamp":1752234277}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 204 (ID: 1752237117014-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 204 (ID: 1752237117014-0)
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117019-0)
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1646600000000000000 locked=1696600000000000000 (ID: 1752237117019-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51650000000000000 locked=1700000000000000000 (ID: 1752237117019-1)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5050000000000000 locked=0 (ID: 1752237117020-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1556813600 locked=4967000000 (ID: 1752237117020-1)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4873014000 locked=0 (ID: 1752237117020-2)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9799600 locked=0 (ID: 1752237117020-3)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"197","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234277,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237117021-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 197 (ID: 1752237117021-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 197 (ID: 1752237117021-0)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237117026-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237117027-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237117027-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237117028-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237117028-1)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237117032-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 197 (ID: 1752237117033-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 197 (ID: 1752237117033-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 204 (ID: 1752237117033-1)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 204 (ID: 1752237117033-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237117048-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237117049-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237117049-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237117050-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237117050-1)
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1696600000000000000 locked=1696600000000000000 (ID: 1752237117051-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1700000000000000 locked=1700000000000000000 (ID: 1752237117051-1)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5100000000000000 locked=0 (ID: 1752237117051-2)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1460313600 locked=4870500000 (ID: 1752237117052-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=4969321000 locked=0 (ID: 1752237117052-1)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=9992600 locked=0 (ID: 1752237117053-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"196","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234277,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1930000000 (ID: 1752237117054-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 196 (ID: 1752237117054-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 196 (ID: 1752237117054-0)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237117059-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237117060-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237117060-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237117060-2)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237117061-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":327,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":327,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 327, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1930000000 (ID: 1752237117064-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 196 (ID: 1752237117064-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 196 (ID: 1752237117065-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 204 (ID: 1752237117065-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 204 (ID: 1752237117065-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237117080-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237117080-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237117081-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237117081-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237117081-2)
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 327, Transaction hash: 0xc085d044d2253234b6c764daa9f7bfa8149d98a5986032f88622e2be6884e34e, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":327}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1696600000000000000 locked=0 (ID: 1752237117082-0)
2025-07-11T19:31:57: Block number: 327, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1365313600 locked=4870500000 (ID: 1752237117082-1)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1555313600 locked=4965500000 (ID: 1752237117082-2)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"331","blockHash":"0x4d45e16977435461fde6f3a29ee586d168daba3b8063c67603888b7cbbe2af52","txHash":"0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":205,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1900000000","quantity":"50000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8","networkName":"network"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"205","price":"1900000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy open 205 (ID: 1752237117083-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 205 (ID: 1752237117084-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237117090-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0xf027105bf648c834e1cfb2797423cdcf5ffa11e91806e1cb5230cece161586a8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1459813600 locked=4965500000 (ID: 1752237117090-0)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1650813600 locked=5061000000 (ID: 1752237117090-1)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"331","blockHash":"0x4d45e16977435461fde6f3a29ee586d168daba3b8063c67603888b7cbbe2af52","txHash":"0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":206,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1910000000","quantity":"50000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689","networkName":"network"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"206","price":"1910000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy open 206 (ID: 1752237117091-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 206 (ID: 1752237117091-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237117098-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x02e8e18424891f2cb008200cff20658b33168e977a84f0cf42ed5210c1b0f689, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1554813600 locked=5061000000 (ID: 1752237117098-0)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1746813600 locked=5157000000 (ID: 1752237117098-1)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"331","blockHash":"0x4d45e16977435461fde6f3a29ee586d168daba3b8063c67603888b7cbbe2af52","txHash":"0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":207,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1920000000","quantity":"50000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc","networkName":"network"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"207","price":"1920000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy open 207 (ID: 1752237117099-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 207 (ID: 1752237117100-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":3,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=3 asks=3 (ID: 1752237117106-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x86f4fb1c5fdc469c300b20521d636859f5b38e47ecb1783ad173dc4668790ccc, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1650313600 locked=5157000000 (ID: 1752237117106-0)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1843313600 locked=5253500000 (ID: 1752237117106-1)
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"331","blockHash":"0x4d45e16977435461fde6f3a29ee586d168daba3b8063c67603888b7cbbe2af52","txHash":"0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":208,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1930000000","quantity":"50000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8","networkName":"network"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"208","price":"1930000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":331,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331}
2025-07-11T19:31:57: Block number: 331, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":331,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 331, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy open 208 (ID: 1752237117107-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 208 (ID: 1752237117107-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":4,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237117113-0)
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 331, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 331, Transaction hash: 0x2948dd0d2515b666c69d26b01fe035e1e64aedd8b24d94824e9a61d8936592d8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":332}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1746313600 locked=5253500000 (ID: 1752237117114-0)
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":332}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1940313600 locked=5350500000 (ID: 1752237117114-1)
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"332","blockHash":"0xdc896d885e4e2758b36116b39d85217287a3fbf688b5e5c9ee60209704ff92fd","txHash":"0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":209,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":0,"price":"1940000000","quantity":"50000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07","networkName":"network"}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"209","price":"1940000000","quantity":"50000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":332}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":332}
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":332,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 332, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":332}
2025-07-11T19:31:57: Block number: 332, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":332,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 332, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy open 209 (ID: 1752237117115-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 209 (ID: 1752237117115-0)
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117121-0)
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 332, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 332, Transaction hash: 0x3f258cec6ceebb948ffb4b5a99816c1d00c6e6fa32f8e930b19986f5f130fe07, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=38300000000000000 locked=1700000000000000000 (ID: 1752237117121-0)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41700000000000000 locked=1740000000000000000 (ID: 1752237117121-1)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"333","blockHash":"0xbad27361034675f92b8a49a1594a24eb0af4d096aa30a4d5a2a64426292668b0","txHash":"0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":210,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2000000000","quantity":"40000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac","networkName":"network"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"210","price":"2000000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 210 (ID: 1752237117123-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 210 (ID: 1752237117123-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":4}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237117129-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x833c7fa32b3693101ba4cd71c761d16ff4da03dce23bc082dcdd74bc0c69eeac, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1700000000000000 locked=1740000000000000000 (ID: 1752237117129-0)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81700000000000000 locked=1780000000000000000 (ID: 1752237117129-1)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"333","blockHash":"0xbad27361034675f92b8a49a1594a24eb0af4d096aa30a4d5a2a64426292668b0","txHash":"0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7","logIndex":7,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":211,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2010000000","quantity":"40000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7","networkName":"network"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"211","price":"2010000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 211 (ID: 1752237117131-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 211 (ID: 1752237117131-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237117137-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0xc6e891e619330e5dc051e8e0dd053eee285e249df01df45338a9930e2b5403e7, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-41700000000000000 locked=1780000000000000000 (ID: 1752237117137-0)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121700000000000000 locked=1820000000000000000 (ID: 1752237117137-1)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"333","blockHash":"0xbad27361034675f92b8a49a1594a24eb0af4d096aa30a4d5a2a64426292668b0","txHash":"0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff","logIndex":11,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":212,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2020000000","quantity":"40000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff","networkName":"network"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"212","price":"2020000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 212 (ID: 1752237117139-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 212 (ID: 1752237117139-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237117145-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x3a4a590b91656aff737e69a4d8cb5ac4b9207fa4ce941ec04acaa840531e09ff, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-81700000000000000 locked=1820000000000000000 (ID: 1752237117145-0)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161700000000000000 locked=1860000000000000000 (ID: 1752237117146-0)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"333","blockHash":"0xbad27361034675f92b8a49a1594a24eb0af4d096aa30a4d5a2a64426292668b0","txHash":"0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8","logIndex":15,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":213,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2030000000","quantity":"40000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8","networkName":"network"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"213","price":"2030000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 213 (ID: 1752237117147-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 213 (ID: 1752237117147-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237117153-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x177fd70eb0c4d9fac4002cd10053865bb0de3f29d5f1481ab03ad839ab244fe8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121700000000000000 locked=1860000000000000000 (ID: 1752237117154-0)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-201700000000000000 locked=1900000000000000000 (ID: 1752237117154-1)
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"333","blockHash":"0xbad27361034675f92b8a49a1594a24eb0af4d096aa30a4d5a2a64426292668b0","txHash":"0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a","logIndex":19,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":214,"user":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","side":1,"price":"2040000000","quantity":"40000000000000000","expiry":1760010293,"isMarketOrder":false,"status":0},"hasOrderId":true,"hasPrice":true,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a","networkName":"network"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"214","price":"2040000000","quantity":"40000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234293","convertedTimestamp":1752234293}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":333,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333}
2025-07-11T19:31:57: Block number: 333, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":333,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 333, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 214 (ID: 1752237117155-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 214 (ID: 1752237117155-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237117161-0)
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 333, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 333, Transaction hash: 0x6c453162502f8a49b356677a9569cf04e44e1a932f17fe27923dc5a473c4c49a, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5269321000 locked=0 (ID: 1752237117162-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4669321000 locked=4969321000 (ID: 1752237117162-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"336","blockHash":"0x2bce1bf35957b254640d91f44a8d5bfa8baca80d0f92e253e01673246a22456a","txHash":"0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b","logIndex":3,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":215,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":0,"price":"0","quantity":"100000000000000000","expiry":1760010299,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b","networkName":"network"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"215","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234299","convertedTimestamp":1752234299}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy open 215 (ID: 1752237117164-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 215 (ID: 1752237117164-0)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":5}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=5 (ID: 1752237117170-0)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4749321000 locked=4969321000 (ID: 1752237117170-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1860393600 locked=5350500000 (ID: 1752237117171-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=10072600 locked=0 (ID: 1752237117171-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-161700000000000000 locked=1860000000000000000 (ID: 1752237117171-2)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1736520000000000000 locked=0 (ID: 1752237117172-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5180000000000000 locked=0 (ID: 1752237117172-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"210","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234299,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2000000000 (ID: 1752237117173-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 210 (ID: 1752237117173-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 210 (ID: 1752237117173-0)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237117178-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1930000000 (ID: 1752237117179-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1930000000 (ID: 1752237117179-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1930000000 (ID: 1752237117179-2)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1930000000 (ID: 1752237117180-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2000000000 (ID: 1752237117183-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 215 (ID: 1752237117183-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 215 (ID: 1752237117183-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 210 (ID: 1752237117183-1)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 210 (ID: 1752237117183-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=4 (ID: 1752237117199-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237117200-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237117200-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237117200-2)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237117201-0)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4829721000 locked=4969321000 (ID: 1752237117201-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1780074000 locked=5350500000 (ID: 1752237117202-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=10153000 locked=0 (ID: 1752237117202-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-121700000000000000 locked=1820000000000000000 (ID: 1752237117202-2)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1776440000000000000 locked=0 (ID: 1752237117203-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5260000000000000 locked=0 (ID: 1752237117203-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"211","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234299,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2010000000 (ID: 1752237117204-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 211 (ID: 1752237117204-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 211 (ID: 1752237117204-0)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117210-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2000000000 (ID: 1752237117211-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2000000000 (ID: 1752237117211-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2000000000 (ID: 1752237117211-2)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2000000000 (ID: 1752237117212-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc buy 40000000000000000@2010000000 (ID: 1752237117215-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy partially_filled 215 (ID: 1752237117215-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 215 (ID: 1752237117216-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 211 (ID: 1752237117216-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 211 (ID: 1752237117216-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117231-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237117232-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237117232-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237117233-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237117233-1)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-4870121000 locked=4969321000 (ID: 1752237117234-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1739714400 locked=5350500000 (ID: 1752237117234-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=10193400 locked=0 (ID: 1752237117234-2)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-101700000000000000 locked=1800000000000000000 (ID: 1752237117235-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1796400000000000000 locked=0 (ID: 1752237117235-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5300000000000000 locked=0 (ID: 1752237117236-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"104","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"40000000000000000","timestamp":1752234299,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc sell 40000000000000000@2020000000 (ID: 1752237117237-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 104 (ID: 1752237117237-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 104 (ID: 1752237117237-0)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117242-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2010000000 (ID: 1752237117243-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2010000000 (ID: 1752237117243-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2010000000 (ID: 1752237117243-2)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2010000000 (ID: 1752237117244-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc buy 20000000000000000@2020000000 (ID: 1752237117247-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 215 (ID: 1752237117248-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 215 (ID: 1752237117248-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell filled 104 (ID: 1752237117248-1)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 104 (ID: 1752237117248-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117265-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237117265-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237117266-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237117266-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237117266-2)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x3806b11b5f6d78aec0f39fd7727d0084d6064a3b26315146e7aebd590b39953b, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5068521000 locked=0 (ID: 1752237117267-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=1896400000000000000 locked=0 (ID: 1752237117267-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1696400000000000000 locked=1796400000000000000 (ID: 1752237117268-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 1. Raw event data: {"eventType":"OrderPlaced","blockNumber":"336","blockHash":"0x2bce1bf35957b254640d91f44a8d5bfa8baca80d0f92e253e01673246a22456a","txHash":"0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8","logIndex":20,"contractAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 2. Event args validation: {"args":{"orderId":216,"user":"0x70997970C51812dc3A010C7d01b50e0d17dc79C8","side":1,"price":"0","quantity":"100000000000000000","expiry":1760010299,"isMarketOrder":true,"status":0},"hasOrderId":true,"hasPrice":false,"hasQuantity":true,"hasSide":true,"hasStatus":true}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 3. Context validation: {"hasDb":true,"chainId":31337,"txHash":"0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8","networkName":"network"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 4. BigInt conversions: {"orderId":"216","price":"0","quantity":"100000000000000000","filled":"0","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, Timestamp conversion: {"rawTimestamp":"1752234299","convertedTimestamp":1752234299}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, Creating order data...
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Called by main function: {"callerFunction":"handleOrderPlaced","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced Executing WebSocket operations: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12a2. About to call getPoolTradingPair with: {"address":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderPlaced WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderPlaced Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderPlaced Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderPlaced ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell open 216 (ID: 1752237117269-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc new 216 (ID: 1752237117269-0)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12f. Latest depth retrieved: {"bidsCount":5,"asksCount":3}
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=5 asks=3 (ID: 1752237117275-0)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12h. executeIfInSync callback completed successfully
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderPlaced WebSocket operations completed: {"callerFunction":"handleOrderPlaced"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 12. executeIfInSync operation completed successfully
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderPlaced, 13. ORDER PLACED EVENT DEBUG SUCCESS
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1746400000000000000 locked=1796400000000000000 (ID: 1752237117276-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-51750000000000000 locked=1800000000000000000 (ID: 1752237117276-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5350000000000000 locked=0 (ID: 1752237117277-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=-1642714400 locked=5253500000 (ID: 1752237117277-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=5165327000 locked=0 (ID: 1752237117278-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0xad2935e147b61175d5dc3a9e7bda93b0975a43ba available=10387400 locked=0 (ID: 1752237117278-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleUpdateOrder, 1. Starting UpdateOrder processing
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleUpdateOrder, 3. UpdateOrder processing data: {"orderId":"209","poolAddress":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","status":"FILLED","filled":"50000000000000000","timestamp":1752234299,"poolAddressType":"string","statusType":"string"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Called by main function: {"callerFunction":"handleUpdateOrder","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder Executing WebSocket operations: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleUpdateOrder WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleUpdateOrder Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleUpdateOrder ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc buy 50000000000000000@1940000000 (ID: 1752237117279-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 209 (ID: 1752237117279-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 209 (ID: 1752237117279-0)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237117285-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=2020000000 (ID: 1752237117285-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=2020000000 (ID: 1752237117286-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=2020000000 (ID: 1752237117286-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=2020000000 (ID: 1752237117286-2)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleUpdateOrder WebSocket operations completed: {"callerFunction":"handleUpdateOrder"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderMatched, 1. ======= ORDER MATCHED START =======
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderMatched, 2. Processing handleOrderMatched
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Called by main function: {"callerFunction":"handleOrderMatched","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched Executing WebSocket operations: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderMatched, 3. Starting executeIfInSync operation
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, handleOrderMatched WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR START =====
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Input parameters: {"pool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337,"blockNumber":336,"poolType":"string","chainIdType":"number","useStaticData":false}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Pool validation: {"originalPool":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","validationPassed":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache key creation: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","validatedPoolId":"0x198CCf5fb307a85716e657Bb34c73BadD364d747","chainId":31337}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Starting cache retrieval: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: redis.ts, Function: getCachedData, handleOrderMatched Cache retrieval completed: {"key":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","blockNumber":336,"found":true,"dataLength":476}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache lookup result: {"cacheKey":"pool:0x198ccf5fb307a85716e657bb34c73badd364d747:31337","hasCachedData":true,"cachedDataKeys":["id","chainId","coin","orderBook","baseCurrency","quoteCurrency","baseDecimals","quoteDecimals","volume","volumeInQuote","price","timestamp"],"cachedCoin":"MWETH/MUSDC","cacheHit":true}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched Cache hit - returning: {"originalCoin":"MWETH/MUSDC","processedResult":"mwethmusdc"}
2025-07-11T19:31:57: Block number: 336, File: getPoolTradingPair.ts, Function: getPoolTradingPair, handleOrderMatched ===== GET POOL TRADING PAIR END (CACHE HIT) =====
2025-07-11T19:31:57: [REDIS STREAM] Published trade event: mwethmusdc sell 50000000000000000@1940000000 (ID: 1752237117291-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc buy filled 209 (ID: 1752237117291-0)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 209 (ID: 1752237117291-0)
2025-07-11T19:31:57: [REDIS STREAM] Published order event: mwethmusdc sell partially_filled 216 (ID: 1752237117291-1)
2025-07-11T19:31:57: [REDIS STREAM] Published execution report: mwethmusdc trade 216 (ID: 1752237117291-1)
2025-07-11T19:31:57: [REDIS STREAM] Published depth event: mwethmusdc bids=4 asks=3 (ID: 1752237117307-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1m close=1940000000 (ID: 1752237117307-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 5m close=1940000000 (ID: 1752237117308-0)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 30m close=1940000000 (ID: 1752237117308-1)
2025-07-11T19:31:57: [REDIS STREAM] Published kline event: mwethmusdc 1h close=1940000000 (ID: 1752237117309-0)
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderMatched, 4. Websocket operations completed
2025-07-11T19:31:57: Block number: 336, Transaction hash: 0x0a24a74a55773dbf3ee4516253effdb52da4b216268632dc008c2f4fbe49aac8, File: orderBookHandler.ts, Function: handleOrderMatched, 5. ======= ORDER MATCHED END =======
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, handleOrderMatched WebSocket operations completed: {"callerFunction":"handleOrderMatched"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1796400000000000000 locked=1796400000000000000 (ID: 1752237117309-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=-1800000000000000 locked=1800000000000000000 (ID: 1752237117310-0)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Called by main function: {"callerFunction":"fetchAndPushBalance","eventBlockNumber":336}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: shouldEnableWebSocket, fetchAndPushBalance WebSocket enable check: {"enabledBlockNumber":186,"shouldEnable":true}
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance Executing WebSocket operations: {"callerFunction":"fetchAndPushBalance"}
2025-07-11T19:31:57: [REDIS STREAM] Published balance update: 0x198ccf5fb307a85716e657bb34c73badd364d747 0x06b3244b086cecc40f1e5a826f736ded68068a0f available=5400000000000000 locked=0 (ID: 1752237117310-1)
2025-07-11T19:31:57: Block number: 336, File: syncState.ts, Function: executeIfInSync, fetchAndPushBalance WebSocket operations completed: {"callerFunction":"fetchAndPushBalance"}
